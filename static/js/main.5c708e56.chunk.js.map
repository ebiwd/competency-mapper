{"version":3,"sources":["shared/components/progress-bar/progress-bar.jsx","app/containers/navigation/Navigation.jsx","app/containers/login-form/LoginForm.jsx","app/containers/masthead/Masthead.jsx","shared/components/edit-inline/EditInline.tsx","app/containers/simple-form/SimpleForm.tsx","app/components/error-loading/ErrorLoading.tsx","app/containers/framework-versions/FrameworkVersions.tsx","app/services/http/headers.js","app/services/http/http.js","app/services/competency/body.js","app/services/competency/competency.js","app/services/active-requests/active-requests.js","app/services/util/util.js","app/containers/ManageAttributes.jsx","app/containers/version-controls/VersionControls.tsx","app/containers/ManageCompetencies.jsx","app/services/courses/courses.js","app/containers/CompetencyDetails.jsx","app/components/competency-list/CompetencyList.jsx","app/components/domain-list/DomainList.jsx","app/containers/courses/Courses.jsx","app/containers/CompetencyList.jsx","app/containers/ResourceEdit.jsx","app/containers/FileUpload.jsx","app/containers/ResourceCreate.jsx","app/containers/AttributeMap.jsx","app/containers/framework-versions/VersionNotice.jsx","app/containers/ResourceDetails.jsx","app/containers/ResourcesList.jsx","app/containers/ResourcesHome.jsx","app/containers/ChangePassword.jsx","app/components/about/About.js","app/components/framework-button/FrameworkButton.jsx","app/components/framework-buttons/FrameworkButtons.jsx","app/containers/Frameworks.jsx","app/containers/CompetencySettings.jsx","app/containers/ArticleCreate.jsx","app/containers/AttributeSettings.jsx","app/containers/AttributeDemap.jsx","app/services/auth/auth.js","app/containers/Root.jsx","index.jsx","shared/components/progress-bar/progress-bar.module.css"],"names":["ProgressBar","_ref","isActive","react_default","a","createElement","Fragment","className","concat","styles","progress","role","meter","defaultProps","$","window","Navigation","navRef","React","createRef","logout","onLogout","_this","props","this","current","foundation","_this$props","roles","user","frameworkResources","tabIndex","react_router_dom","to","trainingResources","userDropdown","onClick","ref","data-dropdown-menu","data-description","includes","Component","LoginForm","state","username","password","onChange","event","setState","Object","defineProperty","currentTarget","name","value","submit","onSubmit","_this$state","_this2","_this$state2","type","autoComplete","placeholder","aria-hidden","Masthead","onLogin","data-sticky-container","id","data-sticky","data-sticky-on","data-top-anchor","data-btm-anchor","navigation_Navigation","login_form_LoginForm","progress_bar","defaultState","oriValue","active","EditInline","selfRef","inputRef","toggleActive","contains","target","reset","change","render","style","staticElement","editable","aria-label","key","text","document","addEventListener","removeEventListener","prevProps","prevState","setTimeout","focus","newValue","description","uuid","mapping","SimpleForm","preventDefault","onCreate","trim","setDefaultOption","options","length","title","showMappingField","selectOptions","map","required","ErrorLoading","message","customStyles","content","top","left","right","bottom","marginRight","transform","FrameworkVersion","versions","framework","_useState","useState","_useState2","slicedToArray","showNotes","setShowNotes","_useState3","_useState4","notes","setNotes","versionItems","filter","version","number","release_notes","lib_default","isOpen","Parser","HeadersService","classCallCheck","instance","arguments","undefined","csfrToken","localStorage","getItem","Accept","Content-Type","X-CSRF-Token","Authorization","apiUrl","process","axios","defaults","baseURL","HttpService","headers","Headers","url","credentialType","get","withCredentials","body","option","post","patch","BodyService","_links","_embedded","domainId","domainUuid","_ref$mapping","draftId","draftUuid","href","target_id","field_map_other_competency","self","lang","_links2","_embedded2","_ref2","attributeTypeId","attributeTypeUuid","competencyId","competencyUuid","mutate","_ref3","releaseNotes","field_parent","field_release_notes","field_item","nodeId","vid","attribuiteId","_links4","_embedded4","CompetencyService","http","response","data","Date","now","Body","createAttribute","createCompetency","mutateCompetency","mutateCompetencyPosition","toggleArchivingVersionedNode","attributeId","mutateAttribute","publishFramework","createDraftFramework","versionId","updateReleaseNotes","changeDomain","attribiuteId","changeAttributeSettings","resource","items","attributes","ActiveRequestsService","counter","callbacks","fn","push","index","forEach","safeFlat","array","Array","prototype","flat","reduce","acc","cur","toConsumableArray","tagsReg","RegExp","nbspReg","removeHtmlTags","htmlString","replaceBy","replace","ManageAttributes","activeRequests","competencyService","match","params","frameworkName","frameworkVersion","frameworStatus","attributeTypes","domainName","cid","competencyName","competencyData","path","location","pathname","split","loadingError","_callee","draftVersion","regenerator_default","wrap","_context","prev","next","startRequest","find","attribute","fetchFramework","t0","enqueueSnackbar","variant","finishRequest","finish","stop","scroll","loadData","fetchVersions","getAllVersionedFrameworks","allFrameworks","currentFramework","fw","toLowerCase","attribute_types","reverse","liveVersion","status","frameworkData","getVersionedDraftFramework","getVersionedFramework","competencyMatch","filterByCompetencyId","frameworkStatus","domainTitle","item","domains","domain","competencies","competency","nid","patchAttribute","position","patchAttributePosition","isArchived","attributeType","_this$state3","archived","EditInline_EditInline","editAttribute","field_number","editAttributePosition","toggleArchive","class","_this3","_this$state4","getAttributeRows","_this$state5","error_loading_ErrorLoading","SimpleForm_SimpleForm","getAttributeList","FrameworkVersions","withSnackbar","VersionControls","release","updateNotes","createDraft","curr","originalNotes","setVersion","_useState5","_useState6","pressedRelease","setPressedRelease","_useState7","_useState8","pressedNotes","setPressedNotes","react_ckeditor_component_lib_default","events","editor","getData","cleanNotes","ManageCompetencies","frameworkVersionId","competencyTypes","releaseNewVersion","_callee2","_context2","_callee3","_context3","_callee4","_context4","refs","scrollIntoView","patchCompetency","patchCompetencyPosition","getCompetencyRows","_this4","editCompetency","editCompetencyPosition","bind","_this$state6","version_controls_VersionControls","getCompetencyList","CoursesService","CompetencyDetails","coursesService","attributeDefs","resources","Promise","all","getFramework","getAttributes","getResources","getAllFrameworks","frameworkMatch","getCourses","allResources","competency_profile","profile","competency_id","console","log","objectSpread","competencyDetails","def","mapped_other_competency","resourceBlock","CompetencyList","disable","attributesGrouped","groupBy","keys","Collapsible_default","trigger","triggerWhenOpen","parentIndex","DomainList","childIndex","components_competency_list_CompetencyList","Courses","possibleConstructorReturn","getPrototypeOf","call","courses","filteredCourses","onFilter","term","e","course","test","allCourses","filterCourses","filteredProfiles","framework_label","modifiedCourse","competency_label","frameworkDescription","filteredDomains","filteredCompetencies","versionStatus","vr","domainList","domain_list_DomainList","esm","courses_Courses","_props$match$params","ResourceEdit","csrf","updateFlag","dates","dates2","target_audience","learning_outcomes","keywords","organisers","trainers","evt","newContent","csrfURL","fetch","then","Response","findresponse2","fetchResource","json","findresponse","alert","history","checkUser","start_date","end_date","ResourceEdit_EditForm","EditForm","setRedirect","redirect","handleTitle","assertThisInitialized","handleDates","handleDates2","handleType","handleDesc","handleLocation","handleURL","handleTargetAudience","handleLearningOutcomes","handleKeywords","handleOrganisers","handleTrainers","_this5","_this6","context","router","method","cookies","JSON","stringify","field_dates","field_end_date","field_type","field_description","format","field_location","field_url","field_target_audience","field_learning_outcomes","field_keywords","field_organisers","field_trainers","handleSubmit","activeClass","contextTypes","PropTypes","object","EditResources","react_router","exact","component","FileUpload","es","onDrop","acceptedFiles","reader","FileReader","onabort","onerror","onload","binaryStr","result","getElementById","append","file","readAsArrayBuffer","getRootProps","getInputProps","ResourceCreate","changeDescription","changeTargetAudience","changeLearningOutcomes","changeOrganisers","changeTrainers","token","credentials","containers_FileUpload","CreateResources","AttributeMap","resourceID","frameworkdetails","frameworkUUID","selectedAttributes","resourceDetails","resourcePath","handleSelect","checkedAttributes","attributeIDs","i","attrmap","childItems","getElementsByName","checked","getAttribute","splice","indexOf","is","lists","each","attr","fetchFrameworkDetails","findresponse1","latest_version","detail","fetchCompetencyList","nextProps","nextState","frameworkDetails","frameworkDefs","domainsOptions","attributeTypeOptions","resDetails","selectedAttributesArray","selectedCompetenciesArray","ikey","attribute_type","data-id","ListOfCompetencies","did","defaultChecked","data-test","handleAllCheck","marginLeft","marginBottom","data-uuid","handleAttributeClick","AttrMap","Modal","setAppElement","ItemVersions","modalIsOpen","openModal","closeModal","onAfterOpen","afterOpenModal","onRequestClose","contentLabel","ResourceDetails","frameworks","showModal","selectedFramework","handleOpenModal","handleCloseModal","temp","fetchData","resourcesURL","findresponse3","display","margin","frameworkLiveVersion","check_array","isArray","Resource","date","VersionNotice","mappingBlock","overflow","overlayClassName","text-align","toUpperCase","data-close","containers_AttributeMap","selectedCompetencies","ResDetails","ResourcesList","filterType","filterMapping","userid","archiveHandle","author_id","rid","archivedStatus","field_archived","toLocaleLowerCase","some","attribute_archived","competency_archived","ListOfResources","checkAuthor","author","filterTypeHandle","filterMappingHandle","for","Resources","ResourcesHome","ResourcesHomepage","ChangePassword","handlePasswordChange","old","new1","uid","new","resp","reload","About","FrameworkButton","slice","prevVersion","newVersion","data-equalizer-watch","height","src","logo","alt","data-icon","FrameworkButtons","data-equalizer","framework_button_FrameworkButton","Frameworks","error","framework_buttons_FrameworkButtons","CompetencySettings","competencyUUID","competencyTitle","frameworkList","domainID","editDomain","handleChange","onTextChange","competencyID","setMappingText","versoinManagerURL","selectedDomainID","selectedDomainUUID","field_domain","target_uuid","dataset","selectedIndex","competency_title","domain_id","domain_title","domainOptions","domainArray","d","colSpan","CompetencySettingsRoot","AttributeSettings","attributeID","attributeTypeID","attributeTypeUUID","changeSettings","handleCompetencyChange","handleTypeChange","selectedCompetencyID","field_competency","selectedCompetencyUUID","selectedAttributeTypeID","field_attribute_type","selectedAttributeTypeUUID","attribute_title","attribute_type_id","attribute_type_title","competencyOptions","competencyArray","attributeTypeArray","rowSpan","AttributeSettingsRoot","AttributeDemap","demap","AttributeDemapRoot","loginUrl","logoutUrl","login","_x","_x2","_login","apply","pass","sent","setItem","current_user","csrf_token","logout_token","abrupt","removeItem","Root","handleActiveRequests","hasPendingRequests","detectUserChangesFromOtherTabs","handleLogin","t1","handleLogout","foundationExtendEBI","subcription","build","maxSnack","anchorOrigin","vertical","horizontal","preventDuplicate","masthead_Masthead","Root_ProtectedRoute","condition","ProtectedRoute","objectWithoutProperties","assign","root","ReactDOM","basename","containers_Root","module","exports"],"mappings":"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","file":"static/js/main.5c708e56.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './progress-bar.module.css';\r\n\r\nfunction ProgressBar({ isActive }) {\r\n  return (\r\n    <React.Fragment>\r\n      {isActive && (\r\n        <div\r\n          className={`warning progress ${styles.progress}`}\r\n          role=\"progressbar\"\r\n        >\r\n          <div className={`progress-meter ${styles.meter}`} />\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nProgressBar.defaultProps = {\r\n  isActive: false\r\n};\r\n\r\nProgressBar.propTypes = {\r\n  isActive: PropTypes.bool\r\n};\r\n\r\nexport default ProgressBar;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst $ = window.$;\r\n\r\nclass Navigation extends Component {\r\n  navRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    $(this.navRef.current).foundation();\r\n  }\r\n\r\n  logout = () => {\r\n    const { onLogout } = this.props;\r\n    onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user } = this.props;\r\n\r\n    const frameworkResources = (\r\n      <li>\r\n        <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n          tabIndex=\"0\"\r\n          className=\"dropdown-on-dark-background\"\r\n        >\r\n          Manage Competencies\r\n        </a>\r\n        <ul className=\"menu vertical\">\r\n          <li>\r\n            <Link to=\"/framework/bioexcel/manage/competencies\">BioExcel</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/corbel/manage/competencies\">CORBEL</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/iscb/manage/competencies\">ISCB</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/ritrain/manage/competencies\">RITrain</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/nhs/manage/competencies\">NHS</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/cineca/manage/competencies\">CINECA</Link>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    );\r\n\r\n    const trainingResources = (\r\n      <li>\r\n        <Link to=\"/all-training-resources\">Manage Training Resources</Link>\r\n      </li>\r\n    );\r\n\r\n    const userDropdown = (\r\n      <li>\r\n        <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n          tabIndex=\"0\"\r\n          className=\"dropdown-on-light-background\"\r\n        >\r\n          <i className=\"fas fa-user\" /> Hi {user}\r\n        </a>\r\n        <ul className=\"menu vertical\">\r\n          <li>\r\n            <Link to={'/user/change/password'}>Change password</Link>\r\n          </li>\r\n          <li>\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.logout}\r\n            >\r\n              Logout\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    );\r\n\r\n    return (\r\n      <nav ref={this.navRef}>\r\n        <ul\r\n          className=\"dropdown menu float-left\"\r\n          data-dropdown-menu\r\n          data-description=\"navigational\"\r\n        >\r\n          {roles.includes('framework_manager') && frameworkResources}\r\n          {roles.includes('content_manager') && trainingResources}\r\n        </ul>\r\n        <ul\r\n          className=\"dropdown menu float-right\"\r\n          data-dropdown-menu\r\n          data-description=\"user tasks\"\r\n        >\r\n          {userDropdown}\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass LoginForm extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ [event.currentTarget.name]: event.currentTarget.value });\r\n  };\r\n\r\n  submit = () => {\r\n    const { onSubmit } = this.props;\r\n    const { username, password } = this.state;\r\n    if (username && password) {\r\n      onSubmit(username, password);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n    return (\r\n      <nav>\r\n        {/* The wrapping in an `ul.menu.float-left > li` is necessary for the sticky header to work */}\r\n        <ul className=\"menu float-left small-12\">\r\n          <li className=\"small-12 margin-bottom-large\">\r\n            <label className=\"columns small-4 medium-3 large-2 margin-top-large\">\r\n              <input\r\n                value={username}\r\n                name=\"username\"\r\n                onChange={event => this.onChange(event)}\r\n                type=\"text\"\r\n                autoComplete=\"username\"\r\n                placeholder=\"Username\"\r\n              />\r\n            </label>\r\n            <label className=\"columns small-4 medium-3 large-2 margin-top-large\">\r\n              <input\r\n                value={password}\r\n                name=\"password\"\r\n                onChange={event => this.onChange(event)}\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n                placeholder=\"Password\"\r\n              />\r\n            </label>\r\n            <div className=\"columns small-4 medium-6 large-8 margin-top-large\">\r\n              <button\r\n                className=\"button\"\r\n                type=\"button\"\r\n                onClick={() => this.submit()}\r\n              >\r\n                <i className=\"fa fa-key\" aria-hidden=\"true\" /> Login\r\n              </button>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ProgressBar from '../../../shared/components/progress-bar/progress-bar';\r\nimport Navigation from '../navigation/Navigation';\r\nimport LoginForm from '../login-form/LoginForm';\r\n\r\nclass Masthead extends Component {\r\n  static propTypes = {\r\n    user: PropTypes.string.isRequired,\r\n    roles: PropTypes.string.isRequired,\r\n    onLogin: PropTypes.func.isRequired,\r\n    onLogout: PropTypes.func.isRequired\r\n  };\r\n\r\n  onLogin = (username, password) => {\r\n    this.props.onLogin(username, password);\r\n  };\r\n\r\n  onLogout = () => {\r\n    this.props.onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user, isActive } = this.props;\r\n\r\n    return (\r\n      <div data-sticky-container>\r\n        <header\r\n          id=\"masthead\"\r\n          className=\"masthead\"\r\n          data-sticky\r\n          data-sticky-on=\"large\"\r\n          data-top-anchor=\"main-content-area:top\"\r\n          data-btm-anchor=\"main-content-area:bottom\"\r\n        >\r\n          <div className=\"masthead-inner row\">\r\n            <div className=\"columns medium-12\" id=\"local-title\">\r\n              <h1>\r\n                <Link to=\"/\">Competency Mapper</Link>\r\n              </h1>\r\n            </div>\r\n            {user && roles ? (\r\n              <Navigation roles={roles} user={user} onLogout={this.onLogout} />\r\n            ) : (\r\n              <LoginForm onSubmit={this.onLogin} />\r\n            )}\r\n          </div>\r\n          <ProgressBar isActive={isActive} />\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Masthead;\r\n","import React, { Component } from 'react';\r\n\r\nimport './EditInline.css';\r\n\r\nconst defaultProps = {\r\n  style: {} as Record<string, string | number>,\r\n  text: '',\r\n  change: (newValue: string) => {},\r\n  staticElement: 'div',\r\n  editable: true\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  oriValue: '',\r\n  value: '',\r\n  active: false\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class EditInline extends Component<Props, State> {\r\n  static defaultProps = defaultProps; // No idea why the props are marked as optional (see '!' in the code below)\r\n  readonly state: State = defaultState;\r\n  selfRef = React.createRef<HTMLDivElement>();\r\n  inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  componentDidMount() {\r\n    const { text } = this.props;\r\n    this.setState({ value: text!, oriValue: text! });\r\n    document.addEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props, prevState: State) {\r\n    const { active } = this.state;\r\n    if (active && !prevState.active) {\r\n      // Unable to focus on the input element.\r\n      // this.inputRef.current && this.inputRef.current.focus();\r\n\r\n      // Dirty: The only way I was able to focus on the input element.\r\n      setTimeout(\r\n        () => this.inputRef.current && this.inputRef.current.focus(),\r\n        0\r\n      );\r\n    }\r\n  }\r\n\r\n  toggleActive = (event: MouseEvent) => {\r\n    if (\r\n      this.selfRef.current &&\r\n      this.selfRef.current.contains(event.target as Node)\r\n    ) {\r\n      this.setState({ active: true });\r\n      return;\r\n    }\r\n    this.reset();\r\n  };\r\n\r\n  onChange(value: string) {\r\n    this.setState({ value });\r\n  }\r\n\r\n  reset = () => {\r\n    const { oriValue, active } = this.state;\r\n    if (active) {\r\n      this.setState({ active: false, value: oriValue });\r\n    }\r\n  };\r\n\r\n  submit = () => {\r\n    const { change } = this.props;\r\n    const { value } = this.state;\r\n    change!(value);\r\n    this.setState({ active: false, oriValue: value });\r\n  };\r\n\r\n  render = () => {\r\n    const { style, staticElement, editable } = this.props;\r\n    const { value, active } = this.state;\r\n\r\n    if (!editable) {\r\n      return React.createElement(staticElement!, { style }, value);\r\n    }\r\n\r\n    if (!active) {\r\n      return React.createElement(staticElement!, { style, ref: this.selfRef }, [\r\n        value,\r\n        <i\r\n          key=\"dummy\"\r\n          className=\"icon icon-common icon-edit icon-left-spacer\"\r\n          aria-label=\"edit\"\r\n        />\r\n      ]);\r\n    }\r\n\r\n    return (\r\n      <div className=\"edit-inline-container\" ref={this.selfRef}>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inner-input\"\r\n          value={value}\r\n          onChange={event => this.onChange(event.target.value)}\r\n          ref={this.inputRef}\r\n          // autoFocus={true} // It only works when it is rendered after mounting\r\n        />\r\n        <div className=\"edit-inline-controls\">\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.submit}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-check\"\r\n              aria-label=\"accept changes\"\r\n            />\r\n          </button>\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.reset}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-undo\"\r\n              aria-label=\"undo changes\"\r\n            />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nconst defaultProps = {\r\n  showMappingField: false\r\n};\r\n\r\ntype Props = {\r\n  title: string;\r\n  placeholder: string;\r\n  options: Record<'description' | 'uuid', string>[];\r\n  onCreate(newValue: string, uuid: string, mapping: string): any;\r\n} & Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  description: '',\r\n  uuid: '',\r\n  mapping: ''\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class SimpleForm extends Component<Props, State> {\r\n  static defaultProps = defaultProps;\r\n  readonly state = defaultState;\r\n\r\n  componentDidMount() {\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  setDefaultOption() {\r\n    const { options } = this.props;\r\n    if (options.length) {\r\n      const { uuid } = options[0];\r\n      this.setState({ uuid });\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    this.setState(defaultState);\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  onChange = (event: React.FormEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    event.preventDefault();\r\n    const { value } = event.currentTarget;\r\n    const name = event.currentTarget.name;\r\n    // https://github.com/Microsoft/TypeScript/issues/13948\r\n    if (name === 'uuid') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'description') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'mapping') {\r\n      this.setState({ [name]: value });\r\n    }\r\n  };\r\n\r\n  onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const { onCreate } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    if (description.trim() && uuid) {\r\n      onCreate(description, uuid, mapping);\r\n      this.reset();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, placeholder, options, showMappingField } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    const selectOptions = options.map(({ description, uuid }) => (\r\n      <option key={uuid} value={uuid}>\r\n        {description}\r\n      </option>\r\n    ));\r\n\r\n    return (\r\n      <form onSubmit={this.onSubmit} className=\"callout\">\r\n        <h4>{title}</h4>\r\n        <div className=\"row\">\r\n          <div className=\"column large-7\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder={placeholder}\r\n              name=\"description\"\r\n              value={description}\r\n              required\r\n              onChange={this.onChange}\r\n            />\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <select name=\"uuid\" value={uuid} required onChange={this.onChange}>\r\n              {selectOptions}\r\n            </select>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <input type=\"submit\" className=\"button\" value=\"Create\" />\r\n          </div>\r\n          {showMappingField ? (\r\n            <div className=\"column\">\r\n              <label>\r\n                Maps to competency/attribute from other framework\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Framework (version), competency or attribute\"\r\n                  name=\"mapping\"\r\n                  value={mapping}\r\n                  onChange={this.onChange}\r\n                />\r\n              </label>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst defaultProps = {\r\n  message: 'Sorry, there was a problem when fetching the data!',\r\n  style: {} as Record<string, string | number>\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nexport const ErrorLoading: React.FC<Props> = ({ message, style }) => {\r\n  return (\r\n    <div className=\"margin-top-large callout alert\" style={style}>\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nErrorLoading.defaultProps = defaultProps;\r\n\r\nexport default ErrorLoading;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\nimport Parser from 'html-react-parser';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  versions: Version[];\r\n  framework: string;\r\n  style: string;\r\n};\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: '50%',\r\n    left: '50%',\r\n    right: 'auto',\r\n    bottom: 'auto',\r\n    marginRight: '-50%',\r\n    transform: 'translate(-50%, -50%)'\r\n  }\r\n};\r\n\r\nexport const FrameworkVersion: React.FC<Props> = ({ versions, framework }) => {\r\n  const [showNotes, setShowNotes] = useState(false);\r\n  const [notes, setNotes] = useState('');\r\n\r\n  let versionNumber = '';\r\n\r\n  const versionItems = versions\r\n    .filter(version => version.number !== 'draft')\r\n    .map(version => (\r\n      <li key={version.id}>\r\n        <Link to={`/framework/${framework}/${version.number}`}>\r\n          {version.number}\r\n        </Link>{' '}\r\n        <button\r\n          className=\"anchor-like\"\r\n          onClick={() => {\r\n            setNotes('Version: ' + version.number + version.release_notes);\r\n            setShowNotes(true);\r\n          }}\r\n        >\r\n          (release notes)\r\n        </button>\r\n      </li>\r\n    ));\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={showNotes} style={customStyles}>\r\n        <h4>Release notes for {framework} </h4>\r\n        {Parser(notes)}\r\n        {versionItems}\r\n        <div className=\"padding-top-large\">\r\n          <button\r\n            className=\"button\"\r\n            onClick={() => {\r\n              setNotes('');\r\n              setShowNotes(false);\r\n            }}\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n      <div className=\"callout\">\r\n        <h5>Framework versions</h5>\r\n        {versions.length === 0 ? (\r\n          'No previous versions'\r\n        ) : (\r\n          <ul>{versionItems}</ul>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FrameworkVersion;\r\n","class HeadersService {\r\n  static instance;\r\n\r\n  constructor() {\r\n    if (HeadersService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    HeadersService.instance = this;\r\n  }\r\n\r\n  get(type = 'hal+json') {\r\n    const csfrToken = window.localStorage.getItem('csrf_token');\r\n    if (type === 'json') {\r\n      return {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': csfrToken,\r\n        Authorization: 'Basic'\r\n      };\r\n    }\r\n\r\n    return {\r\n      Accept: 'application/hal+json',\r\n      'Content-Type': 'application/hal+json',\r\n      'X-CSRF-Token': csfrToken,\r\n      Authorization: 'Basic'\r\n    };\r\n  }\r\n}\r\n\r\nexport default HeadersService;\r\n","import Headers from './headers';\r\nimport axios from 'axios';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\naxios.defaults.baseURL = apiUrl;\r\n\r\nclass HttpService {\r\n  static instance;\r\n  headers = new Headers();\r\n\r\n  constructor() {\r\n    if (HttpService.instance) {\r\n      return HttpService.instance;\r\n    }\r\n\r\n    HttpService.instance = this;\r\n  }\r\n\r\n  get(url, credentialType = '') {\r\n    if (credentialType) {\r\n      return axios.get(url, {\r\n        headers: this.headers.get(credentialType),\r\n        withCredentials: true\r\n      });\r\n    }\r\n    return axios.get(url);\r\n  }\r\n\r\n  post(url, body, option = 'hal+json') {\r\n    return axios.post(url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n\r\n  patch(url, body, option = 'hal+json') {\r\n    return axios.patch(url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","import { apiUrl } from '../http/http';\r\n\r\nclass BodyService {\r\n  static createCompetency({\r\n    description,\r\n    domainId,\r\n    domainUuid,\r\n    mapping = '',\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/competency`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'competency'\r\n        }\r\n      ],\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static createAttribute({\r\n    description,\r\n    attributeTypeId,\r\n    attributeTypeUuid,\r\n    competencyId,\r\n    competencyUuid,\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/attribute`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'attribute'\r\n        }\r\n      ],\r\n\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static mutateCompetency(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateCompetencyPosition(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateAttribute(key, value) {\r\n    return BodyService.mutate(key, value, 'attribute');\r\n  }\r\n\r\n  static mutate(key, value, target) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/${target}`\r\n        }\r\n      },\r\n      [key]: [\r\n        {\r\n          value: value\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: target\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static publishFramework(framework, version, releaseNotes) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: releaseNotes\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: version\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static createDraftFramework(framework) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: 'draft'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static toggleArchivingVersionedNode(framework, nodeId) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: nodeId\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static updateReleaseNotes(notes) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href:\r\n            //'https://dev-competency-mapper.pantheonsite.io/rest/type/taxonomy_term/version'\r\n            `${apiUrl}/rest/type/taxonomy_term/version`\r\n        }\r\n      },\r\n      vid: [\r\n        {\r\n          target_id: 'version'\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: notes\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  // Change domain service\r\n\r\n  static changeDomain(competencyId, domainId, domainUuid, mapping) {\r\n    return {\r\n      _links: {\r\n        self: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/competency`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n        }\r\n      },\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      type: {\r\n        target_id: 'competency'\r\n      },\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  // Change competency service\r\n\r\n  static changeAttributeSettings(\r\n    attribuiteId,\r\n    competencyId,\r\n    competencyUuid,\r\n    attributeTypeId,\r\n    attributeTypeUuid\r\n  ) {\r\n    return {\r\n      _links: {\r\n        self: {\r\n          href: `${apiUrl}/node/${attribuiteId}?_format=hal_json`\r\n        },\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/attribute`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n        }\r\n      },\r\n      type: {\r\n        target_id: 'attribute'\r\n      },\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nexport default BodyService;\r\n","import HttpService from '../http/http';\r\nimport Body from './body';\r\n\r\nclass CompetencyService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CompetencyService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CompetencyService.instance = this;\r\n  }\r\n\r\n  async getFramework(framework) {\r\n    const response = await this.http.get(\r\n      `/api/v1/framework/${framework}?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedDraftFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/edit?_format=json&timestamp=${Date.now()}`,\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/${version}?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getAllFrameworks() {\r\n    const response = await this.http.get(`/api/v1/framework?_format=json`);\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getAllVersionedFrameworks() {\r\n    const response = await this.http.get(\r\n      `/api/version_manager?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createAttribute(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createAttribute(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async createCompetency(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createCompetency(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetency(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetency(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetencyPosition(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetencyPosition(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async toggleArchivingVersionedNode(framework, nodeId) {\r\n    const response = await this.http.patch(\r\n      `/api/${framework}/edit?_format=json`,\r\n      Body.toggleArchivingVersionedNode(framework, nodeId),\r\n      'json'\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttribute(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n\r\n  async patchAttributePosition(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n\r\n\r\n  async publishFramework(framework, version, releaseNotes) {\r\n    const response = await this.http.patch(\r\n      '/api/version_manager?_format=json',\r\n      Body.publishFramework(framework, version, releaseNotes),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createDraftFramework(framework) {\r\n    const response = await this.http.post(\r\n      '/api/version_manager?_format=json',\r\n      Body.createDraftFramework(framework),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async updateReleaseNotes(notes, versionId) {\r\n    const response = await this.http.patch(\r\n      `/taxonomy/term/${versionId}?_format=hal_json`,\r\n      Body.updateReleaseNotes(notes)\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async changeDomain(competencyId, domainId, domainUuid, mapping) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.changeDomain(competencyId, domainId, domainUuid, mapping)\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async changeAttributeSettings(\r\n    attribiuteId,\r\n    competencyId,\r\n    competencyUuid,\r\n    attributeTypeId,\r\n    attributeTypeUuid\r\n  ) {\r\n    const response = await this.http.patch(\r\n      `/node/${attribiuteId}?_format=hal_json`,\r\n      Body.changeAttributeSettings(\r\n        attribiuteId,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid\r\n      )\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async demap(resource, items) {\r\n    const response = await this.http.get(\r\n      `/api/mapping?_format=hal_json&resource=` +\r\n        resource +\r\n        `&items=` +\r\n        items +\r\n        `&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async attrmap(resource, attributes) {\r\n    const response = await this.http.get(\r\n      `/api/mapping?_format=hal_json&resource=` +\r\n        resource +\r\n        `&attributes=` +\r\n        attributes +\r\n        `&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CompetencyService;\r\n","class ActiveRequestsService {\r\n  static instance;\r\n  counter = 0;\r\n  callbacks = [];\r\n\r\n  get isActive() {\r\n    return !!this.counter;\r\n  }\r\n\r\n  constructor() {\r\n    if (ActiveRequestsService.instance) {\r\n      return ActiveRequestsService.instance;\r\n    }\r\n\r\n    ActiveRequestsService.instance = this;\r\n  }\r\n\r\n  addEventListener(fn) {\r\n    return this.callbacks.push(fn);\r\n  }\r\n\r\n  removeEventListener(index) {\r\n    return delete this.callbacks[index - 1];\r\n  }\r\n\r\n  startRequest() {\r\n    if (this.counter === 0) {\r\n      this.callbacks.forEach(fn => fn && fn(true));\r\n    }\r\n    ++this.counter;\r\n  }\r\n\r\n  finishRequest() {\r\n    if (this.counter === 1) {\r\n      this.callbacks.forEach(fn => fn && fn(false));\r\n    }\r\n\r\n    if (this.counter > 0) {\r\n      --this.counter;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ActiveRequestsService;\r\n","// In modern browser (es2018), instead of `reduce` it is possible to call `flat`\r\nexport const safeFlat = array =>\r\n  Array.prototype.flat\r\n    ? array.flat()\r\n    : array.reduce((acc, cur) => [...acc, ...cur], []);\r\n\r\nconst tagsReg = new RegExp('</?.+?/?>', 'g');\r\nconst nbspReg = /&nbsp;/g;\r\n\r\nexport const removeHtmlTags = (htmlString, replaceBy = '') =>\r\n  htmlString.replace(tagsReg, replaceBy).replace(nbspReg, ' ');\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat } from '../services/util/util';\r\n\r\nclass ManageAttributes extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    // framework level\r\n    framework: this.props.match.params.framework,\r\n    frameworkName: '',\r\n    frameworkVersion: '',\r\n    frameworStatus: '',\r\n    attributeTypes: [], // defined at framework level\r\n    versions: [],\r\n\r\n    // domain level\r\n    domainId: '',\r\n    domainName: '',\r\n\r\n    // competency level\r\n    competencyId: this.props.match.params.cid,\r\n    competencyUuid: '',\r\n    competencyName: '',\r\n    competencyData: [],\r\n\r\n    path: this.props.location.pathname.split('/'),\r\n\r\n    loadingError: false,\r\n    editable: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.scroll(0, 0);\r\n    this.loadData();\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions() {\r\n    const { framework } = this.state;\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const attributeTypes = currentFramework[0].attribute_types.map(\r\n        attribute => ({ description: attribute.title, uuid: attribute.uuid })\r\n      );\r\n      this.setState({\r\n        versions: currentFramework[0].versions.reverse(),\r\n        attributeTypes\r\n      });\r\n    }\r\n  }\r\n\r\n  async fetchFramework() {\r\n    const { framework, versions, competencyId } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    const competencyMatch = this.filterByCompetencyId(\r\n      frameworkData,\r\n      competencyId\r\n    );\r\n\r\n    if (competencyMatch.length) {\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        domainName: competencyMatch[0].domainTitle,\r\n        domainId: competencyMatch[0].domainId,\r\n        competencyUuid: competencyMatch[0].uuid,\r\n        competencyName: competencyMatch[0].title,\r\n        competencyData: competencyMatch[0],\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  filterByCompetencyId(data, id) {\r\n    return safeFlat(\r\n      data.map(item =>\r\n        safeFlat(\r\n          item.domains.map(domain =>\r\n            domain.competencies\r\n              .filter(competency => competency.id === id)\r\n              .map(competency => {\r\n                competency.domainTitle = domain.title;\r\n                competency.domainId = domain.nid;\r\n                return competency;\r\n              })\r\n          )\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  createAttribute = async (description, attributeTypeUuid, mapping) => {\r\n    const {\r\n      competencyId,\r\n      competencyUuid,\r\n      attributeTypes,\r\n      versions\r\n    } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const attributeTypeId = attributeTypes.find(\r\n        attribute => attribute.uuid === attributeTypeUuid\r\n      ).id;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createAttribute({\r\n        description,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editAttribute(attributeId, title) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(attributeId, 'title', title);\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async editAttributePosition(attributeId, position) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttributePosition(attributeId, 'field_number', position);\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(attributeId, isArchived) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(\r\n        attributeId,\r\n        'field_archived',\r\n        isArchived === '1' ? false : true\r\n      );\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  getAttributeRows(attributeType) {\r\n    const { competencyData, editable } = this.state;\r\n\r\n    return competencyData.attributes\r\n      .filter(attribute => attribute.type === attributeType.description)\r\n      .map(attribute => {\r\n        if (editable) {\r\n          return (\r\n            <tr key={attribute.uuid}>\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.title}\r\n                  change={newValue =>\r\n                    this.editAttribute(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.field_number}\r\n                  change={newValue =>\r\n                    this.editAttributePosition(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n\r\n              <td>\r\n                <button\r\n                  className=\"cursor\"\r\n                  onClick={() =>\r\n                    this.toggleArchive(attribute.id, attribute.archived)\r\n                  }\r\n                >\r\n                  {attribute.archived === '1' ? (\r\n                    <span className=\"fas fa-toggle-on\">\r\n                      <span>Archived</span>\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"fas fa-toggle-off\" />\r\n                  )}\r\n                </button>\r\n              </td>\r\n              <td>\r\n                <Link\r\n                  to={`/framework/${this.state.framework}/competency/${\r\n                    this.state.competencyId\r\n                  }/attribute/${attribute.id}/settings`}\r\n                >\r\n                  <i class=\"fas fa-cog\" />\r\n                </Link>\r\n              </td>\r\n            </tr>\r\n          );\r\n        }\r\n\r\n        if (attribute.archived === '1') {\r\n          return null;\r\n        }\r\n        return (\r\n          <tr key={attribute.uuid}>\r\n            <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={attribute.title}\r\n                change={newValue => this.editAttribute(attribute.id, newValue)}\r\n                editable={editable}\r\n              />\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n  }\r\n\r\n  getAttributeList() {\r\n    const { attributeTypes, editable } = this.state;\r\n    return attributeTypes.map(attributeType => (\r\n      <React.Fragment key={attributeType.uuid}>\r\n        <tr className=\"secondary-background-important white-color\">\r\n          <td>\r\n            <strong>\r\n              <em>{attributeType.description}</em>\r\n            </strong>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Position</td>}\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          {editable && <td className=\"small-1\">Settings</td>}\r\n        </tr>\r\n        {this.getAttributeRows(attributeType)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      attributeTypes,\r\n      versions,\r\n      domainId,\r\n      domainName,\r\n      competencyName,\r\n      competencyData,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (competencyData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage attributes</h2>\r\n        <h4>\r\n          <Link to={`/framework/${framework}/manage/competencies`}>\r\n            {frameworkName}\r\n          </Link>\r\n          {' / '}\r\n          <Link to={`/framework/${framework}/manage/competencies/${domainId}`}>\r\n            {domainName}\r\n          </Link>\r\n          {' / '}\r\n          {competencyName}\r\n        </h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new attribute\"\r\n            placeholder=\"Attribute description\"\r\n            options={attributeTypes}\r\n            onCreate={this.createAttribute}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getAttributeList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageAttributes);\r\n","import React, { FC, useState } from 'react';\r\n\r\nimport Modal from 'react-modal';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  release(version: string, notes: string): void;\r\n  updateNotes(notes: string): void;\r\n  createDraft(): void;\r\n  versions: Version[];\r\n  editable: false;\r\n};\r\n\r\nexport const VersionControls: React.FC<Props> = ({\r\n  release,\r\n  updateNotes,\r\n  createDraft,\r\n  versions,\r\n  editable\r\n}) => {\r\n  const liveVersion = versions.reduce((prev, curr) => {\r\n    if (curr.status === 'live') {\r\n      return curr.number;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const originalNotes = versions.reduce((prev, curr) => {\r\n    if (curr.number === 'draft') {\r\n      return curr.release_notes;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const [version, setVersion] = useState('');\r\n  const [notes, setNotes] = useState(originalNotes);\r\n  const [pressedRelease, setPressedRelease] = useState(false);\r\n  const [pressedNotes, setPressedNotes] = useState(false);\r\n\r\n  const reset = () => {\r\n    setVersion('');\r\n    setPressedRelease(false);\r\n  };\r\n\r\n  const publish = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const cleanNotes = notes.trim();\r\n    if (pressedRelease && version && cleanNotes) {\r\n      release(version, cleanNotes);\r\n      reset();\r\n    }\r\n  };\r\n\r\n  if (editable) {\r\n    return (\r\n      <div>\r\n        <Modal isOpen={pressedNotes}>\r\n          <CKEditor\r\n            content={notes}\r\n            events={{\r\n              change: (event: any) => setNotes(event.editor.getData())\r\n            }}\r\n          />\r\n          <div className=\"padding-top-large\">\r\n            <span className=\"padding-right-small\">\r\n              <button\r\n                className=\"button\"\r\n                onClick={() => {\r\n                  setNotes(originalNotes);\r\n                  setPressedNotes(false);\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </span>\r\n            <button\r\n              className=\"button\"\r\n              onClick={() => {\r\n                updateNotes(notes);\r\n                setPressedNotes(false);\r\n              }}\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n        <Modal isOpen={pressedRelease}>\r\n          <form onSubmit={publish}>\r\n            <label>\r\n              Version{' '}\r\n              {liveVersion\r\n                ? `(live version ${liveVersion})`\r\n                : '(no live version)'}\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"1.0.0\"\r\n                value={version}\r\n                required\r\n                onChange={event => setVersion(event.currentTarget.value.trim())}\r\n              />\r\n            </label>\r\n            <CKEditor\r\n              content={notes}\r\n              events={{\r\n                change: (event: any) => setNotes(event.editor.getData())\r\n              }}\r\n            />\r\n            <div className=\"padding-top-large\">\r\n              <span className=\"padding-right-small\">\r\n                <button className=\"button\" onClick={reset}>\r\n                  Cancel\r\n                </button>\r\n              </span>\r\n              <button className=\"button\" type=\"submit\">\r\n                Publish\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </Modal>\r\n        <span className=\"padding-right-small\">\r\n          <button className=\"button\" onClick={() => setPressedRelease(true)}>\r\n            Release new version\r\n          </button>\r\n        </span>\r\n        <button className=\"button\" onClick={() => setPressedNotes(true)}>\r\n          Update release notes\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <span className=\"padding-right-small\">\r\n        <button className=\"button\" onClick={() => createDraft()}>\r\n          Create draft\r\n        </button>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VersionControls;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\nimport VersionControls from '../containers/version-controls/VersionControls';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nclass ManageCompetencies extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkName: '',\r\n    frameworkData: [],\r\n    frameworkVersion: '',\r\n    frameworkVersionId: '',\r\n    frameworkStatus: '',\r\n    competencyTypes: [],\r\n    versions: [],\r\n    loadingError: false,\r\n    editable: false\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework } = props.match.params;\r\n    if (framework !== state.framework) {\r\n      return {\r\n        framework,\r\n        frameworkData: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, domainId } = this.props.match.params;\r\n    await this.loadData(framework);\r\n\r\n    if (domainId) {\r\n      setTimeout(() => {\r\n        const ref = this.refs[domainId];\r\n        if (ref) {\r\n          ref.scrollIntoView();\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkData, loadingError } = this.state;\r\n    if (framework !== prevState.framework) {\r\n      if (frameworkData.length === 0 && !loadingError) {\r\n        this.loadData(framework);\r\n      }\r\n    }\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework) {\r\n    const { versions } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      this.setState({ frameworkVersionId: draftVersion[0].id });\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    if (frameworkData.length) {\r\n      const competencyTypes = frameworkData[0].domains.map(domain => ({\r\n        description: domain.title,\r\n        uuid: domain.uuid\r\n      }));\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkData,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        competencyTypes,\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  createCompetency = async (description, domainUuid, mapping) => {\r\n    const { framework, frameworkData, versions } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const domainId = frameworkData[0].domains.find(\r\n        domain => domain.uuid === domainUuid\r\n      ).nid;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createCompetency({\r\n        description,\r\n        domainId,\r\n        domainUuid,\r\n        mapping,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editCompetency(cid, title) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetency(cid, 'title', title);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n\r\n  async editCompetencyPosition(cid, position) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetencyPosition(cid, 'field_number', position);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(cid, isArchived) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.toggleArchivingVersionedNode(framework, cid);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  releaseNewVersion = async (version, notes) => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.publishFramework(framework, version, notes);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  updateNotes = async notes => {\r\n    const { framework, frameworkVersionId } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.updateReleaseNotes(\r\n        notes,\r\n        frameworkVersionId\r\n      );\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  createDraft = async () => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.createDraftFramework(framework);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  getCompetencyList() {\r\n    const { frameworkData, editable } = this.state;\r\n    return frameworkData[0].domains.map(domain => (\r\n      <React.Fragment key={domain.nid}>\r\n        <tr\r\n          className=\"secondary-background-important white-color\"\r\n          ref={domain.nid}\r\n        >\r\n          <td>\r\n            <h4>{domain.title}</h4>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Position</td>}\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          <td>Attributes</td>\r\n          {editable && <td className=\"small-1\">Settings</td>}\r\n\r\n        </tr>\r\n        {this.getCompetencyRows(domain.competencies)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  getCompetencyRows(competencies) {\r\n    const { framework, editable } = this.state;\r\n    return competencies.map(competency => {\r\n      if (editable) {\r\n        return (\r\n          <tr key={competency.id}>\r\n            <td className={competency.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={competency.title}\r\n                change={newValue =>\r\n                  this.editCompetency(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n            <td>\r\n              <InlineEdit\r\n                text={competency.position}\r\n                change={newValue =>\r\n                  this.editCompetencyPosition(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n\r\n            <td>\r\n              <button\r\n                className=\"cursor\"\r\n                onClick={this.toggleArchive.bind(\r\n                  this,\r\n                  competency.id,\r\n                  competency.archived\r\n                )}\r\n              >\r\n                {competency.archived === '1' ? (\r\n                  <span className=\"fas fa-toggle-on\">\r\n                    <span>Archived</span>\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"fas fa-toggle-off\" />\r\n                )}\r\n              </button>\r\n            </td>\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/manage/competencies/${\r\n                  competency.id\r\n                }/manage-attributes`}\r\n              >\r\n                <i className=\"fas fa-sitemap\" />\r\n              </Link>\r\n            </td>\r\n\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/competency/${\r\n                  competency.id\r\n                }/settings`}\r\n              >\r\n                <i class=\"fas fa-cog\" />\r\n              </Link>\r\n            </td>\r\n          </tr>\r\n        );\r\n      }\r\n\r\n      if (competency.archived === '1') {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <tr key={competency.id}>\r\n          <td>\r\n            <InlineEdit\r\n              text={competency.title}\r\n              change={newValue => this.editCompetency(competency.id, newValue)}\r\n              editable={editable}\r\n            />\r\n          </td>\r\n          <td>\r\n            <Link\r\n              to={`/framework/${framework}/manage/competencies/${\r\n                competency.id\r\n              }/manage-attributes`}\r\n            >\r\n              <i className=\"fas fa-sitemap\" />\r\n            </Link>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkData,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      competencyTypes,\r\n      versions,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (frameworkData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage framework</h2>\r\n        <h4>{frameworkName}</h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        <VersionControls\r\n          editable={editable}\r\n          createDraft={this.createDraft}\r\n          versions={versions}\r\n          release={this.releaseNewVersion}\r\n          updateNotes={this.updateNotes}\r\n        />\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new competency\"\r\n            placeholder=\"Competency description\"\r\n            options={competencyTypes}\r\n            onCreate={this.createCompetency}\r\n            showMappingField={true}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getCompetencyList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageCompetencies);\r\n","import HttpService from '../http/http';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nclass CoursesService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CoursesService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CoursesService.instance = this;\r\n  }\r\n\r\n  async getCourses() {\r\n    const response = await this.http.get(\r\n      /*`${apiUrl}/api/v1/training-resources/all?_format=json`*/\r\n      `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CoursesService;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport CoursesService from '../services/courses/courses';\r\n\r\nclass CompetencyDetails extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  coursesService = new CoursesService();\r\n\r\n  state = {\r\n    framework: this.props.match.params.framework,\r\n    version: this.props.location.pathname.split('/'),\r\n    frameworkData: [],\r\n    competencyId: this.props.match.params.cid,\r\n    attributeDefs: [],\r\n    resources: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.getFramework(),\r\n        this.getAttributes(),\r\n        this.getResources()\r\n      ]);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async getFramework() {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      version[3]\r\n    );\r\n\r\n    this.setState({\r\n      frameworkData\r\n    });\r\n  }\r\n\r\n  async getAttributes() {\r\n    const allFrameworks = await this.competencyService.getAllFrameworks();\r\n    const { framework } = this.state;\r\n    const frameworkMatch = allFrameworks.filter(\r\n      item => item.name.toLowerCase() === framework\r\n    );\r\n    if (frameworkMatch.length) {\r\n      const attributeDefs = frameworkMatch[0].attribute_types.map(\r\n        attribute => attribute.title\r\n      );\r\n      this.setState({ attributeDefs });\r\n    }\r\n  }\r\n\r\n  async getResources() {\r\n    try {\r\n      const allResources = await this.coursesService.getCourses();\r\n      const resources = allResources.filter(\r\n        resource =>\r\n          !!resource.competency_profile.find(\r\n            profile =>\r\n              // !!profile.domains.find(\r\n              //   domain =>\r\n              //     !!domain.competencies.find(\r\n              //       competency => competency.id === this.state.competencyId\r\n              //     )\r\n              // )\r\n\r\n              profile.competency_id === this.state.competencyId\r\n          )\r\n      );\r\n\r\n      this.setState({ resources });\r\n      /*const resources = [{\"id\":1, \"title\":this.state.version[3]}];*/\r\n      this.setState({ resources });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to retrieve training resources', {\r\n        variant: 'error'\r\n      });\r\n    }\r\n  }\r\n\r\n  resourceBlock() {\r\n    const { resources } = this.state;\r\n    return resources.map(resource => (\r\n      <li key={resource.id}>\r\n        <Link to={`/training-resources/${resource.id}`}>{resource.title}</Link>\r\n      </li>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      competencyId,\r\n      frameworkData,\r\n      attributeDefs,\r\n      resources\r\n    } = this.state;\r\n\r\n    const competencies = [];\r\n    console.log(this.state.competencyId);\r\n    frameworkData.forEach(item =>\r\n      item.domains.forEach(domain =>\r\n        domain.competencies.forEach(competency => {\r\n          if (competency.id === competencyId) {\r\n            competencies.push({\r\n              ...competency,\r\n              framework: item.title,\r\n              domain: domain.title\r\n            });\r\n          }\r\n        })\r\n      )\r\n    );\r\n\r\n    const competencyDetails = competencies.map(competency => (\r\n      <div key={competency.id}>\r\n        <div className=\"row\">\r\n          <div className=\"column large-12\">\r\n            <h4>\r\n              {' '}\r\n              {competency.framework} / {competency.domain}\r\n            </h4>\r\n            <h4>{competency.title}</h4>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"column large-8\">\r\n            <ul>\r\n              {attributeDefs.map(def => {\r\n                return (\r\n                  <div key={def}>\r\n                    <div className=\"margin-top-medium\">\r\n                      {' '}\r\n                      <strong>\r\n                        <em>{def}</em>\r\n                      </strong>\r\n                    </div>\r\n                    {competency.attributes.map(attribute => {\r\n                      if (attribute.type === def) {\r\n                        return <li key={attribute.id}>{attribute.title} </li>;\r\n                      }\r\n                      return null;\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n          <div className=\"column large-4\">\r\n            <div className=\"callout notice industry-background white-color\">\r\n              <p>Competency derived from:</p>\r\n              <p>\r\n                {' '}\r\n                {competency.mapped_other_competency\r\n                  ? competency.mapped_other_competency\r\n                  : 'No data available'}{' '}\r\n              </p>\r\n            </div>\r\n\r\n            {resources.length === 0 ? null : (\r\n              <div className=\"callout notice training-background white-color\">\r\n                <p>Training resources mapped to this competency</p>\r\n                <ul>{this.resourceBlock()}</ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"column large-12\">\r\n          <h3>Competency details</h3>\r\n          {competencyDetails}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(CompetencyDetails);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Collapsible from 'react-collapsible';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { groupBy } from 'lodash-es';\r\nimport './CompetencyList.css';\r\n\r\nfunction CompetencyList({ index, framework, competency, disable, version }) {\r\n  const attributesGrouped = groupBy(competency.attributes, 'type');\r\n  const attributesTypes = Object.keys(attributesGrouped);\r\n  const attributes = attributesTypes.map(type => {\r\n    const attributes = attributesGrouped[type].map(attribute => (\r\n      <li key={attribute.id}>{attribute.title}</li>\r\n    ));\r\n    return (\r\n      <div key={type}>\r\n        <em>{type}</em>\r\n        <ul>{attributes}</ul>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  if (competency.archived === '1') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        <Collapsible\r\n          trigger={\r\n            <div className=\"open-close-title\">\r\n              <span>{competency.title}</span>\r\n              <span className=\"icon icon-common icon-plus float-right\">\r\n                <p className=\"show-for-sr\">show more</p>\r\n              </span>\r\n            </div>\r\n          }\r\n          triggerWhenOpen={\r\n            <div className=\"open-close-title\">\r\n              <span>{competency.title}</span>\r\n              <span className=\"icon icon-common icon-minus float-right\">\r\n                <p className=\"show-for-sr\">show less</p>\r\n              </span>\r\n            </div>\r\n          }\r\n        >\r\n          <div className=\"padding-left-large padding-top-large\">\r\n            <Link\r\n              to={`/framework/${framework}/${version}/competency/details/${\r\n                competency.id\r\n              }`}\r\n            >\r\n              <span className=\"float-right\">\r\n                <i className=\"icon icon-spacer icon-common icon-info\" />\r\n                More details\r\n              </span>\r\n            </Link>\r\n            {attributes}\r\n          </div>\r\n        </Collapsible>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nCompetencyList.defaultProps = {\r\n  parentIndex: 0,\r\n  index: 0,\r\n  disable: true\r\n};\r\n\r\nCompetencyList.propTypes = {\r\n  parentIndex: PropTypes.number,\r\n  index: PropTypes.number,\r\n  framework: PropTypes.string,\r\n  competency: PropTypes.shape({\r\n    title: PropTypes.string\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CompetencyList from '../competency-list/CompetencyList';\r\n\r\nfunction DomainList({ index, framework, domain, disable, version }) {\r\n  const competencies = domain.competencies.map((competency, childIndex) => (\r\n    <CompetencyList\r\n      key={competency.id}\r\n      index={childIndex}\r\n      framework={framework}\r\n      competency={competency}\r\n      disable={disable}\r\n      version={version}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <tbody>\r\n      <tr className=\"white-color secondary-background\">\r\n        <td>\r\n          <h4> {domain.title}</h4>\r\n        </td>\r\n      </tr>\r\n      {competencies}\r\n    </tbody>\r\n  );\r\n}\r\n\r\nDomainList.defaultProps = {\r\n  domain: { title: '', competencies: [] },\r\n  disable: true\r\n};\r\n\r\nDomainList.propTypes = {\r\n  framework: PropTypes.string,\r\n  domain: PropTypes.shape({\r\n    title: PropTypes.string,\r\n    competencies: PropTypes.array\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default DomainList;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport ErrorLoading from '../../components/error-loading/ErrorLoading';\r\n\r\nimport ActiveRequestsService from '../../services/active-requests/active-requests';\r\nimport CoursesService from '../../services/courses/courses';\r\nimport { safeFlat } from '../../services/util/util';\r\n\r\nclass Courses extends Component {\r\n  static propTypes = {\r\n    framework: PropTypes.string,\r\n    version: PropTypes.string\r\n  };\r\n\r\n  state = {\r\n    courses: [],\r\n    filteredCourses: [],\r\n    filter: '',\r\n    loadingError: false\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.framework = props.framework;\r\n    this.state.version = props.version;\r\n  }\r\n\r\n  coursesService = new CoursesService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const allCourses = await this.coursesService.getCourses();\r\n      const courses = this.filterCourses(allCourses);\r\n      this.setState({ courses, filteredCourses: courses });\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  filterCourses(allCourses) {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const filteredCourses = [];\r\n    allCourses.forEach(course => {\r\n      if (course.archived === '1') {\r\n        return;\r\n      }\r\n\r\n      const filteredProfiles = course.competency_profile.filter(\r\n        //profile => (profile.title || '').toLowerCase() === framework\r\n        profile => (profile.framework_label || '').toLowerCase() === framework\r\n      );\r\n\r\n      if (filteredProfiles.length === 0) {\r\n        return;\r\n      }\r\n\r\n      const modifiedCourse = {\r\n        ...course,\r\n        competencies: safeFlat(\r\n          filteredProfiles.map(\r\n            profile =>\r\n              // safeFlat(\r\n              //   profile.domains.map(domain =>\r\n              //     domain.competencies.map(competency => ({\r\n              //       ...competency,\r\n              //       domain: domain.title\r\n              //     }))\r\n              //   )\r\n              // )\r\n              profile\r\n          )\r\n        )\r\n      };\r\n\r\n      filteredCourses.push(modifiedCourse);\r\n    });\r\n    //console.log(filteredCourses);\r\n    return filteredCourses;\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { courses } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredCourses = courses.filter(course => term.test(course.title));\r\n    this.setState({ filteredCourses, filter });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      filteredCourses,\r\n      framework,\r\n      filter,\r\n      loadingError,\r\n      version\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    //let unique = [...new Set(course.competencies.map(item => item.id))];\r\n\r\n    let duplicates = [];\r\n\r\n    const competencyList = competencies =>\r\n      competencies.map(competency => (\r\n        <li key={competency.id}>\r\n          <Link\r\n            to={`/framework/${framework}/${version}/competency/details/${\r\n              competency.competency_id\r\n            }`}\r\n          >\r\n            {competency.competency_label}\r\n          </Link>\r\n        </li>\r\n      ));\r\n\r\n    const resources = filteredCourses.map(course => (\r\n      <tr key={course.id}>\r\n        <td>\r\n          <Link to={`/training-resources/${course.id}`}>{course.title}</Link>\r\n        </td>\r\n        <td>{course.type}</td>\r\n        <td>\r\n          <ul>{competencyList(course.competencies)} </ul>\r\n        </td>\r\n      </tr>\r\n    ));\r\n\r\n    return (\r\n      <>\r\n        <input\r\n          type=\"search\"\r\n          // className=\"clearable\" // It doesn't work correctly\r\n          value={filter}\r\n          onChange={event => this.onFilter(event.target.value)}\r\n          placeholder=\"Filter resources\"\r\n        />\r\n        <table>\r\n          <tbody>{resources}</tbody>\r\n        </table>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Courses;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport DomainList from '../components/domain-list/DomainList';\r\nimport Courses from './courses/Courses';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat, removeHtmlTags } from '../services/util/util';\r\n\r\nclass CompetencyList extends Component {\r\n  static propTypes = {\r\n    match: PropTypes.shape({\r\n      match: PropTypes.shape({ framework: PropTypes.string })\r\n    })\r\n  };\r\n\r\n  competencyService = new CompetencyService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkVersion: '',\r\n    frameworkName: '',\r\n    frameworkStatus: '',\r\n    frameworkDescription: '',\r\n    versions: [],\r\n    domains: [],\r\n    filter: '',\r\n    filteredDomains: [],\r\n    loadingError: false\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework, version: frameworkVersion } = props.match.params;\r\n    if (\r\n      framework !== state.framework ||\r\n      frameworkVersion !== state.frameworkVersion\r\n    ) {\r\n      return {\r\n        framework,\r\n        frameworkVersion,\r\n        domains: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, version: frameworkVersion } = this.props.match.params;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.fetchFramework(framework, frameworkVersion),\r\n        this.fetchVersions(framework)\r\n      ]);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkVersion, domains, loadingError } = this.state;\r\n    if (\r\n      framework !== prevState.framework ||\r\n      frameworkVersion !== prevState.frameworkVersion\r\n    ) {\r\n      if (domains.length === 0 && !loadingError) {\r\n        try {\r\n          this.activeRequests.startRequest();\r\n          await this.fetchFramework(framework, frameworkVersion);\r\n        } catch (error) {\r\n          this.setState({ loadingError: true });\r\n        } finally {\r\n          this.activeRequests.finishRequest();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework, frameworkVersion) {\r\n    window.scroll(0, 0);\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      frameworkVersion\r\n    );\r\n    const domains = safeFlat(frameworkData.map(item => item.domains));\r\n    const frameworkDescription = removeHtmlTags(frameworkData[0].description);\r\n\r\n    this.setState({\r\n      frameworkName: frameworkData[0].title,\r\n      //frameworkStatus: frameworkData[0].status,\r\n      frameworkDescription,\r\n      domains,\r\n      filteredDomains: domains\r\n    });\r\n\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const versionStatus = currentFramework[0].versions.filter(\r\n        vr => vr.number == frameworkVersion\r\n      );\r\n      this.setState({ frameworkStatus: versionStatus[0].status });\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { domains } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredDomains = domains.map(domain => {\r\n      const filteredCompetencies = domain.competencies.filter(competency =>\r\n        term.test(competency.title)\r\n      );\r\n      if (filteredCompetencies.length === 0) {\r\n        return null;\r\n      }\r\n      return { ...domain, competencies: filteredCompetencies };\r\n    });\r\n    this.setState({ filter, filteredDomains });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkVersion,\r\n      frameworkName,\r\n      frameworkStatus,\r\n      frameworkDescription,\r\n      filteredDomains,\r\n      versions,\r\n      filter,\r\n      loadingError\r\n    } = this.state;\r\n\r\n    /*if(versions.length > 0){\r\n console.log(this.state.versions[0].status);  \r\n}*/\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const domainList = filteredDomains.map(domain =>\r\n      domain === null ? null : (\r\n        <DomainList\r\n          key={domain.nid}\r\n          framework={framework}\r\n          domain={domain}\r\n          disable={true}\r\n          version={frameworkVersion}\r\n        />\r\n      )\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <h3>{frameworkName}</h3>\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\"> {frameworkStatus}</span>\r\n        </p>\r\n        <p>{frameworkDescription}</p>\r\n\r\n        <Tabs>\r\n          <TabList>\r\n            <Tab>Competencies</Tab>\r\n            <Tab>Training resources</Tab>\r\n          </TabList>\r\n\r\n          <TabPanel>\r\n            <input\r\n              // className=\"clearable\" // It doesn't work correctly\r\n              type=\"search\"\r\n              value={filter}\r\n              onChange={event => this.onFilter(event.target.value)}\r\n              placeholder=\"Filter competencies\"\r\n            />\r\n            <table>{domainList}</table>\r\n            <FrameworkVersions framework={framework} versions={versions} />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Courses framework={framework} version={frameworkVersion} />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourceEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      path: this.props.location.pathname.split('/'),\r\n      nid: '',\r\n      title: '',\r\n      dates: '',\r\n      dates2: '',\r\n      type: '',\r\n      description: '',\r\n      location: '',\r\n      url: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      keywords: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ nid: this.state.path[3] });\r\n\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //let fetchResource = \"http://dev-competency-mapper.pantheonsite.io/api/v1/training-resources/\"+nid+\"?_format=json\";\r\n    //let fetchResource = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    let fetchResource = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\r\n    fetch(fetchResource)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n  }\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let nid = '';\r\n    let title = '';\r\n    let dates = '';\r\n    let dates2 = '';\r\n    let type = '';\r\n    let description = '';\r\n    let location = '';\r\n    let url = '';\r\n    let target_audience = '';\r\n    let learning_outcomes = '';\r\n    let keywords = '';\r\n    let organisers = '';\r\n    let trainers = '';\r\n\r\n    this.state.data.forEach(item => {\r\n      if (item.id === this.state.nid) {\r\n        nid = item.id;\r\n        title = item.title;\r\n        //temp_date = item.dates.split(\"-\");\r\n        dates = item.start_date;\r\n        dates2 = item.end_date;\r\n        type = item.type;\r\n        description = item.description;\r\n        location = item.location;\r\n        url = item.url;\r\n        target_audience = item.target_audience;\r\n        learning_outcomes = item.learning_outcomes;\r\n        keywords = item.keywords;\r\n        organisers = item.organisers;\r\n        trainers = item.trainers;\r\n      }\r\n    });\r\n    if (this.state.data.length > 0) {\r\n      console.log(title);\r\n      return (\r\n        <EditForm\r\n          nid={nid}\r\n          title={title}\r\n          dates={dates}\r\n          dates2={dates2}\r\n          type={type}\r\n          description={description}\r\n          location={location}\r\n          url={url}\r\n          target_audience={target_audience}\r\n          learning_outcomes={learning_outcomes}\r\n          keywords={keywords}\r\n          organisers={organisers}\r\n          trainers={trainers}\r\n        />\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass EditForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nid: this.props.nid,\r\n      title: this.props.title,\r\n      dates: this.props.dates,\r\n      dates2: this.props.dates2,\r\n      type: this.props.type,\r\n      description: this.props.description,\r\n      location: this.props.location,\r\n      url: this.props.url,\r\n      target_audience: this.props.target_audience,\r\n      learning_outcomes: this.props.learning_outcomes,\r\n      keywords: this.props.keywords,\r\n      organisers: this.props.organisers,\r\n      trainers: this.props.trainers,\r\n      redirect: false,\r\n      updateFlag: false,\r\n      csrf: ''\r\n    };\r\n    this.handleTitle = this.handleTitle.bind(this);\r\n    this.handleDates = this.handleDates.bind(this);\r\n    this.handleDates2 = this.handleDates2.bind(this);\r\n    this.handleType = this.handleType.bind(this);\r\n    this.handleDesc = this.handleDesc.bind(this);\r\n    this.handleLocation = this.handleLocation.bind(this);\r\n    this.handleURL = this.handleURL.bind(this);\r\n    this.handleTargetAudience = this.handleTargetAudience.bind(this);\r\n    this.handleLearningOutcomes = this.handleLearningOutcomes.bind(this);\r\n    this.handleKeywords = this.handleKeywords.bind(this);\r\n    this.handleOrganisers = this.handleOrganisers.bind(this);\r\n    this.handleTrainers = this.handleTrainers.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  static contextTypes = {\r\n    router: PropTypes.object\r\n  };\r\n\r\n  handleTitle(event) {\r\n    this.setState({ title: event.value });\r\n  }\r\n\r\n  handleDates(event) {\r\n    this.setState({ dates: event.value });\r\n  }\r\n\r\n  handleDates2(event) {\r\n    this.setState({ dates2: event.value });\r\n  }\r\n\r\n  handleType(event) {\r\n    this.setState({ type: event.value });\r\n  }\r\n\r\n  handleDesc(event) {\r\n    this.setState({ description: event.editor.getData() });\r\n  }\r\n  handleLocation(event) {\r\n    this.setState({ location: event.value });\r\n  }\r\n  handleURL(event) {\r\n    this.setState({ url: event.value });\r\n  }\r\n\r\n  handleTargetAudience(event) {\r\n    this.setState({ target_audience: event.editor.getData() });\r\n  }\r\n\r\n  handleLearningOutcomes(event) {\r\n    this.setState({ learning_outcomes: event.editor.getData() });\r\n  }\r\n\r\n  handleKeywords(event) {\r\n    this.setState({ keywords: event.value });\r\n  }\r\n\r\n  handleOrganisers(event) {\r\n    this.setState({ organisers: event.editor.getData() });\r\n  }\r\n\r\n  handleTrainers(event) {\r\n    this.setState({ trainers: event.editor.getData() });\r\n  }\r\n\r\n  setRedirect = () => {\r\n    this.props.history.push('all-training-resources');\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.context.router.history.push(\r\n          '/training-resources/' + this.state.nid\r\n        );\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    let nid = this.state.nid;\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = this.refs.type.value;\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n    let keywords = this.refs.keywords.value;\r\n    let csrf = localStorage.getItem('csrf_token');\r\n\r\n    fetch(`${apiUrl}/node/` + nid + '?_format=hal_json', {\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': csrf, //'yoM7eSiML2AI6A3FGH2EKCaX_agiJfmYkRIPL0MdPlI',\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        title: [\r\n          {\r\n            value: title\r\n          }\r\n        ],\r\n        field_dates: [\r\n          {\r\n            value: dates\r\n          }\r\n        ],\r\n        field_end_date: [\r\n          {\r\n            value: dates2\r\n          }\r\n        ],\r\n        field_type: [\r\n          {\r\n            value: type\r\n          }\r\n        ],\r\n        field_description: [\r\n          {\r\n            value: description,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_location: [\r\n          {\r\n            value: location\r\n          }\r\n        ],\r\n        field_url: [\r\n          {\r\n            value: url\r\n          }\r\n        ],\r\n        field_target_audience: [\r\n          {\r\n            value: target_audience,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_learning_outcomes: [\r\n          {\r\n            value: learning_outcomes,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_keywords: [\r\n          {\r\n            value: keywords\r\n          }\r\n        ],\r\n        field_organisers: [\r\n          {\r\n            value: organisers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_trainers: [\r\n          {\r\n            value: trainers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    //event.target.reset();\r\n\r\n    event.preventDefault();\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Edit Training Resources</h2>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_edit_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"title\"\r\n                    id={'title'}\r\n                    value={this.state.title}\r\n                    onChange={this.handleTitle.bind(this)}\r\n                    required\r\n                    placeholder=\"Title\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates\"\r\n                    value={this.state.dates}\r\n                    onChange={this.handleDates.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates2\"\r\n                    value={this.state.dates2}\r\n                    onChange={this.handleDates2.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type</strong>\r\n                  <select\r\n                    ref={'type'}\r\n                    value={this.state.type}\r\n                    onChange={this.handleType.bind(this)}\r\n                  >\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.handleDesc\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" value={this.state.description} onChange={this.handleDesc.bind(this)} required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"location\"\r\n                    value={this.state.location}\r\n                    onChange={this.handleLocation.bind(this)}\r\n                    placeholder=\"Location\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"url\"\r\n                    value={this.state.url}\r\n                    onChange={this.handleURL.bind(this)}\r\n                    required\r\n                    placeholder=\"URL\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.handleTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"target_audience\" value={this.state.target_audience} onChange={this.handleTargetAudience.bind(this)} required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.handleLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" value={this.state.learning_outcomes} onChange={this.handleLearningOutcomes.bind(this)} required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.handleOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" value={this.state.organisers} onChange={this.handleOrganisers.bind(this)} required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.handleTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" value={this.state.trainers} onChange={this.handleTrainers.bind(this)} required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"keywords\"\r\n                    value={this.state.keywords}\r\n                    onChange={this.handleKeywords.bind(this)}\r\n                    placeholder=\"Keywords\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Update\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst EditResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/edit/:nid\" component={ResourceEdit} />\r\n  </Switch>\r\n);\r\n\r\nexport default EditResources;\r\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport Dropzone from 'react-dropzone'\n\n\nclass FileUpload extends React.Component {\n  constructor(props) {\n    super(props);\n\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t\t<Dropzone onDrop={acceptedFiles => \n\t\t\t\t\t{console.log(acceptedFiles)\n\t\t\t\t\t\tconst reader = new FileReader()\n\n\t\t\t\t\t    reader.onabort = () => console.log('file reading was aborted')\n\t\t\t\t\t    reader.onerror = () => console.log('file reading has failed')\n\t\t\t\t\t    reader.onload = () => {\n\t\t\t\t\t      // Do whatever you want with the file contents\n\t\t\t\t\t      const binaryStr = reader.result\n\t\t\t\t\t      console.log(binaryStr)\n\t\t\t\t\t    }\n\t\t\t\t\tdocument.getElementById(\"fileupload\").append(acceptedFiles[0].name)\n\t\t\t\t\tacceptedFiles.forEach(file => reader.readAsArrayBuffer(file))}\n\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t  {({getRootProps, getInputProps}) => (\n\t\t\t\t    <section>\n\t\t\t\t      <div {...getRootProps()}>\n\t\t\t\t        <input {...getInputProps()} />\n\t\t\t\t        <a href=\"#\">Click to select files</a>\n\t\t\t\t      </div>\n\t\t\t\t    </section>\n\t\t\t\t  )}\n\t\t\t\t</Dropzone>\n\t\t\t)\n\t}\n}\n\nexport default FileUpload;","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport CKEditor from 'react-ckeditor-component';\r\nimport FileUpload from './FileUpload';\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourceCreate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //this.onChange = this.onChange.bind(this);\r\n    this.changeDescription = this.changeDescription.bind(this);\r\n    this.changeTargetAudience = this.changeTargetAudience.bind(this);\r\n    this.changeLearningOutcomes = this.changeLearningOutcomes.bind(this);\r\n    this.changeOrganisers = this.changeOrganisers.bind(this);\r\n    this.changeTrainers = this.changeTrainers.bind(this);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      content: 'content',\r\n      description: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.props.history.push('/all-training-resources');\r\n        //this.setState({'updateFlag': false});\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = 'Online';\r\n    if (this.refs.type.value) {\r\n      type = this.refs.type.value;\r\n    }\r\n\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let keywords = this.refs.keywords.value;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n\r\n    let token = localStorage.getItem('csrf_token');\r\n\r\n    //alert(learning_outcomes);\r\n\r\n    fetch(`${apiUrl}/node?_format=hal_json`, {\r\n      credentials: 'include',\r\n      method: 'POST',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        title: [\r\n          {\r\n            value: title\r\n          }\r\n        ],\r\n        field_dates: [\r\n          {\r\n            value: dates\r\n          }\r\n        ],\r\n        field_end_date: [\r\n          {\r\n            value: dates2\r\n          }\r\n        ],\r\n        field_type: [\r\n          {\r\n            value: type\r\n          }\r\n        ],\r\n        field_description: [\r\n          {\r\n            value: description,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_location: [\r\n          {\r\n            value: location\r\n          }\r\n        ],\r\n        field_url: [\r\n          {\r\n            value: url\r\n          }\r\n        ],\r\n        field_target_audience: [\r\n          {\r\n            value: target_audience,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_learning_outcomes: [\r\n          {\r\n            value: learning_outcomes,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_keywords: [\r\n          {\r\n            value: keywords\r\n          }\r\n        ],\r\n        field_organisers: [\r\n          {\r\n            value: organisers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_trainers: [\r\n          {\r\n            value: trainers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    event.target.reset();\r\n    this.setState({ updateFlag: true });\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h2>Create Training Resources</h2>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <h4>Create new competency</h4>\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_create_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title</strong>\r\n                  <input type=\"text\" ref=\"title\" required placeholder=\"Title\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Start Date</strong>\r\n                  <input type=\"date\" ref=\"dates\" placeholder=\"Date\" />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>End Date</strong>\r\n                  <input type=\"date\" ref=\"dates2\" placeholder=\"Date\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type</strong>\r\n                  <select ref={'type'}>\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.changeDescription\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input type=\"text\" ref=\"location\" placeholder=\"Location\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL</strong>\r\n                  <input type=\"text\" ref=\"url\" required placeholder=\"URL\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.changeTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<input type=\"text\" ref=\"target_audience\" required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.changeLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.changeOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.changeTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input type=\"text\" ref=\"keywords\" placeholder=\"Keywords\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div id=\"fileupload\" className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>File upload</strong>\r\n                  <FileUpload />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Submit\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/create\" component={ResourceCreate} />\r\n  </Switch>\r\n);\r\n\r\nexport default CreateResources;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nconst $ = window.$;\r\n\r\nclass AttributeMap extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n    competencyService = new CompetencyService();\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      //framework: this.props.selectedFramework,\r\n      //resourceID: this.props.resourceID,\r\n      framework: this.props.location.pathname.split('/')[4],\r\n      resourceID: this.props.location.pathname.split('/')[2],\r\n      frameworkdetails: [],\r\n      csrf: '',\r\n      frameworkUUID: '',\r\n      competencies: [],\r\n      //attributes: this.props.selectedAttributes,\r\n      //selectedAttributes: this.props.selectedAttributes,\r\n      selectedAttributes: [],\r\n      //selectedCompetencies: this.props.selectedCompetencies,\r\n      resourceDetails: '',\r\n      resourcePath: this.props.location.pathname.split('/')\r\n    };\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    //this.loadSelectedAttributes = this.loadSelectedAttributes.bind(this);\r\n  }\r\n\r\n  async handleSelect() {\r\n    let checkedAttributes = this.state.selectedAttributes;\r\n    let attributeIDs = [];\r\n    let token = localStorage.getItem('csrf_token');\r\n    for (let i = 0; i < checkedAttributes.length; i++) {\r\n      attributeIDs.push(checkedAttributes[i].split('id', 2));\r\n    }\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.competencyService.attrmap(this.state.resourceID, attributeIDs)\r\n      ]);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n      this.props.history.push(\"/training-resources/1034\");\r\n    }\r\n  }\r\n\r\n  handleAllCheck(id, uuid, e) {\r\n    const selectedAttributes = this.state.selectedAttributes;\r\n    let childItems = document.getElementsByName(id);\r\n    if (e.target.checked) {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        childItems[i].checked = true;\r\n        selectedAttributes.push(\r\n          // childItems[i].getAttribute('data-uuid') +\r\n          //   'id' +\r\n            childItems[i].getAttribute('data-id')\r\n        );\r\n        this.setState({ selectedAttributes });\r\n        //console.log(this.state.selectedAttributes);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        if (childItems[i].checked === true) {\r\n          childItems[i].checked = false;\r\n          //selectedAttributes.pop(childItems[i].getAttribute('data-id'));\r\n          //let index = array.indexOf(element);\r\n          selectedAttributes.splice(\r\n            selectedAttributes.indexOf(childItems[i]),\r\n            1\r\n          );\r\n          this.setState({ selectedAttributes });\r\n          //console.log(this.state.selectedAttributes);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAttributeClick(id, uuid, e) {\r\n    let selectedAttributes = this.state.selectedAttributes;\r\n    //let selectedAttributes = \r\n    let isChecked = e.target.checked;\r\n    if (isChecked) {\r\n      //selectedAttributes.push(uuid + 'id' + id);\r\n      selectedAttributes.push(id);\r\n      this.setState({ selectedAttributes });\r\n      document.getElementById(e.target.name).checked = true;\r\n      console.log(selectedAttributes);\r\n    } else {\r\n      //selectedAttributes.pop(id);\r\n      selectedAttributes.splice(\r\n        selectedAttributes.indexOf(id),\r\n        1\r\n      );\r\n      this.setState({ selectedAttributes });\r\n      if (!$(':checkbox[name=' + e.target.name + ']').is(':checked')) {\r\n        document.getElementById(e.target.name).checked = false;\r\n        //console.log(this.state.selectedAttributes);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleListAllChecked(e) {\r\n    let lists = [];\r\n    $(':checkbox').each(function() {\r\n      if ($(this).is(':checked')) {\r\n        lists.push($(this).attr('id'));\r\n      }\r\n    });\r\n    alert(lists);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await fetch(\r\n      `${apiUrl}` +\r\n        '/api/resources/?_format=hal_json&id=' +\r\n        this.state.resourceID+'&timestamp='+Date.now()\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resourceDetails: findresponse\r\n        });\r\n      });\r\n\r\n    console.log(this.state.resourceDetails); \r\n\r\n    let selectedAttributes = []; \r\n    this.state.resourceDetails.competency_profile.map(profile=>{\r\n      //if(profile.title.toLowerCase() == this.state.framewor  k){\r\n        profile.domains.map(domain=>{\r\n          domain.competencies.map(competency=>{\r\n            competency.attributes.map(attribute=>{ \r\n            selectedAttributes.push(attribute.id)\r\n            \r\n            })\r\n          })\r\n        })\r\n      //}\r\n    });\r\n\r\n    this.setState({selectedAttributes: selectedAttributes});\r\n\r\n    //console.log(this.state.framework);\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let fetchFrameworkDetails = `${apiUrl}/api/version_manager?_format=json&timestamp=${Date.now()}`;\r\n    await fetch(fetchFrameworkDetails)\r\n      .then(Response => Response.json())\r\n      .then(findresponse1 => {\r\n        this.setState({\r\n          frameworkdetails: findresponse1\r\n        });\r\n      });\r\n\r\n    let latest_version = '';\r\n\r\n    this.state.frameworkdetails.map(detail=>{\r\n      if(detail.title.toLowerCase() == this.state.framework){\r\n      \r\n      detail.versions.map(version=>{\r\n        if(version.status == \"live\"){\r\n          latest_version = version.number;\r\n        }\r\n      })\r\n    }\r\n    });\r\n\r\n    let fetchCompetencyList =\r\n      `${apiUrl}` + '/api/' + this.state.framework + '/'+ latest_version+'?_format=json';\r\n      console.log(fetchCompetencyList);\r\n    await fetch(fetchCompetencyList)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n\r\n    \r\n\r\n    //this.loadSelectedAttributes();\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return this.state.attributes === nextState.attributes;\r\n  }\r\n\r\n  render() {\r\n    //console.log(this.state.data);\r\n    let frameworkDetails = this.state.frameworkdetails;\r\n    let data = this.state.data;\r\n    let frameworkDefs = [];\r\n    let domainsOptions = [];\r\n    let attributeTypeOptions = [];\r\n    let resDetails = this.state.resourceDetails;\r\n    //let resDetails = this.state.resourceDetails;\r\n    let selectedAttributesArray = [];\r\n    let selectedCompetenciesArray = [];\r\n    if (resDetails) {\r\n      resDetails.competency_profile.map(profile => {\r\n        profile.domains.map(domain => {\r\n          domain.competencies.map(competency => {\r\n            selectedCompetenciesArray.push(competency.id);\r\n            competency.attributes.map(attribute => {\r\n              selectedAttributesArray.push(attribute.id);\r\n            });\r\n          });\r\n        });\r\n      });\r\n\r\n      //console.log(selectedAttributesArray);\r\n    }\r\n    //this.loadSelectedAttributes();\r\n\r\n    frameworkDetails.forEach((item, ikey) => {\r\n      if (item.title.toLowerCase() === this.state.framework) {\r\n        //this.state.frameworkUUID = item.uuid;\r\n        item.attribute_types.forEach(attribute_type => {\r\n          frameworkDefs.push(attribute_type.title);\r\n          attributeTypeOptions.push(\r\n            <option data-id={attribute_type.id} value={attribute_type.uuid}>\r\n              {attribute_type.title}\r\n            </option>\r\n          );\r\n        });\r\n        item.domains.forEach(domain => {\r\n          domainsOptions.push(\r\n            <option data-id={domain.id} value={domain.uuid}>\r\n              {domain.title}\r\n            </option>\r\n          );\r\n        });\r\n      }\r\n    });\r\n\r\n    // console.log(data);\r\n\r\n    const ListOfCompetencies = data.map(item =>\r\n      item.domains.map((domain, did) => (\r\n        <tbody>\r\n          <tr key={domain.nid}>\r\n            <td>{did + 1}</td>{' '}\r\n            <td>\r\n              <strong> {domain.title}</strong>{' '}\r\n            </td>{' '}\r\n          </tr>\r\n          {domain.competencies.map((competency, cid) => (\r\n            <tr key={competency.id}>\r\n              <td>\r\n                {did + 1}.{cid + 1}\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type={'checkbox'}\r\n                  defaultChecked={\r\n                    -1 !== selectedCompetenciesArray.indexOf(competency.id)\r\n                  }\r\n                  data-test={competency.uuid}\r\n                  id={competency.id}\r\n                  onChange={this.handleAllCheck.bind(\r\n                    this,\r\n                    competency.id,\r\n                    competency.uuid\r\n                  )}\r\n                />{' '}\r\n                {competency.title}\r\n                <ul style={{ marginLeft: 1 + 'em', marginBottom: 1 + 'em' }}>\r\n                  {frameworkDefs.map(def => {\r\n                    return (\r\n                      <div style={{ marginLeft: 1 + 'em' }}>\r\n                        <div>\r\n                          {' '}\r\n                          <strong>\r\n                            <em>{def}</em>\r\n                          </strong>\r\n                        </div>\r\n                        {competency.attributes\r\n                          .filter(attribute => attribute.type === def)\r\n                          .map(attribute => {\r\n                            return (\r\n                              <li\r\n                                key={attribute.id}\r\n                                style={{ marginLeft: 1 + 'em' }}\r\n                              >\r\n                                <input\r\n                                  type={'checkbox'}\r\n                                  defaultChecked={\r\n                                    -1 !==\r\n                                    selectedAttributesArray.indexOf(\r\n                                      //attribute.uuid + 'id' + attribute.id\r\n                                      attribute.id\r\n                                    )\r\n                                  }\r\n                                  name={competency.id}\r\n                                  data-id={attribute.id}\r\n                                  data-uuid={attribute.uuid}\r\n                                  id={attribute.id}\r\n                                  onChange={this.handleAttributeClick.bind(\r\n                                    this,\r\n                                    attribute.id,\r\n                                    attribute.uuid\r\n                                  )}\r\n                                />{' '}\r\n                                <span className={attribute.archived}>\r\n                                  {' '}\r\n                                  {attribute.title}\r\n                                </span>\r\n                              </li>\r\n                            );\r\n                          })}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </ul>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n          <tr>\r\n            <td>\r\n              <td />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      ))\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        <h2>{resDetails.title}</h2>\r\n        <h4>Type: {resDetails.type}</h4>\r\n        <h4>URL: {resDetails.url}</h4>\r\n        <table className={'table'}>{ListOfCompetencies}</table>\r\n        <div id={'footer-button'}>\r\n          <button className={'button'} onClick={this.handleSelect.bind(this)}>\r\n            {' '}\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst AttrMap = () => (\r\n  <Switch>\r\n    <Route\r\n      exact\r\n      path=\"/training-resources/:id/map/:framework\"\r\n      component={AttributeMap}\r\n    />\r\n  </Switch>\r\n);\r\n\r\nexport default AttrMap;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport { Link } from 'react-router-dom';\n\nconst customStyles = {\n  content : {\n    top                   : '50%',\n    left                  : '50%',\n    right                 : 'auto',\n    bottom                : 'auto',\n    marginRight           : '-50%',\n    transform             : 'translate(-50%, -50%)'\n  }\n};\n\n// Make sure to bind modal to your appElement (http://reactcommunity.org/react-modal/accessibility/)\nModal.setAppElement('#root')\n\nclass ItemVersions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modalIsOpen: false\n    };\n\n\n\n    this.openModal = this.openModal.bind(this);\n    // this.afterOpenModal = this.afterOpenModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  openModal() {\n    this.setState({modalIsOpen: true});\n  }\n\n  // afterOpenModal() {\n  //   // references are now sync'd and can be accessed.\n  //   this.subtitle.style.color = '#f00';\n  // }\n\n  closeModal() {\n    this.setState({modalIsOpen: false});\n  }\n\n  render() {\n    return (\n      <span>\n        <button onClick={this.openModal}> <i className={\"fa fa-question-circle\"}></i> </button>\n        <Modal\n          isOpen={this.state.modalIsOpen}\n          onAfterOpen={this.afterOpenModal}\n          onRequestClose={this.closeModal}\n          style={customStyles}\n          contentLabel=\"Example Modal\"\n        >\n\n          <button className={\"float-right\"} onClick={this.closeModal}><i className={\"fa fa-window-close\"}></i></button>\n          <p></p>\n          <div className={\"callout\"}>\n            This item is deprecated in the latest version of this framework. Please see the  \n\n             <Link to={`/framework/${this.props.framework.toLowerCase()}/${this.props.version}`}> release notes</Link>\n          </div>\n          \n        </Modal>\n      </span>\n    );\n  }\n}\n\nexport default ItemVersions;","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport ReactModal from 'react-modal';\r\nimport AttributeMap from './AttributeMap';\r\nimport Parser from 'html-react-parser';\r\nimport ItemVersions from '../containers/framework-versions/VersionNotice';\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourceDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resource: [],\r\n      frameworks: [],\r\n      resourcePath: this.props.location.pathname.split('/'),\r\n      showModal: false,\r\n      selectedFramework: '',\r\n      updateFlag: ''\r\n    };\r\n    this.handleOpenModal = this.handleOpenModal.bind(this);\r\n    this.handleCloseModal = this.handleCloseModal.bind(this);\r\n  }\r\n\r\n  handleOpenModal(event, temp) {\r\n    this.setState({ showModal: true });\r\n    this.setState({ selectedFramework: event });\r\n    temp.preventDefault();\r\n    //console.log(event);\r\n  }\r\n\r\n  handleCloseModal() {\r\n    this.setState({ showModal: false });\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //&timestamp=${Date.now()}\r\n\r\n    /*let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=hal_json`;*/\r\n    let resourcesURL = `${apiUrl}/api/resources/?_format=json&id=${\r\n      this.state.resourcePath[2]\r\n    }&timestamp=${Date.now()}`;\r\n    console.log(resourcesURL);\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse3 => {\r\n        this.setState({ resource: findresponse3 });\r\n      });\r\n\r\n    //fetch(`${apiUrl}/api/v1/framework?_format=json`)\r\n    fetch(`${apiUrl}/api/version_manager?_format=json`)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          frameworks: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  mappingBlock() {\r\n    if (localStorage.getItem('roles')) {\r\n      if (localStorage.getItem('roles').includes('content_manager')) {\r\n        return (\r\n          <div className={'callout white-color industry-background'}>\r\n            <strong> Manage competency profile </strong>\r\n            <ul>\r\n              {this.state.frameworks.map((item, id) => {\r\n                return (\r\n                  // <li style={{ display: 'inline', margin: '5px' }}>\r\n                  //   <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n                  //     onClick={this.handleOpenModal.bind(\r\n                  //       this,\r\n                  //       item.name.toLowerCase()\r\n                  //     )}\r\n                  //   >\r\n                  //     {' '}\r\n                  //     <i className=\"fas fa-tags\" /> {item.name}{' '}\r\n                  //   </a>\r\n                  // </li>\r\n\r\n                  <li style={{ display: 'inline', margin: '5px' }}>\r\n                    <a\r\n                      href={\r\n                        '/training-resources/' +\r\n                        this.state.resourcePath[2] +\r\n                        '/map/' +\r\n                        item.title.toLowerCase()\r\n                      }\r\n                    >\r\n                      {' '}\r\n                      <i className=\"fas fa-tags\" /> {item.title}{' '}\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // console.log(this.state.resources);\r\n    let attributes = [];\r\n    let selectedCompetencies = [];\r\n    let attribute_types = [];\r\n    let framework_repeat = [];\r\n    //console.log(this.state.resource);\r\n    let item = this.state.resource;\r\n    let frameworkLiveVersion = '';\r\n\r\n    let link = '/bioexcel/1.1';\r\n    let check_array = Array.isArray(item.competency_profile);\r\n    const Resource = (\r\n      // this.state.resource.map((item, index) => {\r\n      //   if (item.id === this.state.resourcePath[2]) {\r\n      //     item.competency_profile.map(profile =>\r\n      //       profile.domains.map(domain =>\r\n      //         domain.competencies.map(competency =>\r\n      //           competency.attributes.map(\r\n      //             attribute =>\r\n      //               attributes.push(attribute.uuid + 'id' + attribute.id),\r\n      //             selectedCompetencies.push(competency.id)\r\n      //           )\r\n      //         )\r\n      //       )\r\n      //     );\r\n\r\n      //     item.competency_profile.map(profile =>\r\n      //         selectedCompetencies.push(profile.competency_id)\r\n      //       );\r\n\r\n      //return (\r\n      <div>\r\n        <div>\r\n          <div className={'row'}>\r\n            <h2>{item.title}</h2>\r\n          </div>\r\n\r\n          <div className={'row'}>\r\n            <div className={'column large-9'}>\r\n              <div className={'callout'}>\r\n                {item.date ? (\r\n                  <p>\r\n                    <strong>Date:</strong> {item.dates}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.keywords ? (\r\n                  <p>\r\n                    <strong>Keywords:</strong> {item.keywords}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.location ? (\r\n                  <p>\r\n                    <strong>Location:</strong> {item.location}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.type ? (\r\n                  <p>\r\n                    <strong>Type:</strong> {item.type}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.url ? (\r\n                  <p>\r\n                    <strong> URL: </strong>{' '}\r\n                    <a href={item.url} target={'_blank'}>\r\n                      {item.url}\r\n                    </a>\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n              </div>\r\n              <h3>Overview</h3>\r\n              {item.description ? Parser(item.description) : ''}\r\n\r\n              {item.target_audience\r\n                ? Parser('<h3>Target Audience</h3>' + item.target_audience)\r\n                : ''}\r\n              {item.learning_outcomes\r\n                ? Parser('<h3>Learning Outcomes</h3>' + item.learning_outcomes)\r\n                : ''}\r\n              {item.organisers\r\n                ? Parser('<h3>Organizers</h3>' + item.organisers)\r\n                : ''}\r\n\r\n              {item.trainers ? Parser('<h3>Trainers</h3>' + item.trainers) : ''}\r\n              <h3>Competency Profile</h3>\r\n\r\n              <table className={'hover'}>\r\n                <tbody>\r\n                  {check_array\r\n                    ? item.competency_profile.map(profile => {\r\n                        return (\r\n                          <tr>\r\n                            {this.state.frameworks.map(framework => {\r\n                              if (framework.nid === profile.id) {\r\n                                framework.attribute_types.map(type =>\r\n                                  attribute_types.push(type.title)\r\n                                );\r\n                                frameworkLiveVersion = framework.versions.find(\r\n                                  version => version.status === 'live'\r\n                                );\r\n                              }\r\n\r\n                              return null;\r\n                            })}\r\n                            <td>\r\n                              <h4>{profile.title}</h4>\r\n                            </td>\r\n                            <td>\r\n                              {profile.domains.map(domain => (\r\n                                <div>\r\n                                  <h5>{domain.title}</h5>\r\n                                  <ul>\r\n                                    {domain.competencies.map(competency => (\r\n                                      <li>\r\n                                        <span\r\n                                          className={\r\n                                            competency.archived == 'archived'\r\n                                              ? 'archived'\r\n                                              : ''\r\n                                          }\r\n                                        >\r\n                                          {competency.title}\r\n                                          {competency.archived == 'archived' ? (\r\n                                            <ItemVersions\r\n                                              framework=\"bioexcel\"\r\n                                              versions={link}\r\n                                            />\r\n                                          ) : (\r\n                                            ''\r\n                                          )}\r\n                                        </span>\r\n                                        <ul>\r\n                                          {attribute_types.map(type => (\r\n                                            <span>\r\n                                              {competency.attributes.map(\r\n                                                attribute => {\r\n                                                  if (attribute.type === type) {\r\n                                                    return (\r\n                                                      <li>\r\n                                                        {' '}\r\n                                                        <em>{type}</em> -{' '}\r\n                                                        <span\r\n                                                          className={\r\n                                                            attribute.archived ==\r\n                                                            'archived'\r\n                                                              ? 'archived'\r\n                                                              : ''\r\n                                                          }\r\n                                                        >\r\n                                                          {attribute.title}\r\n                                                          {attribute.archived ==\r\n                                                          'archived' ? (\r\n                                                            <ItemVersions\r\n                                                              framework={\r\n                                                                profile.title\r\n                                                              }\r\n                                                              version={\r\n                                                                frameworkLiveVersion.number\r\n                                                              }\r\n                                                            />\r\n                                                          ) : (\r\n                                                            ''\r\n                                                          )}\r\n                                                          {attribute.archived ==\r\n                                                          'archived' ? (\r\n                                                            <a\r\n                                                              href={\r\n                                                                '/training-resources/' +\r\n                                                                item.id +\r\n                                                                '/demap/' +\r\n                                                                attribute.id\r\n                                                              }\r\n                                                            >\r\n                                                              <i class=\"fas fa-times-circle\" />\r\n                                                            </a>\r\n                                                          ) : (\r\n                                                            ''\r\n                                                          )}\r\n                                                        </span>\r\n                                                      </li>\r\n                                                    );\r\n                                                  }\r\n                                                  return null;\r\n                                                }\r\n                                              )}\r\n                                            </span>\r\n                                          ))}\r\n                                        </ul>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              ))}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    : ''}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div\r\n              className={\r\n                'column large-3 callout industry-background white-color'\r\n              }\r\n            >\r\n              <h3>More information</h3>\r\n              <p>No data available</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className={'row'}>\r\n        <div className={'column large-12'}>\r\n          {Resource}\r\n          {this.mappingBlock()}\r\n        </div>\r\n\r\n        <div style={{ overflow: 'scroll' }}>\r\n          <ReactModal\r\n            isOpen={this.state.showModal}\r\n            className=\"Modal\"\r\n            overlayClassName=\"Overlay\"\r\n            contentLabel=\"Minimal Modal Example\"\r\n          >\r\n            <div>\r\n              <h2 style={{ 'text-align': 'center' }}>\r\n                Manage competency profile for{' '}\r\n                {this.state.selectedFramework.toUpperCase()}{' '}\r\n                <i\r\n                  className=\"fas fa-window-close float-right\"\r\n                  data-close\r\n                  onClick={this.handleCloseModal}\r\n                />{' '}\r\n              </h2>\r\n            </div>\r\n            <table>\r\n              <AttributeMap\r\n                selectedCompetencies={selectedCompetencies}\r\n                selectedAttributes={attributes}\r\n                selectedFramework={this.state.selectedFramework}\r\n                resourceID={this.state.resourcePath[2]}\r\n                handleCloseModal={this.handleCloseModal}\r\n              />\r\n            </table>\r\n          </ReactModal>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ResDetails = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resources/:id\" component={ResourceDetails} />\r\n  </Switch>\r\n);\r\n\r\nexport default ResDetails;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Parser from 'html-react-parser';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourcesList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resources: [],\r\n      filterType: '',\r\n      filterMapping: '',\r\n      userid: ''\r\n    };\r\n    this.archiveHandle = this.archiveHandle.bind(this);\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n    //console.log(localStorage.getItem('userid'));\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    let resourcesURL = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resources: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  checkAuthor(author_id) {\r\n    let userid = localStorage.getItem('userid');\r\n    if (userid == author_id) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n    //console.log(localStorage.getItem('userid'));\r\n  }\r\n\r\n  filter(e) {\r\n    this.setState({ filter: e.target.value });\r\n  }\r\n\r\n  filterTypeHandle(e) {\r\n    this.setState({ filterType: e.target.value });\r\n  }\r\n\r\n  filterMappingHandle(e) {\r\n    if (this.state.filterMapping) {\r\n      this.setState({ filterMapping: 0 });\r\n    } else {\r\n      this.setState({ filterMapping: 1 });\r\n    }\r\n  }\r\n\r\n  archiveHandle(rid, status, event) {\r\n    //alert(\"competency \"+ cid+ \"is \"+ status);\r\n    let archivedStatus = '';\r\n    if (status === 1) {\r\n      archivedStatus = false;\r\n    } else {\r\n      archivedStatus = true;\r\n    }\r\n    let token = localStorage.getItem('csrf_token');\r\n    fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        field_archived: [\r\n          {\r\n            value: archivedStatus\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    this.setState({ updateFlag: true });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let resources = this.state.resources;\r\n    if (this.state.filter) {\r\n      resources = resources.filter(\r\n        item =>\r\n          item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\r\n          item.description\r\n            .toLocaleLowerCase()\r\n            .includes(this.state.filter.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (this.state.filterType !== 'All') {\r\n      resources = resources.filter(item =>\r\n        item.type\r\n          .toLocaleLowerCase()\r\n          .includes(this.state.filterType.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (this.state.filterMapping) {\r\n      resources = resources.filter(item =>\r\n        item.competency_profile.some(\r\n          profile =>\r\n            profile.attribute_archived == 'archived' ||\r\n            profile.competency_archived == 'archived' ||\r\n            profile.domain == 'archived'\r\n        )\r\n      );\r\n      console.log('filter applied');\r\n    }\r\n\r\n    const ListOfResources = resources.map((item, index) => (\r\n      <tr key={index}>\r\n        <td>{index + 1} </td>\r\n        <td>\r\n          {' '}\r\n          <Link to={'/training-resources/' + item.id}>{item.title} </Link>\r\n        </td>\r\n        <td>{item.dates}</td>\r\n        <td>{item.type}</td>\r\n        <td>\r\n          <a href={item.url} target={'_blank'}>\r\n            {item.url}\r\n          </a>\r\n        </td>\r\n        <td>\r\n          {item.archived === '1' ? (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 1)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\r\n            </a>\r\n          ) : (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 0)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-off\" />\r\n            </a>\r\n          )}\r\n        </td>\r\n        <td>\r\n          {this.checkAuthor(item.author) ? (\r\n            <Link to={`/training-resource/edit/${item.id}`}>\r\n              <i className=\"fas fa-edit\" />{' '}\r\n            </Link>\r\n          ) : (\r\n            ''\r\n          )}\r\n        </td>\r\n      </tr>\r\n    ));\r\n    return (\r\n      <div className={'row'}>\r\n        <h3>Training Resources</h3>\r\n        <div className=\"row\">\r\n          <div className=\"column large-6\">\r\n            <div>\r\n              <input\r\n                type=\"text\"\r\n                onChange={this.filter.bind(this)}\r\n                placeholder=\"Type to search\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <div>\r\n              <select ref={'type'} onChange={this.filterTypeHandle.bind(this)}>\r\n                <option value={'All'}>All</option>\r\n                <option value={'Online'}>Online</option>\r\n                <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                <option value={'Webinar'}>Webinar</option>\r\n                <option value={'Hackathon'}>Hackathon</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"checkboxMapping\"\r\n              checked={this.state.filterMapping}\r\n              onChange={this.filterMappingHandle.bind(this)}\r\n            />\r\n            <span id=\"checkboxMappingLabel\" for=\"checkboxMapping\">\r\n              Items with deprecated mapping\r\n            </span>\r\n          </div>\r\n          <div className={'column large-1'}>\r\n            <Link\r\n              className={'button float-right'}\r\n              to={'/training-resource/create'}\r\n            >\r\n              <i className=\"fas fa-plus-circle\"> </i> Add new{' '}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>S. No.</th>\r\n              <th>Title</th>\r\n              <th>Date(s)</th>\r\n              <th>Type</th>\r\n              <th>URL</th>\r\n              <th>Archive</th>\r\n              <th>Edit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{ListOfResources}</tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Resources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/all-training-resources\" component={ResourcesList} />\r\n  </Switch>\r\n);\r\n\r\nexport default Resources;\r\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Parser from 'html-react-parser';\nimport { Link } from 'react-router-dom';\n\nimport { apiUrl } from '../services/http/http';\n\nclass ResourcesHome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resources: [],\n      filterType: ''\n    };\n    //this.archiveHandle = this.archiveHandle.bind(this);\n  }\n\n  checkUser() {\n    if (!localStorage.getItem('roles')) {\n      this.props.history.push('/');\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\n      alert(\n        'You are not authorised to access this page. Contact the administrator'\n      );\n      this.props.history.push('/');\n    }\n    console.log(localStorage.getItem('roles'));\n  }\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (this.state.updateFlag) {\n  //     this.fetchData();\n  //     setTimeout(() => {\n  //       this.setState({ updateFlag: false });\n  //     }, 1000);\n  //     console.log('componentDidUpdate');\n  //   }\n  // }\n\n  // componentDidMount() {\n  //   this.fetchData();\n  // }\n\n  // fetchData() {\n  //   let csrfURL = `${apiUrl}/rest/session/token`;\n  //   fetch(csrfURL)\n  //     .then(Response => Response)\n  //     .then(findresponse2 => {\n  //       this.setState({ csrf: findresponse2 });\n  //     });\n\n  //   //let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\n  //   let resourcesURL = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\n  //   fetch(resourcesURL)\n  //     .then(Response => Response.json())\n  //     .then(findresponse => {\n  //       this.setState({\n  //         resources: findresponse\n  //       });\n  //     });\n  // }\n\n  // filter(e) {\n  //   this.setState({ filter: e.target.value });\n  // }\n\n  // filterTypeHandle(e) {\n  //   this.setState({ filterType: e.target.value });\n  // }\n\n  // archiveHandle(rid, status, event) {\n  //   //alert(\"competency \"+ cid+ \"is \"+ status);\n  //   let archivedStatus = '';\n  //   if (status === 1) {\n  //     archivedStatus = false;\n  //   } else {\n  //     archivedStatus = true;\n  //   }\n  //   let token = localStorage.getItem('csrf_token');\n  //   fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\n  //     credentials: 'include',\n  //     method: 'PATCH',\n  //     cookies: 'x-access-token',\n  //     headers: {\n  //       Accept: 'application/hal+json',\n  //       'Content-Type': 'application/hal+json',\n  //       'X-CSRF-Token': token,\n  //       Authorization: 'Basic'\n  //     },\n  //     body: JSON.stringify({\n  //       _links: {\n  //         type: {\n  //           href: `${apiUrl}/rest/type/node/training_resource`\n  //         }\n  //       },\n  //       field_archived: [\n  //         {\n  //           value: archivedStatus\n  //         }\n  //       ],\n  //       type: [\n  //         {\n  //           target_id: 'training_resource'\n  //         }\n  //       ]\n  //     })\n  //   });\n\n  //   this.setState({ updateFlag: true });\n\n  //   event.preventDefault();\n  // }\n\n  render() {\n    this.checkUser();\n    // let resources = this.state.resources;\n    // if (this.state.filter) {\n    //   resources = resources.filter(\n    //     item =>\n    //       item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\n    //       item.description\n    //         .toLocaleLowerCase()\n    //         .includes(this.state.filter.toLowerCase())\n    //   );\n    // }\n\n    // if (this.state.filterType !== 'All') {\n    //   resources = resources.filter(item =>\n    //     item.type\n    //       .toLocaleLowerCase()\n    //       .includes(this.state.filterType.toLowerCase())\n    //   );\n    // }\n\n    // const ListOfResources = resources.map((item, index) => (\n    //   <tr key={index}>\n    //     <td>{index + 1} </td>\n    //     <td>\n    //       {' '}\n    //       <h4>\n    //         {' '}\n    //         <Link to={'/training-resources/' + item.id}>{item.title} </Link>\n    //       </h4>\n    //       <p>{item.dates} </p>\n    //       <strong>Learning resource type:</strong> {item.type} <br />\n    //       {Parser(item.description.substr(0, 240) + '...')} <br />\n    //       <br />\n    //       <strong> URL: </strong>{' '}\n    //       <a href={item.url} target={'_blank'}>\n    //         {item.url}\n    //       </a>\n    //     </td>\n    //     <td>\n    //       {item.archived === '1' ? (\n    //         <a // eslint-disable-line jsx-a11y/anchor-is-valid\n    //           onClick={this.archiveHandle.bind(this, item.id, 1)}\n    //         >\n    //           {' '}\n    //           <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\n    //         </a>\n    //       ) : (\n    //         <a // eslint-disable-line jsx-a11y/anchor-is-valid\n    //           onClick={this.archiveHandle.bind(this, item.id, 0)}\n    //         >\n    //           {' '}\n    //           <i className=\"fas fa-toggle-off\" />\n    //         </a>\n    //       )}\n    //     </td>\n    //     <td>\n    //       <Link to={`/training-resource/edit/${item.id}`}>\n    //         <i className=\"fas fa-edit\" />{' '}\n    //       </Link>\n    //     </td>\n    //   </tr>\n    // ));\n    return (\n      <div className={'row'}>\n        <h3>Training Resources</h3>\n        <div className=\"row\">\n          <div className=\"column large-4 callout\">\n            \n              \n                <Link\n                  className={'button float-right'}\n                  to={'/all-training-resources'}\n                >\n                  <i className=\"fas fa-list\"> </i> View published training resources{' '}\n                </Link>\n                \n            \n            \n          </div>\n          <div className=\"column large-4 callout\">\n            \n                <Link\n                  className={'button float-right'}\n                  to={'#'}\n                >\n                  <i className=\"fas fa-list\"> </i> View unpublished training resources{' '}\n                </Link>\n                \n            \n          </div>\n          <div className={'column large-4 callout'}>\n          \n            <Link\n              className={'button float-right'}\n              to={'#'}\n            >\n              <i className=\"fas fa-tasks\"> </i> Manage training resources{' '}\n            </Link>\n          \n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst ResourcesHomepage = () => (\n  <Switch>\n    <Route exact path=\"/training-resources-home\" component={ResourcesHome} />\n  </Switch>\n);\n\nexport default ResourcesHomepage;\n","import React from 'react';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      roles: '',\r\n      user: ''\r\n    };\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    let old = this.refs.old.value;\r\n    let new1 = this.refs.new1.value;\r\n    let uid = localStorage.getItem('userid');\r\n    fetch(`${apiUrl}/user/` + uid + '/password?_format=json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': localStorage.getItem('csrf_token')\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/user/user`\r\n          }\r\n        },\r\n        old: [\r\n          {\r\n            value: old\r\n          }\r\n        ],\r\n        new: [\r\n          {\r\n            target_id: new1\r\n          }\r\n        ]\r\n      })\r\n    })\r\n      .then(resp => resp)\r\n      .then(data =>\r\n        setTimeout(() => {\r\n          alert('Password changed successfully');\r\n          window.location.reload();\r\n        }, 1000)\r\n      );\r\n    e.preventDefault();\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h3>Change password:</h3>\r\n        <form id={'passChange'}>\r\n          <input type={'password'} ref={'old'} placeholder={'Old password'} />\r\n          <input type={'password'} ref={'new1'} placeholder={'New password'} />\r\n          <input type={'password'} placeholder={'Confirm new password'} />\r\n          <input\r\n            type={'button'}\r\n            className={'button'}\r\n            onClick={this.handlePasswordChange.bind(this)}\r\n            value={'Submit'}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChangePassword;\r\n","import React from 'react';\r\n\r\nconst About = () => (\r\n  <React.Fragment>\r\n    <h2>About competency mapper</h2>\r\n    <p className=\"lead\">\r\n      Competency mapper is a web-based tool to support the creation and\r\n      management of competency frameworks for professionals working in the\r\n      biomolecular sciences.\r\n    </p>\r\n    <h3>Anyone can..</h3>\r\n    <p>\r\n      <ul>\r\n        <li>\r\n          Explore the five competency frameworks that we currently have in the\r\n          system\r\n        </li>\r\n        <li>\r\n          Click on any competency to find the knowledge, skills and attitudes\r\n          (KSAs) associated with it\r\n        </li>\r\n        <li>\r\n          See the relationships between different competency frameworks; for\r\n          example, if a competency in framework 2 is derived from one in\r\n          framework 1, this information is captured\r\n        </li>\r\n        <li>\r\n          Access a list of courses that have been mapped to a particular\r\n          competency\r\n        </li>\r\n        <li>\r\n          View summary information on each of these courses, including a link\r\n          through to the course website\r\n        </li>\r\n      </ul>\r\n    </p>\r\n    <h3>In addition to the above, content editors can...</h3>\r\n    <ul>\r\n      <li>Map courses to any competency in the mapper</li>\r\n      <li>Map courses to any combination of knowledge, skills and attitudes</li>\r\n    </ul>\r\n    <h3>In addition to the above, administrators can...</h3>\r\n    <ul>\r\n      <li>Build a completely new competency framework from a blank template</li>\r\n      <li>Make minor updates to an existing competency framework</li>\r\n      <li>\r\n        If a competency framework has undergone major updates such as merging,\r\n        splitting or deprecation of competencies, create and publish a new\r\n        version of the framework without overwriting the previous version, and\r\n        without losing links to pre-existing mappings\r\n      </li>\r\n      <li>\r\n        Create and edit multiple personas or roles associated with a competency\r\n        framework\r\n      </li>\r\n      <li>\r\n        For each competency in an associated framework, define the level of\r\n        competency required by any of the personas/roles associated with it,\r\n        using an administrator-defined list of variables.\r\n      </li>\r\n    </ul>\r\n\r\n    <h3>What is competency?</h3>\r\n    <p>\r\n      By definition, competency is an observable ability of any professional,\r\n      integrating multiple components such as knowledge, skills, values and\r\n      attitudes. It is observable, so its acquisition can be validated\r\n      objectively.\r\n    </p>\r\n    <h4>Why is it relevant?</h4>\r\n    <p>\r\n      Competency provides a shared currency applicable to learning of all\r\n      types and at all career stages.\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        Individual professionals can use competency as a career development\r\n        tool: by documenting the competencies that you have gained, and the\r\n        evidence that you have gained them, in a competency portfolio you can\r\n        seek further training to fill gaps in your portfolio, or map your\r\n        existing portfolio to roles that you might not previously have\r\n        considered.\r\n      </li>\r\n      <li>\r\n        Professional bodies and employers can use competency to define\r\n        competency frameworks for different roles or professions. These provide\r\n        useful guidance when hiring and promoting individuals, and can also\r\n        provide the basis for professional recognition in regulated professions.\r\n      </li>\r\n      <li>\r\n        Course providers can use competency to develop training (by asking what\r\n        competencies their trainees need to gain) and, where appropriate, to\r\n        assess whether training has been effective.\r\n      </li>\r\n    </ul>\r\n\r\n    <h3>What is a competency framework?</h3>\r\n    <p>\r\n      A competency framework defines the competencies required to fulfil a\r\n      particular role. competency frameworks are typically defined by\r\n      professional bodies or learned societies in collaboration with employers.\r\n      Several projects under the EUs Horizon 2020 framework have developed\r\n      competency frameworks to support emerging professions.\r\n    </p>\r\n\r\n    <h3>Who is developing the competency mapper?</h3>\r\n    <p>\r\n      The competency mapper is being developed by the{' '}\r\n      <a\r\n        href={'https://www.ebi.ac.uk/about/people/cath-brooksbank'}\r\n        target={'_blank'}\r\n      >\r\n        {' '}\r\n        EMBL-EBI training team{' '}\r\n      </a>{' '}\r\n      with the{' '}\r\n      <a href={'https://bioexcel.eu/'} target={'_blank'}>\r\n        {' '}\r\n        BioExcel{' '}\r\n      </a>{' '}\r\n      competency framework as its primary use case.{' '}\r\n    </p>\r\n    <p>\r\n      EMBL-EBIs Training programme uses a competency-based approach to\r\n      developing new courses: put simply, we ask ourselves What competency or\r\n      competencies does our audience for this course need to develop? before we\r\n      create the programme and content for a new course, and before we make a\r\n      significant update to an existing course.\r\n    </p>\r\n    <p>\r\n      The team has contributed to, and helped to steer, a number of initiatives\r\n      to develop new training programmes by defining competency requirements in\r\n      relation to a specific target audience and building a competency framework\r\n      for that audience. Competency-based projects that we have been involved in\r\n      include:\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        The ISCB education committees{' '}\r\n        <a href={'https://europepmc.org/articles/PMC5794068'} target={'_blank'}>\r\n          {' '}\r\n          competency framework for bioinformatics professionals{' '}\r\n        </a>{' '}\r\n      </li>\r\n      <li>\r\n        A clinical bioinformatics competency framework to support Health\r\n        Education England to prepare clinical practitioners for the application\r\n        of genomics in the healthcare service\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={\r\n            'https://drive.google.com/file/d/0B3BA3KSKGOoQb0hvUkx3a3lMS00/view'\r\n          }\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          RItrain competency framework{' '}\r\n        </a>{' '}\r\n        for managers and leaders of research infrastructure\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={'https://zenodo.org/record/154085#.WbUNUhNSwUE'}\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          CORBEL competency framework{' '}\r\n        </a>{' '}\r\n        for technical operators of research infrastructure\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={'https://zenodo.org/record/264231#.WbUNoRNSwUE'}\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          BioExcel competency framework{' '}\r\n        </a>\r\n        for scientists working on biomolecular modelling and simulation\r\n      </li>\r\n      <p />\r\n      <p>\r\n        These competency frameworks were designed to be used by the training\r\n        communities who developed them, and openly available to anyone who might\r\n        find them useful, yet all too often they end up buried in a PDF file as\r\n        part of a project deliverable. This made us long for a web-based tool\r\n        that would make these frameworks,and the training associated with them,\r\n        readily discoverable. We therefore decided to build that tool, and\r\n        although its still in the early stages of development weve decided to\r\n        make it openly available now so that we can seek broad input to improve\r\n        it and make it as useful as possible to the education and training\r\n        community at large. If you have comments or suggestions, please{' '}\r\n        <a href={'mailto:competency@ebi.ac.uk'}> contact us </a>.\r\n      </p>\r\n    </ul>\r\n  </React.Fragment>\r\n);\r\n\r\nexport default About;\r\n","import React from 'react';\r\n\r\nimport { removeHtmlTags } from '../../services/util/util';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction FrameworkButton({ framework }) {\r\n  let description = removeHtmlTags(framework.description);\r\n  if (description.length > 120) {\r\n    description = `${description.slice(0, 120).trim()}...`;\r\n  }\r\n  const liveVersion = framework.versions.reduce((prevVersion, newVersion) => {\r\n    if (newVersion.status === 'live') {\r\n      return newVersion.number;\r\n    }\r\n    return prevVersion;\r\n  }, null);\r\n\r\n  if (liveVersion === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"column medium-4\">\r\n      <Link\r\n        className=\"column callout\"\r\n        data-equalizer-watch\r\n        to={`/framework/${framework.title.toLowerCase()}/${liveVersion}`}\r\n      >\r\n        <img\r\n          className=\"float-center margin-bottom-medium\"\r\n          style={{ height: '6rem' }}\r\n          src={framework.logo[0].url}\r\n          alt=\"competency logo\"\r\n        />\r\n        <h5>\r\n          {description}\r\n          <i className=\"icon icon-functional\" data-icon=\">\" />\r\n        </h5>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButton;\r\n","import React from 'react';\r\n\r\nimport FrameworkButton from '../framework-button/FrameworkButton';\r\n\r\nconst $ = window.$;\r\n\r\nfunction FrameworkButtons({ frameworks }) {\r\n  const selfRef = new React.createRef();\r\n\r\n  const invokeFoundation = () => {\r\n    window.setTimeout(() => $(selfRef.current).foundation());\r\n    return frameworks.map(framework => (\r\n      <FrameworkButton key={framework.nid} framework={framework} />\r\n    ));\r\n  };\r\n\r\n  return frameworks.length < 1 ? null : (\r\n    <div className=\"row\" data-equalizer ref={selfRef}>\r\n      {invokeFoundation()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButtons;\r\n","import React, { Component } from 'react';\r\n\r\nimport FrameworkButtons from '../components/framework-buttons/FrameworkButtons';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nclass Frameworks extends Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    frameworks: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const frameworks = await this.competencyService.getAllVersionedFrameworks();\r\n      this.setState({ frameworks });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to fetch framework data', {\r\n        variant: 'error'\r\n      });\r\n      console.error(error);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { frameworks } = this.state;\r\n\r\n    return (\r\n      <div className=\"column\">\r\n        <h3>Overview</h3>\r\n        <p className=\"lead\">\r\n          Competency mapper is a web-based tool to support the creation and\r\n          management of competency frameworks for professionals working in the\r\n          biomolecular sciences{' '}\r\n          <Link to=\"/about\" className=\"readmore\">\r\n            read more{' '}\r\n          </Link>\r\n        </p>\r\n\r\n        <FrameworkButtons frameworks={frameworks} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(Frameworks);\r\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactModal from 'react-modal';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport CompetencyList from './CompetencyList';\nimport { apiUrl } from '../services/http/http';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nclass CompetencySettings extends React.Component {\n activeRequests = new ActiveRequestsService();\n     competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      path: this.props.location.pathname.split('/'),\n      competency:'',\n      competencyUUID: '',\n      competencyTitle: '',\n      frameworkList:[],\n      domainID:'',\n      domainUuid:'',\n      csrf:'',\n      mapping:''\n    };\n     \n\n    this.editDomain = this.editDomain.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.onTextChange = this.onTextChange.bind(this);\n  }\n\n  async fetchData(){\n    let competencyID = this.state.path[4];\n    let url = `${apiUrl}/node/`+competencyID+`/?_format=json`;\n    fetch(url)\n    .then(result => result.json())\n    .then(findresponse => {\n        this.setState({ competency: findresponse }, this.setMappingText);\n      });\n\n    // Load all domains of all frameworks from version_manager API\n\n    let versoinManagerURL = `${apiUrl}/api/version_manager/?_format=json`;\n    fetch(versoinManagerURL)\n    .then(result => result.json())\n    .then(findresponse => {\n        this.setState({ frameworkList: findresponse });\n      });\n\n    console.log(\"fetchData\");\n  }\n\n  async setMappingText(){\n    let competency = this.state.competency;\n    if(competency.field_map_other_competency.length > 0){\n      this.setState({mapping: competency.field_map_other_competency[0].value});\n    }\n    \n  }\n\n   componentDidMount() {\n     this.fetchData();\n    //await this.setMappingText();\n    \n  }\n\n\n\n  editDomain(e) {\n    let competencyID = this.state.path[4];\n    let selectedDomainID = this.state.domainID;\n    let selectedDomainUUID = this.state.domainUuid;\n    let mapping = this.state.mapping;\n    if(!selectedDomainID){\n      selectedDomainID = this.state.competency.field_domain[0].target_id;\n      selectedDomainUUID = this.state.competency.field_domain[0].target_uuid;\n    }\n    this.competencyService.changeDomain(competencyID, selectedDomainID, selectedDomainUUID, mapping);\n    //console.log(\"editDomain() called\");\n    this.props.history.push('/framework/'+this.state.path[2]+'/manage/competencies');\n    e.preventDefault();\n    \n  }\n\n  onTextChange(event){\n    this.setState({mapping: event.target.value});\n    console.log(this.state.mapping);\n  }\n\n  handleChange(event){\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({domainID: dataset.id, domainUuid:dataset.uuid});\n    console.log(dataset.uuid);\n  }\n\n  render() {\n    let competency_title = \"\";\n    let domain_id = \"\";\n    let domain_uuid = \"\";\n    let domain_title = \"\";\n    let competency = this.state.competency;\n    let frameworkList = this.state.frameworkList;\n    let domainOptions = [];\n    let domainArray = [];\n    //let mapped_other_competency = \"\";\n    \n    if(frameworkList){\n      frameworkList.map(framework => {\n         if(framework.title.toLowerCase() === this.state.path[2]){\n           framework.domains.map(domain => {\n             domainOptions.push(<option key={domain.id} data-id={domain.id} data-uuid={domain.uuid} value={domain.id}>{domain.title }</option>)\n             domainArray.push({key:domain.id, value:domain.title})\n           })\n         } \n      })\n      \n    }\n\n\n\n    if(competency){\n      competency_title = competency.title[0].value;\n      domain_id = competency.field_domain[0].target_id;\n      domain_uuid = competency.field_domain[0].target_uuid;\n      //mapped_other_competency = competency.field_map_other_competency[0].value;//?competency.field_map_other_competency[0].value:\"\";\n      if(domainArray.length > 0){\n        let obj = domainArray.find(d => d.key == domain_id);\n        domain_title = obj.value;\n      }\n      //console.log(competency.field_map_other_competency[0].value);\n    }\n\n   \n    return (\n      <div>\n        <h2>Change domain</h2>\n        <table className=\"table hover stack\">\n          <tbody>\n          <tr>\n              <td>\n                <h4>Domain:</h4>\n              </td>\n              <td>\n                <h4>{domain_title}</h4>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <h4>Competency:</h4>\n              </td>\n              <td>\n                <h4>{competency_title}</h4>\n              </td>\n            </tr>\n            <tr>\n              <td colSpan={2}>\n                <p className=\"lead\">Select the domain from the following list to change:</p>\n                <form id={'changeDomainForm'} onSubmit={this.editDomain.bind(this)}>\n                <div className=\"row\">\n                  <div className=\"column large-11\">\n                    <select value={this.state.domainID?this.state.domainID:domain_id} onChange={this.handleChange}>\n                      {domainOptions}\n                    </select>\n                    <label>\n                      Maps to competency/attribute from other framework\n                      <input\n                        type=\"text\"\n                        placeholder=\"Framework (version), competency or attribute\"\n                        name=\"mapping\"\n                        value={this.state.mapping}\n                        onChange={this.onTextChange.bind(this)}\n                      />\n                    </label>\n                    <input type=\"submit\" className=\"button\" value=\"Save\" />\n            \n                  </div>\n                  <div className=\"column large-1\">\n                    \n                  </div>\n                </div>\n              </form>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst CompetencySettingsRoot = () => (\n  <Switch>\n    <Route exact path=\"/framework/:framework/competency/:id/settings\" component={CompetencySettings} />\n  </Switch>\n);\n\nexport default CompetencySettingsRoot;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from 'react-ckeditor-component';\nimport FileUpload from './FileUpload';\nimport { apiUrl } from '../services/http/http';\nimport Dropzone from 'react-dropzone'\n\nclass ArticleCreate extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: [],\n      fid:'',\n    };\n  }\n\n\n  componentDidUpdate(prevProps, prevState) {\n\n  }\n\n\n  componentDidMount() {\n    let csrfURL = `${apiUrl}/rest/session/token`;\n    fetch(csrfURL)\n      .then(Response => Response)\n      .then(findresponse2 => {\n        this.setState({ csrf: findresponse2 });\n      });\n  }\n\n  async handleSubmit(event) {\n    let title = this.refs.title.value;\n    let token = localStorage.getItem('csrf_token');\n    let fid = '';\n    //let file = this.refs.fileref.value;\n    console.log(this.state.file);\n    //alert(learning_outcomes);\n\n    let fileinfo = await fetch(`${apiUrl}/file/upload/node/article/field_hero_image?_format=json`, {\n      credentials: 'include',\n      method: 'POST',\n      cookies: 'x-access-token',\n      headers: {\n        Accept: 'application/octet-stream',\n        'Content-Type': 'application/octet-stream',\n        'X-CSRF-Token': token,\n        'Content-Disposition': 'file; filename=\"filename.jpg\"',\n        Authorization: 'Basic'\n      },\n      // body: JSON.stringify({\n      //   _links: {\n      //     type: {\n      //       href: `${apiUrl}/rest/type/node/article`\n      //     }\n      //   },\n      //   title: [\n      //     {\n      //       value: title\n      //     }\n      //   ],\n      //   type: [\n      //     {\n      //       target_id: 'article'\n      //     }\n      //   ]\n      // })\n      \"data\": [\n        {\n            \"value\": this.state.file\n        } \n      ]\n    })\n    // .then((resp) => resp.json())\n    //   .then(function(data) {\n    //     //console.log(data.fid[0].value);\n    //     return data.fid[0].value;\n    //     //his.setState({fid:data.fid[0].value});\n    // })\n      ;\n\n    console.log(fileinfo.json());\n    //event.target.reset();\n    this.setState({ updateFlag: true });\n    event.preventDefault();\n  }\n\n  render() {\n    \n    return (\n      <div>\n        <h2>File upload</h2>\n\n        <div className=\"row\">\n          <div className=\"column large-12 callout\">\n            <h4>Bulk upload training resources</h4>\n            <form\n              className=\"form\"\n              id={'resource_create_form'}\n              onSubmit={this.handleSubmit.bind(this)}\n            >\n              \n\n              <div id=\"fileupload\" className=\"row\">\n                <div className=\"column large-12\">\n                  <strong>File upload</strong>\n                  <Dropzone ref=\"fileref\" onDrop={acceptedFiles => \n                    {\n                      //console.log(acceptedFiles)\n                      const reader = new FileReader()\n\n                        reader.onabort = () => console.log('file reading was aborted')\n                        reader.onerror = () => console.log('file reading has failed')\n                        reader.onload = () => {\n                          // Do whatever you want with the file contents\n                          const binaryStr = reader.result\n                          this.setState({file: binaryStr})\n                          //console.log(binaryStr)\n                        }\n                    document.getElementById(\"fileupload\").append(acceptedFiles[0].name)\n                    acceptedFiles.forEach(file => reader.readAsArrayBuffer(file))}\n                  }\n                  >\n                    {({getRootProps, getInputProps}) => (\n                      <section>\n                        <div {...getRootProps()}>\n                          <input {...getInputProps()} />\n                          <a href=\"#\">Click to select files</a>\n                        </div>\n                      </section>\n                    )}\n                  </Dropzone>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column large-12\">\n                  <strong>Remarks</strong>\n                  <input type=\"text\" ref=\"title\" required placeholder=\"Remarks\" />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column large-2\">\n                  <input type=\"submit\" className=\"button\" value=\"Submit\" />\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst CreateArticles = () => (\n  <Switch>\n    <Route exact path=\"/article/create\" component={ArticleCreate} />\n  </Switch>\n);\n\nexport default CreateArticles;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactModal from 'react-modal';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport CompetencyList from './CompetencyList';\nimport { apiUrl } from '../services/http/http';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nclass AttributeSettings extends React.Component {\n activeRequests = new ActiveRequestsService();\n     competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      path: this.props.location.pathname.split('/'),\n      attributeID: this.props.location.pathname.split('/')[6],\n      frameworkName: this.props.location.pathname.split('/')[2],\n      frameworkList:[],\n      attributeType: '',\n      attribute:'',\n      competencyID:this.props.location.pathname.split('/')[4],\n      competencyUUID: '',\n      competencyTitle: '',\n      attributeTypeID:'',\n      attributeTypeUUID:'',\n      frameworkData:[],\n    };\n     \n\n    this.changeSettings = this.changeSettings.bind(this);\n    this.handleCompetencyChange = this.handleCompetencyChange.bind(this);\n    this.handleTypeChange = this.handleTypeChange.bind(this);\n  }\n\n  async fetchData(){\n\n    // Load the attribute\n\n    let attributeID = this.state.attributeID;\n    let url = `${apiUrl}/node/`+attributeID+`/?_format=json&timestamp=${Date.now()}`;\n    fetch(url)\n    .then(result => result.json())\n    .then(findresponse => {\n        this.setState({ attribute: findresponse });\n      });\n\n    // Load all domains of all frameworks from version_manager API\n    fetch(`${apiUrl}/api/version_manager?_format=json`)\n    .then(result => result.json())\n    .then(findresponse => {\n        this.setState({ frameworkList: findresponse });\n      });\n\n    let result = await this.competencyService.getVersionedDraftFramework(\n        this.state.frameworkName\n      );\n    this.setState({frameworkData: result});\n  }\n\n  componentDidMount() {\n    this.fetchData();\n\n  }\n\n\n  changeSettings(e) {\n    let attributeID = this.state.attributeID;\n    let selectedCompetencyID = this.state.competencyID?this.state.competencyID:this.state.attribute.field_competency[0].target_id;\n    let selectedCompetencyUUID = this.state.competencyUUID?this.state.competencyUUID:this.state.attribute.field_competency[0].target_uuid;\n    let selectedAttributeTypeID = this.state.attributeTypeID?this.state.attributeTypeID:this.state.attribute.field_attribute_type[0].target_id;\n    let selectedAttributeTypeUUID = this.state.attributeTypeUUID?this.state.attributeTypeUUID:this.state.attribute.field_attribute_type[0].target_uuid;\n\n    // console.log(\"competencyID: \"+selectedCompetencyID + \" attributeTypeID: \"+ selectedAttributeTypeID);\n    // if(!selectedCompetencyID){\n    //   selectedCompetencyID = this.state.attribute.field_competency[0].target_id;\n    //   selectedCompetencyUUID = this.state.competency.field_competency[0].target_uuid;\n    // }\n\n    // if(!selectedAttributeTypeID){\n    //   selectedAttributeTypeID = this.state.attribute.field_attribute_type[0].target_id;\n    //   selectedAttributeTypeUUID = this.state.competency.field_attribute_type[0].target_uuid;\n    // }\n\n    this.competencyService.changeAttributeSettings(\n                            attributeID, \n                            selectedCompetencyID, \n                            selectedCompetencyUUID, \n                            selectedAttributeTypeID, \n                            selectedAttributeTypeUUID);\n\n    this.props.history.push('/framework/'+this.state.path[2]+'/manage/competencies/'+this.props.location.pathname.split('/')[4]+'/manage-attributes');\n    e.preventDefault();\n    \n  }\n\n  handleCompetencyChange(event){\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({competencyID: dataset.id, competencyUUID:dataset.uuid});\n    //console.log(dataset.uuid);\n  }\n\n  handleTypeChange(event){\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({attributeTypeID: dataset.id, attributeTypeUUID:dataset.uuid});\n    //console.log(dataset.uuid);\n  }\n\n  render() {\n    let attribute_title = \"\";\n    let competency_id = \"\";\n    let competency_uuid = \"\";\n    let competency_title = \"\";\n    let attribute_type_id = \"\";\n    let attribute_type_uuid = \"\";\n    let attribute_type_title = \"\";\n    let attribute = this.state.attribute;\n    let frameworkData = this.state.frameworkData;\n    let frameworkList = this.state.frameworkList;\n    let competencyOptions = [];\n    let competencyArray = [];\n    let attributeTypeOptions = [];\n    let attributeTypeArray = [];\n\n    //console.log(frameworkList);\n\n    if(frameworkList){\n      frameworkList.map(framework => {\n        if(framework.title.toLowerCase() == this.state.frameworkName ){\n           framework.attribute_types.map(attribute_type => {\n                attributeTypeOptions.push(<option key={attribute_type.id} data-id={attribute_type.id} data-uuid={attribute_type.uuid} value={attribute_type.id}>{attribute_type.title }</option>)\n                attributeTypeArray.push({key:attribute_type.id, value:attribute_type.title})\n           })\n         }\n      })\n      //console.log(attributeTypeArray);\n    }\n\n\n    if(frameworkData){\n      frameworkData.map(framework => {\n           framework.domains.map(domain => {\n             domain.competencies.map(competency => {\n               if(competency.archived == 0){\n                    competencyOptions.push(<option key={competency.id} data-id={competency.id} data-uuid={competency.uuid} value={competency.id}>{competency.title }</option>)\n                    competencyArray.push({key:competency.id, value:competency.title})\n                  }\n               })\n           })\n      })\n    }\n\n\n    if(attribute){\n      attribute_title = attribute.title[0].value;\n      competency_id = attribute.field_competency[0].target_id;\n      competency_uuid = attribute.field_competency[0].target_uuid;\n      attribute_type_id = attribute.field_attribute_type[0].target_id;\n      if(competencyArray.length > 0){\n         let obj = competencyArray.find(d => d.key == competency_id);\n        competency_title = obj.value;\n        //console.log(attribute_type_id);\n      }\n      \n      if(attributeTypeArray.length > 0){\n        let obj = attributeTypeArray.find(d => d.key == attribute_type_id);\n        attribute_type_title = obj.value;\n      }\n\n      //console.log(attribute_title);\n    }\n\n   \n    return (\n      <div>\n      <h2>Change attribute settings</h2>\n        <h3>Attribute: {attribute_title}</h3>\n        <table className=\"table hover stack\">\n          <tbody>\n          <tr>\n              <td>\n                Competency:\n              </td>\n              <td>\n                {competency_title}\n              </td>\n              <td rowSpan={2}>\n                \n                <form id={'changeDomainForm'} onSubmit={this.changeSettings.bind(this)}>\n                    <label>Change competency:</label>\n                    <select value={this.state.competencyID?this.state.competencyID:competency_id} onChange={this.handleCompetencyChange}>\n                      {competencyOptions}\n                    </select>\n                     <label>Change attribute type:</label>\n                    <select value={this.state.attributeTypeID?this.state.attributeTypeID:attribute_type_id} onChange={this.handleTypeChange}>\n                      {attributeTypeOptions}\n                    </select>\n                    <input type=\"submit\" className=\"button\" value=\"Save\" />\n   \n              </form>\n              </td>\n\n            </tr>\n            \n            <tr>\n              <td>\n                Attribute type:\n              </td>\n              <td>\n                {attribute_type_title}\n              </td>\n             \n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst AttributeSettingsRoot = () => (\n  <Switch>\n    <Route exact path=\"/framework/:framework/competency/:cid/attribute/:aid/settings\" component={AttributeSettings} />\n\n  </Switch>\n);\n\nexport default AttributeSettingsRoot;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport CompetencyService from '../services/competency/competency';\n\nconst $ = window.$;\n\nclass AttributeDemap extends React.Component {\n  activeRequests = new ActiveRequestsService();\n    competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      resourceID: this.props.location.pathname.split('/')[2],\n      attributeID: this.props.location.pathname.split('/')[4],\n      resourceDetails:[],\n      csrf: '',\n    };\n    this.demap = this.demap.bind(this);\n  }\n\n  async demap(e) {\n    //alert(\"mapping removed\");\n    let resource = 1034;\n    let items = [20, 21];\n     //this.activeRequests.startRequest();\n     let result = await this.competencyService.demap(resource, items);\n     console.log(result);\n      //this.activeRequests.finishRequest();\n    //console.log(this.state.resourceDetails);\n    //this.props.history.push(\"/training-resources/\"+this.props.location.pathname.split('/')[2]);\n    //e.preventDefault();\n  }\n\n\n\n\n  componentDidMount() {\n      //fetch(`${apiUrl}`+'/api/resources/?_format=hal_json&id='+ this.state.resourceID)\n      fetch(`${apiUrl}`+'/node/'+ this.state.resourceID + '?_format=hal_json')\n      .then(Response => Response.json())\n      .then(findresponse => {\n        this.setState({\n          resourceDetails: findresponse\n        });\n      });\n\n    let csrfURL = `${apiUrl}/rest/session/token`;\n    fetch(csrfURL)\n      .then(Response => Response)\n      .then(findresponse2 => {\n        this.setState({ csrf: findresponse2 });\n      });\n\n  }\n\n\n  // shouldComponentUpdate(nextProps, nextState) {\n  //   return this.state.attributes === nextState.attributes;\n  // }\n\n  render() {\n    return(\n        <div>\n          <h3>Are you sure you want to remove this mapping? This action cannot be undone!</h3>\n          <button className=\"button\" onClick={this.demap.bind(this)}>Yes</button>\n        </div>\n      )\n  }\n \n\n}\n\nconst AttributeDemapRoot = () => (\n  <Switch>\n    <Route exact path=\"/training-resources/:resource/demap/:attribute\" component={AttributeDemap} />\n  </Switch>\n);\n\nexport default AttributeDemapRoot;\n","import HttpService from '../http/http';\r\n\r\nconst http = new HttpService();\r\nconst loginUrl = '/user/login?_format=json';\r\nconst logoutUrl = '/user/logout';\r\n\r\nexport async function login(username, password) {\r\n  const credentials = { name: username, pass: password };\r\n  try {\r\n    const response = await http.post(loginUrl, credentials);\r\n    const { data } = response;\r\n    localStorage.setItem('roles', data.current_user.roles);\r\n    localStorage.setItem('csrf_token', data.csrf_token);\r\n    localStorage.setItem('logout_token', data.logout_token);\r\n    localStorage.setItem('user', data.current_user.name);\r\n    localStorage.setItem('userid', data.current_user.uid);\r\n    console.log(localStorage.getItem('roles'));\r\n    return data;\r\n  } catch (error) {\r\n    logout();\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem('roles');\r\n  localStorage.removeItem('csrf_token');\r\n  localStorage.removeItem('logout_token');\r\n  localStorage.removeItem('userid');\r\n  localStorage.removeItem('user');\r\n  return http.post(logoutUrl);\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Masthead from '../containers/masthead/Masthead';\r\nimport ManageAttributes from './ManageAttributes';\r\nimport ManageCompetencies from './ManageCompetencies';\r\nimport CompetencyDetails from './CompetencyDetails';\r\nimport CompetencyList from './CompetencyList';\r\nimport ResourceEdit from './ResourceEdit';\r\nimport ResourceCreate from './ResourceCreate';\r\nimport ResourceDetails from './ResourceDetails';\r\nimport ResourcesList from './ResourcesList';\r\nimport ResourcesHome from './ResourcesHome';\r\nimport ChangePassword from './ChangePassword';\r\nimport About from '../components/about/About';\r\nimport Frameworks from './Frameworks';\r\nimport ArticleCreate from './ArticleCreate';\r\nimport AttributeMap from './AttributeMap';\r\nimport CompetencySettings from './CompetencySettings';\r\nimport AttributeSettings from './AttributeSettings';\r\nimport AttributeDemap from './AttributeDemap';\r\n\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { login, logout } from '../services/auth/auth';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nconst $ = window.$;\r\n\r\nclass Root extends Component {\r\n  state = {\r\n    isActive: false,\r\n    roles: localStorage.getItem('roles') || '',\r\n    user: localStorage.getItem('user') || ''\r\n  };\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  componentDidMount() {\r\n    $(document).foundation();\r\n    $(document).foundationExtendEBI();\r\n\r\n    this.setState({ isActive: this.activeRequests.isActive });\r\n    this.subcription = this.activeRequests.addEventListener(\r\n      this.handleActiveRequests\r\n    );\r\n\r\n    window.addEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.subcription) {\r\n      this.activeRequests.removeEventListener(this.subcription);\r\n    }\r\n    window.removeEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  handleActiveRequests = hasPendingRequests => {\r\n    this.setState({ isActive: hasPendingRequests });\r\n  };\r\n\r\n  detectUserChangesFromOtherTabs = ({ key, newValue }) => {\r\n    if (key === 'user') {\r\n      if (newValue) {\r\n        this.setState({\r\n          user: localStorage.getItem('user'),\r\n          roles: localStorage.getItem('roles')\r\n        });\r\n      } else {\r\n        this.setState({ user: '', roles: '' });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogin = async (username, password) => {\r\n    try {\r\n      await login(username, password);\r\n      this.setState({\r\n        user: localStorage.getItem('user'),\r\n        roles: localStorage.getItem('roles')\r\n      });\r\n    } catch (error) {\r\n      window.console.error(error);\r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 400:\r\n            window.alert(error.response.data.message);\r\n            return;\r\n          default:\r\n            window.alert(\r\n              'Sorry, there was an unknown login problem, please try again.'\r\n            );\r\n        }\r\n        window.alert(\r\n          'Sorry, there was an unknown login problem, please try again.'\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.setState({ user: '', roles: '' });\r\n    logout();\r\n  };\r\n\r\n  render() {\r\n    const { isActive, roles, user } = this.state;\r\n    return (\r\n      <>\r\n        <SnackbarProvider\r\n          maxSnack={1}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          preventDuplicate\r\n        >\r\n          <Masthead\r\n            roles={roles}\r\n            user={user}\r\n            isActive={isActive}\r\n            onLogin={this.handleLogin}\r\n            onLogout={this.handleLogout}\r\n          />\r\n\r\n          <section id=\"main-content-area\" className=\"row\" role=\"main\">\r\n            <main className=\"column\">\r\n              <Switch>\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/edit/:nid\"\r\n                  component={ResourceEdit}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/create\"\r\n                  component={ResourceCreate}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/:cid/attribute/:aid/settings\"\r\n                  component={AttributeSettings}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:cid/manage-attributes\"\r\n                  component={ManageAttributes}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:domainId?\"\r\n                  component={ManageCompetencies}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/competency/details/:cid\"\r\n                  component={CompetencyDetails}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/:id/settings\"\r\n                  component={CompetencySettings}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version\"\r\n                  component={CompetencyList}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resources/:id/map/:framework\"\r\n                  component={AttributeMap}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resources/:resource/demap/:attribute\"\r\n                  component={AttributeDemap}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/training-resources/:id\"\r\n                  component={ResourceDetails}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/all-training-resources\"\r\n                  component={ResourcesList}\r\n                />\r\n                <Route\r\n                  path=\"/training-resources-home\"\r\n                  component={ResourcesHome}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/user/change/password\"\r\n                  component={ChangePassword}\r\n                />\r\n                <Route path=\"/about\" component={About} />\r\n                <Route path=\"/\" component={Frameworks} />\r\n              </Switch>\r\n            </main>\r\n          </section>\r\n        </SnackbarProvider>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Root;\r\n\r\nclass ProtectedRoute extends Component {\r\n  render() {\r\n    const { component: Component, condition, ...props } = this.props;\r\n    return (\r\n      <Route\r\n        {...props}\r\n        render={props =>\r\n          condition ? <Component {...props} /> : <Redirect to=\"/\" />\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\n\r\nimport Root from './app/containers/Root';\r\nimport Modal from 'react-modal';\r\n\r\nconst root = document.getElementById('root');\r\nReactDOM.render(\r\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <Root />\r\n  </BrowserRouter>,\r\n  root\r\n);\r\n\r\nModal.setAppElement(root);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meter\":\"progress-bar_meter__2axTP\",\"progress\":\"progress-bar_progress__3d3PT\"};"],"sourceRoot":""}