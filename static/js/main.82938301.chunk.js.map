{"version":3,"sources":["shared/components/progress-bar/progress-bar.jsx","app/containers/navigation/Navigation.jsx","app/containers/login-form/LoginForm.jsx","app/containers/masthead/Masthead.jsx","shared/components/edit-inline/EditInline.tsx","app/containers/simple-form/SimpleForm.tsx","app/components/error-loading/ErrorLoading.tsx","app/services/http/headers.js","app/services/http/http.js","app/services/competency/body.js","app/services/competency/competency.js","app/services/active-requests/active-requests.js","app/services/util/util.js","app/containers/ManageAttributes.jsx","app/containers/ManageCompetencies.jsx","app/services/courses/courses.js","app/containers/CompetencyDetails.jsx","app/components/competency-list/CompetencyList.jsx","app/components/domain-list/DomainList.jsx","app/containers/courses/Courses.jsx","app/containers/CompetencyList.jsx","app/containers/ResourceEdit.jsx","app/containers/ResourceCreate.jsx","app/containers/AttributeMap.jsx","app/containers/ResourceDetails.jsx","app/containers/ResourcesList.jsx","app/containers/ChangePassword.jsx","app/components/framework-button/FrameworkButton.jsx","app/components/framework-buttons/FrameworkButtons.jsx","app/containers/Frameworks.jsx","app/services/auth/auth.js","app/containers/Root.jsx","index.jsx","shared/components/progress-bar/progress-bar.module.css"],"names":["ProgressBar","_ref","isActive","react_default","a","createElement","Fragment","className","concat","styles","progress","role","meter","defaultProps","$","window","Navigation","navRef","React","createRef","logout","onLogout","_this","props","this","current","foundation","_this$props","roles","user","frameworkResources","tabIndex","react_router_dom","to","trainingResources","userDropdown","onClick","ref","data-dropdown-menu","data-description","includes","Component","LoginForm","state","username","password","onChange","event","setState","Object","defineProperty","currentTarget","name","value","submit","onSubmit","_this$state","_this2","_this$state2","type","autoComplete","placeholder","aria-hidden","Masthead","onLogin","data-sticky-container","id","data-sticky","data-sticky-on","data-top-anchor","data-btm-anchor","navigation_Navigation","login_form_LoginForm","progress_bar","defaultState","oriValue","active","EditInline","selfRef","inputRef","toggleActive","contains","target","reset","change","render","style","staticElement","aria-label","key","text","document","addEventListener","removeEventListener","prevProps","prevState","setTimeout","focus","newValue","uuid","SimpleForm","preventDefault","onCreate","trim","options","length","title","selectOptions","map","description","required","ErrorLoading","message","HeadersService","classCallCheck","instance","Accept","Content-Type","X-CSRF-Token","localStorage","getItem","Authorization","HttpService","headers","Headers","url","axios","get","body","post","withCredentials","patch","BodyService","domainId","domainUuid","_links","href","apiUrl","target_id","_embedded","self","lang","_links2","_embedded2","_ref2","attributeTypeId","attributeTypeUuid","competencyId","competencyUuid","mutate","_ref3","process","CompetencyService","http","framework","response","data","Body","createAttribute","createCompetency","mutateCompetency","attributeId","mutateAttribute","ActiveRequestsService","counter","callbacks","fn","push","index","forEach","safeFlat","array","Array","prototype","flat","reduce","acc","cur","toConsumableArray","tagsReg","RegExp","removeHtmlTags","htmlString","replaceBy","arguments","undefined","replace","ManageAttributes","activeRequests","competencyService","match","params","frameworkName","attributeTypes","domainName","cid","competencyName","competencyData","loadingError","_callee","regenerator_default","wrap","_context","prev","next","startRequest","find","attribute","fetchCompetency","t0","enqueueSnackbar","variant","finishRequest","finish","stop","scroll","Promise","all","fetchAllFrameworks","getAllFrameworks","allFrameworks","frameworkMatch","filter","item","toLowerCase","attribute_types","getFramework","frameworkData","competencyMatch","filterByCompetencyId","domainTitle","domains","domain","competencies","competency","nid","patchAttribute","isArchived","attributeType","parentIndex","attributes","EditInline_EditInline","editAttribute","toggleArchive","archived","_this3","getAttributeRows","error_loading_ErrorLoading","SimpleForm_SimpleForm","getAttributeList","withSnackbar","ManageCompetencies","competencyTypes","fetchFramework","refs","scrollIntoView","patchCompetency","archive","getCompetencyRows","_this4","editCompetency","bind","_this$state3","getCompetencyList","CoursesService","CompetencyDetails","coursesService","attributeDefs","resources","getAttributes","getResources","getCourses","resource","competency_profile","profile","objectSpread","competencyDetails","def","resourceBlock","CompetencyList","attributesGrouped","disable","groupBy","keys","Collapsible_default","trigger","triggerWhenOpen","DomainList","childIndex","components_competency_list_CompetencyList","Courses","possibleConstructorReturn","getPrototypeOf","call","courses","filteredCourses","onFilter","term","e","course","test","allCourses","filterCourses","filteredProfiles","modifiedCourse","filteredDomains","filteredCompetencies","domainList","domain_list_DomainList","esm","courses_Courses","ResourceEdit","csrf","updateFlag","path","location","pathname","split","dates","dates2","target_audience","learning_outcomes","keywords","organisers","trainers","evt","newContent","editor","getData","csrfURL","fetch","then","Response","findresponse2","fetchResource","json","findresponse","alert","history","console","log","checkUser","start_date","end_date","ResourceEdit_EditForm","EditForm","setRedirect","redirect","handleTitle","assertThisInitialized","handleDates","handleDates2","handleType","handleDesc","handleLocation","handleURL","handleTargetAudience","handleLearningOutcomes","handleKeywords","handleOrganisers","handleTrainers","_this5","_this6","context","router","method","cookies","JSON","stringify","field_dates","field_end_date","field_type","field_description","format","field_location","field_url","field_target_audience","field_learning_outcomes","field_keywords","field_organisers","field_trainers","handleSubmit","lib_default","content","events","activeClass","contextTypes","PropTypes","object","EditResources","react_router","exact","component","ResourceCreate","changeDescription","changeTargetAudience","changeLearningOutcomes","changeOrganisers","changeTrainers","token","credentials","CreateResources","AttributeMap","selectedFramework","resourceID","frameworkdetails","frameworkUUID","selectedAttributes","selectedCompetencies","resourceDetails","handleSelect","checkedAttributes","attributeIDs","i","payload","embedded_string","handleCloseModal","childItems","getElementsByName","checked","getAttribute","splice","indexOf","getElementById","is","lists","each","attr","fetchCompetencyList","fetchFrameworkDetails","findresponse1","nextProps","nextState","frameworkDetails","frameworkDefs","domainsOptions","attributeTypeOptions","ikey","attribute_type","data-id","ListOfCompetencies","did","defaultChecked","data-test","handleAllCheck","marginLeft","marginBottom","data-uuid","handleAttributeClick","ResourceDetails","frameworks","resourcePath","showModal","handleOpenModal","temp","fetchData","resourcesURL","findresponse3","display","margin","Resource","date","Parser","mappingBlock","overflow","react_modal_lib_default","isOpen","overlayClassName","contentLabel","text-align","toUpperCase","data-close","containers_AttributeMap","ResDetails","ResourcesList","filterType","archiveHandle","rid","status","archivedStatus","field_archived","toLocaleLowerCase","ListOfResources","substr","filterTypeHandle","Resources","ChangePassword","handlePasswordChange","old","new1","uid","new","resp","reload","FrameworkButton","slice","data-equalizer-watch","height","src","field_logo","alt","data-icon","FrameworkButtons","data-equalizer","framework_button_FrameworkButton","Frameworks","getAllFrameworksDetails","framework_buttons_FrameworkButtons","loginUrl","logoutUrl","login","_x","_x2","_login","apply","pass","sent","setItem","current_user","csrf_token","logout_token","abrupt","removeItem","Root","handleActiveRequests","hasPendingRequests","detectUserChangesFromOtherTabs","handleLogin","error","t1","handleLogout","foundationExtendEBI","subcription","build","maxSnack","anchorOrigin","vertical","horizontal","preventDuplicate","masthead_Masthead","Root_ProtectedRoute","condition","Competencies","ProtectedRoute","objectWithoutProperties","assign","ReactDOM","basename","containers_Root","module","exports"],"mappings":"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","file":"static/js/main.82938301.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './progress-bar.module.css';\r\n\r\nfunction ProgressBar({ isActive }) {\r\n\r\n  return (\r\n      <React.Fragment>\r\n      { isActive &&\r\n    <div className={`warning progress ${styles.progress}`} role=\"progressbar\">\r\n      <div className={`progress-meter ${styles.meter}`}/>\r\n    </div>\r\n    }\r\n      </React.Fragment>\r\n  );\r\n}\r\n\r\nProgressBar.defaultProps = {\r\n  isActive: false\r\n};\r\n\r\nProgressBar.propTypes = {\r\n  isActive: PropTypes.bool\r\n};\r\n\r\nexport default ProgressBar;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst $ = window.$;\r\n\r\nclass Navigation extends Component {\r\n  navRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    $(this.navRef.current).foundation();\r\n  }\r\n\r\n  logout = () => {\r\n    const { onLogout } = this.props;\r\n    onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user } = this.props;\r\n\r\n    const frameworkResources = (\r\n      <li>\r\n        <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n          tabIndex=\"0\"\r\n          className=\"dropdown-on-dark-background\"\r\n        >\r\n          Manage Competencies\r\n        </a>\r\n        <ul className=\"menu vertical\">\r\n          <li>\r\n            <Link to=\"/framework/bioexcel/manage/competencies\">BioExcel</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/corbel/manage/competencies\">CORBEL</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/iscb/manage/competencies\">ISCB</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/ritrain/manage/competencies\">RITrain</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/nhs/manage/competencies\">NHS</Link>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    );\r\n\r\n    const trainingResources = (\r\n      <li>\r\n        <Link to=\"/all-training-resources\">Manage Training Resources</Link>\r\n      </li>\r\n    );\r\n\r\n    const userDropdown = (\r\n      <li>\r\n        <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n          tabIndex=\"0\"\r\n          className=\"dropdown-on-light-background\"\r\n        >\r\n          <i className=\"fas fa-user\" /> Hi {user}\r\n        </a>\r\n        <ul className=\"menu vertical\">\r\n          <li>\r\n            <Link to={'/user/change/password'}>Change password</Link>\r\n          </li>\r\n          <li>\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.logout}\r\n            >\r\n              Logout\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    );\r\n\r\n    return (\r\n      <nav ref={this.navRef}>\r\n        <ul\r\n          className=\"dropdown menu float-left\"\r\n          data-dropdown-menu\r\n          data-description=\"navigational\"\r\n        >\r\n          {roles.includes('framework_manager') && frameworkResources}\r\n          {roles.includes('content_manager') && trainingResources}\r\n        </ul>\r\n        <ul\r\n          className=\"dropdown menu float-right\"\r\n          data-dropdown-menu\r\n          data-description=\"user tasks\"\r\n        >\r\n          {userDropdown}\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass LoginForm extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ [event.currentTarget.name]: event.currentTarget.value });\r\n  };\r\n\r\n  submit = () => {\r\n    const { onSubmit } = this.props;\r\n    const { username, password } = this.state;\r\n    if (username && password) {\r\n      onSubmit(username, password);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n    return (\r\n      <nav>\r\n        {/* The wrapping in an `ul.menu.float-left > li` is necessary for the sticky header to work */}\r\n        <ul className=\"menu float-left small-12\">\r\n          <li className=\"small-12 margin-bottom-large\">\r\n            <label className=\"columns small-4 medium-3 large-2 margin-top-large\">\r\n              <input\r\n                value={username}\r\n                name=\"username\"\r\n                onChange={event => this.onChange(event)}\r\n                type=\"text\"\r\n                autoComplete=\"username\"\r\n                placeholder=\"Username\"\r\n              />\r\n            </label>\r\n            <label className=\"columns small-4 medium-3 large-2 margin-top-large\">\r\n              <input\r\n                value={password}\r\n                name=\"password\"\r\n                onChange={event => this.onChange(event)}\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n                placeholder=\"Password\"\r\n              />\r\n            </label>\r\n            <div className=\"columns small-4 medium-6 large-8 margin-top-large\">\r\n              <button\r\n                className=\"button\"\r\n                type=\"button\"\r\n                onClick={() => this.submit()}\r\n              >\r\n                <i className=\"fa fa-key\" aria-hidden=\"true\" /> Login\r\n              </button>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ProgressBar from '../../../shared/components/progress-bar/progress-bar';\r\nimport Navigation from '../navigation/Navigation';\r\nimport LoginForm from '../login-form/LoginForm';\r\n\r\nclass Masthead extends Component {\r\n  static propTypes = {\r\n    user: PropTypes.string.isRequired,\r\n    roles: PropTypes.string.isRequired,\r\n    onLogin: PropTypes.func.isRequired,\r\n    onLogout: PropTypes.func.isRequired\r\n  };\r\n\r\n  onLogin = (username, password) => {\r\n    this.props.onLogin(username, password);\r\n  };\r\n\r\n  onLogout = () => {\r\n    this.props.onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user, isActive } = this.props;\r\n\r\n    return (\r\n      <div data-sticky-container>\r\n        <header\r\n          id=\"masthead\"\r\n          className=\"masthead\"\r\n          data-sticky\r\n          data-sticky-on=\"large\"\r\n          data-top-anchor=\"main-content-area:top\"\r\n          data-btm-anchor=\"main-content-area:bottom\"\r\n        >\r\n          <div className=\"masthead-inner row\">\r\n            <div className=\"columns medium-12\" id=\"local-title\">\r\n              <h1>\r\n                <Link to=\"/\">Competency Mapper</Link>\r\n              </h1>\r\n            </div>\r\n            {user && roles ? (\r\n              <Navigation roles={roles} user={user} onLogout={this.onLogout} />\r\n            ) : (\r\n              <LoginForm onSubmit={this.onLogin} />\r\n            )}\r\n          </div>\r\n          <ProgressBar isActive={isActive} />\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Masthead;\r\n","import React, { Component } from 'react';\r\n\r\nimport './EditInline.css';\r\n\r\nconst defaultProps = {\r\n  style: {} as Record<string, string | number>,\r\n  text: '',\r\n  change: (newValue: string) => {},\r\n  staticElement: 'div'\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  oriValue: '',\r\n  value: '',\r\n  active: false\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class EditInline extends Component<Props, State> {\r\n  static defaultProps = defaultProps; // No idea why the props are marked as optional (see '!' in the code below)\r\n  readonly state: State = defaultState;\r\n  selfRef = React.createRef<HTMLDivElement>();\r\n  inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  componentDidMount() {\r\n    const { text } = this.props;\r\n    this.setState({ value: text!, oriValue: text! });\r\n    document.addEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props, prevState: State) {\r\n    const { active } = this.state;\r\n    if (active && !prevState.active) {\r\n      // Unable to focus on the input element.\r\n      // this.inputRef.current && this.inputRef.current.focus();\r\n\r\n      // Dirty: The only way I was able to focus on the input element.\r\n      setTimeout(\r\n        () => this.inputRef.current && this.inputRef.current.focus(),\r\n        0\r\n      );\r\n    }\r\n  }\r\n\r\n  toggleActive = (event: MouseEvent) => {\r\n    if (\r\n      this.selfRef.current &&\r\n      this.selfRef.current.contains(event.target as Node)\r\n    ) {\r\n      this.setState({ active: true });\r\n      return;\r\n    }\r\n    this.reset();\r\n  };\r\n\r\n  onChange(value: string) {\r\n    this.setState({ value });\r\n  }\r\n\r\n  reset = () => {\r\n    const { oriValue, active } = this.state;\r\n    if (active) {\r\n      this.setState({ active: false, value: oriValue });\r\n    }\r\n  };\r\n\r\n  submit = () => {\r\n    const { change } = this.props;\r\n    const { value } = this.state;\r\n    change!(value);\r\n    this.setState({ active: false, oriValue: value });\r\n  };\r\n\r\n  render = () => {\r\n    const { style, staticElement } = this.props;\r\n    const { value, active } = this.state;\r\n\r\n    if (!active) {\r\n      return React.createElement(staticElement!, { style, ref: this.selfRef }, [\r\n        value,\r\n        <i\r\n          key=\"dummy\"\r\n          className=\"icon icon-common icon-edit icon-left-spacer\"\r\n        />\r\n      ]);\r\n    }\r\n\r\n    return (\r\n      <div className=\"edit-inline-container\" ref={this.selfRef}>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inner-input\"\r\n          value={value}\r\n          onChange={event => this.onChange(event.target.value)}\r\n          ref={this.inputRef}\r\n          // autoFocus={true} // It only works when it is rendered after mounting\r\n        />\r\n        <div className=\"edit-inline-controls\">\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.submit}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-check\"\r\n              aria-label=\"accept changes\"\r\n            />\r\n          </button>\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.reset}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-undo\"\r\n              aria-label=\"undo changes\"\r\n            />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\ntype Props = {\r\n  title: string;\r\n  placeholder: string;\r\n  options: Record<'description' | 'uuid', string>[];\r\n  onCreate(newValue: string, uuid: string): any;\r\n};\r\n\r\nconst defaultState = {\r\n  value: '',\r\n  uuid: ''\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class SimpleForm extends Component<Props, State> {\r\n  readonly state = defaultState;\r\n\r\n  componentDidMount() {\r\n    const { options } = this.props;\r\n    if (options.length) {\r\n      const { uuid } = options[0];\r\n      this.setState({ uuid });\r\n    }\r\n  }\r\n\r\n  onChange = (event: React.FormEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    event.preventDefault();\r\n    const { value } = event.currentTarget;\r\n    const name = event.currentTarget.name;\r\n    // https://github.com/Microsoft/TypeScript/issues/13948\r\n    if (name === 'uuid') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'value') {\r\n      this.setState({ [name]: value });\r\n    }\r\n  };\r\n\r\n  onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const { onCreate } = this.props;\r\n    const { value, uuid } = this.state;\r\n    if (value.trim() && uuid) {\r\n      onCreate(value, uuid);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, placeholder, options } = this.props;\r\n    const { value, uuid } = this.state;\r\n\r\n    const selectOptions = options.map(({ description, uuid }) => (\r\n      <option key={uuid} value={uuid}>\r\n        {description}\r\n      </option>\r\n    ));\r\n\r\n    return (\r\n      <form onSubmit={this.onSubmit} className=\"callout\">\r\n        <h4>{title}</h4>\r\n        <div className=\"row\">\r\n          <div className=\"column large-7\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder={placeholder}\r\n              name=\"value\"\r\n              value={value}\r\n              required\r\n              onChange={this.onChange}\r\n            />\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <select name=\"uuid\" value={uuid} required onChange={this.onChange}>\r\n              {selectOptions}\r\n            </select>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <input type=\"submit\" className=\"button\" value=\"Create\" />\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst defaultProps = {\r\n  message: 'Sorry, there was a problem when fetching the data!',\r\n  style: {} as Record<string, string | number>\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nexport const ErrorLoading: React.FC<Props> = ({ message, style }) => {\r\n  return (\r\n    <div className=\"margin-top-large callout alert\" style={style}>\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nErrorLoading.defaultProps = defaultProps;\r\n\r\nexport default ErrorLoading;\r\n","class HeadersService {\r\n  static instance;\r\n\r\n  constructor() {\r\n    if (HeadersService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    HeadersService.instance = this;\r\n  }\r\n\r\n  get() {\r\n    const csfrToken = window.localStorage.getItem('csrf_token');\r\n    return {\r\n      Accept: 'application/hal+json',\r\n      'Content-Type': 'application/hal+json',\r\n      'X-CSRF-Token': csfrToken,\r\n      Authorization: 'Basic'\r\n    };\r\n  }\r\n}\r\n\r\nexport default HeadersService;\r\n","import Headers from './headers';\r\nimport axios from 'axios';\r\n\r\nclass HttpService {\r\n  static instance;\r\n  headers = new Headers();\r\n\r\n  constructor() {\r\n    if (HttpService.instance) {\r\n      return HttpService.instance;\r\n    }\r\n\r\n    HttpService.instance = this;\r\n  }\r\n\r\n  get(url) {\r\n    // return this.executeFetch(url);\r\n    return axios.get(url);\r\n  }\r\n\r\n  post(url, body) {\r\n    // return this.executeFetch(url, {\r\n    //   method: 'POST',\r\n    //   credentials: 'include',\r\n    //   headers: this.headers.get(),\r\n    //   body: body,\r\n    // });\r\n    return axios.post(url, body, {\r\n      headers: this.headers.get(),\r\n      withCredentials: true\r\n    });\r\n  }\r\n\r\n  patch(url, body) {\r\n    //return this.executeFetch(url, {\r\n    //  method: 'PATCH',\r\n    //  credentials: 'include',\r\n    //  headers: this.headers.get(),\r\n    //  body: body,\r\n    //});\r\n    return axios.patch(url, body, {\r\n      headers: this.headers.get(),\r\n      withCredentials: true\r\n    });\r\n  }\r\n\r\n  // async executeFetch(url, options = {}) {\r\n  //   try {\r\n  //     const response = await fetch(url, options);\r\n  //     if (!response.ok) {\r\n  //       return this.handleNotOkResponses(response);\r\n  //     }\r\n  //     return response;\r\n  //   } catch (error) {\r\n  //     return this.handleNetworkErrors(error);\r\n  //   }\r\n  // }\r\n\r\n  // handleNetworkErrors(error) {\r\n  //   this.inform('Network problem!');\r\n  //   return Promise.reject(error);\r\n  // }\r\n\r\n  // handleNotOkResponses(response) {\r\n  //   const is500Error = response.status >= 500 && response.status < 600;\r\n\r\n  //   if (is500Error) {\r\n  //     this.inform('Unknown server error!');\r\n  //   }\r\n\r\n  //   return Promise.reject(response);\r\n  // }\r\n\r\n  // inform(message) {\r\n  //   // TODO: inform error to the user through a toast service, for example.\r\n  //   // window.alert(message);\r\n  // }\r\n}\r\n\r\nexport default HttpService;\r\n","import { apiUrl } from './competency';\r\n\r\nclass BodyService {\r\n  static createCompetency({ description, domainId, domainUuid }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/competency`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n        }\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'competency'\r\n        }\r\n      ],\r\n\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static createAttribute({\r\n    description,\r\n    attributeTypeId,\r\n    attributeTypeUuid,\r\n    competencyId,\r\n    competencyUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/attribute`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n        }\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'attribute'\r\n        }\r\n      ],\r\n\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static mutateCompetency(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateAttribute(key, value) {\r\n    return BodyService.mutate(key, value, 'attribute');\r\n  }\r\n\r\n  static mutate(key, value, target) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/${target}`\r\n        }\r\n      },\r\n      [key]: [\r\n        {\r\n          value: value\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: target\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\nexport default BodyService;\r\n","import HttpService from '../http/http';\r\nimport Body from './body';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nclass CompetencyService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CompetencyService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CompetencyService.instance = this;\r\n  }\r\n\r\n  async getFramework(framework) {\r\n    const response = await this.http.get(\r\n      `${apiUrl}/api/v1/framework/${framework}?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getAllFrameworks() {\r\n    const response = await this.http.get(\r\n      `${apiUrl}/api/v1/framework/?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getAllFrameworksDetails() {\r\n    const response = await this.http.get(`${apiUrl}/api/frameworks`);\r\n    return response.data;\r\n  }\r\n\r\n  async createAttribute(options) {\r\n    const response = await this.http.post(\r\n      `${apiUrl}/node?_format=hal_json`,\r\n      Body.createAttribute(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async createCompetency(options) {\r\n    const response = await this.http.post(\r\n      `${apiUrl}/node?_format=hal_json`,\r\n      Body.createCompetency(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetency(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `${apiUrl}/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetency(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttribute(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `${apiUrl}/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CompetencyService;\r\n","class ActiveRequestsService {\r\n  static instance;\r\n\r\n  constructor() {\r\n    if (ActiveRequestsService.instance) {\r\n      return ActiveRequestsService.instance;\r\n    }\r\n\r\n    ActiveRequestsService.instance = this;\r\n\r\n    this.counter = 0;\r\n    this.callbacks = [];\r\n  }\r\n\r\n  addEventListener(fn) {\r\n    return this.callbacks.push(fn);\r\n  }\r\n\r\n  removeEventListener(index) {\r\n    return delete this.callbacks[index - 1];\r\n  }\r\n\r\n  startRequest() {\r\n    if (this.counter === 0) {\r\n      this.callbacks.forEach(fn => fn && fn(true));\r\n    }\r\n    ++this.counter;\r\n  }\r\n\r\n  finishRequest() {\r\n    if (this.counter === 1) {\r\n      this.callbacks.forEach(fn => fn && fn(false));\r\n    }\r\n\r\n    if (this.counter > 0) {\r\n      --this.counter;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ActiveRequestsService;\r\n","// In modern browser (es2018), instead of `reduce` it is possible to call `flat`\r\nexport const safeFlat = array =>\r\n  Array.prototype.flat\r\n    ? array.flat()\r\n    : array.reduce((acc, cur) => [...acc, ...cur], []);\r\n\r\nconst tagsReg = new RegExp('</?.+?/?>', 'g');\r\n\r\nexport const removeHtmlTags = (htmlString, replaceBy = '') =>\r\n  htmlString.replace(tagsReg, replaceBy);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat } from '../services/util/util';\r\n\r\nclass ManageAttributes extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    // framework level\r\n    framework: this.props.match.params.framework,\r\n    frameworkName: '',\r\n    attributeTypes: [], // defined at framework level\r\n\r\n    // domain level\r\n    domainId: '',\r\n    domainName: '',\r\n\r\n    // competency level\r\n    competencyId: this.props.match.params.cid,\r\n    competencyUuid: '',\r\n    competencyName: '',\r\n    competencyData: [],\r\n\r\n    loadingError: false\r\n  };\r\n\r\n  async componentDidMount() {\r\n    window.scroll(0, 0);\r\n    this.activeRequests.startRequest();\r\n    await Promise.all([this.fetchAllFrameworks(), this.fetchCompetency()]);\r\n  }\r\n\r\n  async fetchAllFrameworks() {\r\n    const { framework } = this.state;\r\n    try {\r\n      const allFrameworks = await this.competencyService.getAllFrameworks();\r\n      const frameworkMatch = allFrameworks.filter(\r\n        item => item.name.toLowerCase() === framework\r\n      );\r\n\r\n      if (frameworkMatch.length) {\r\n        const attributeTypes = frameworkMatch[0].attribute_types.map(\r\n          attribute => ({ description: attribute.title, uuid: attribute.uuid })\r\n        );\r\n        this.setState({ attributeTypes });\r\n      }\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchCompetency() {\r\n    const { framework } = this.state;\r\n\r\n    try {\r\n      const frameworkData = await this.competencyService.getFramework(\r\n        framework\r\n      );\r\n      const competencyMatch = this.filterByCompetencyId(\r\n        frameworkData,\r\n        this.state.competencyId\r\n      );\r\n\r\n      if (competencyMatch.length) {\r\n        this.setState({\r\n          frameworkName: frameworkData[0].title,\r\n          domainName: competencyMatch[0].domainTitle,\r\n          domainId: competencyMatch[0].domainId,\r\n          competencyUuid: competencyMatch[0].uuid,\r\n          competencyName: competencyMatch[0].title,\r\n          competencyData: competencyMatch[0]\r\n        });\r\n      }\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  filterByCompetencyId(data, id) {\r\n    return safeFlat(\r\n      data.map(item =>\r\n        safeFlat(\r\n          item.domains.map(domain =>\r\n            domain.competencies\r\n              .filter(competency => competency.id === id)\r\n              .map(competency => {\r\n                competency.domainTitle = domain.title;\r\n                competency.domainId = domain.nid;\r\n                return competency;\r\n              })\r\n          )\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  createAttribute = async (description, attributeTypeUuid) => {\r\n    const { competencyId, competencyUuid, attributeTypes } = this.state;\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const attributeTypeId = attributeTypes.find(\r\n        attribute => attribute.uuid === attributeTypeUuid\r\n      ).id;\r\n      await this.competencyService.createAttribute({\r\n        description,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid\r\n      });\r\n\r\n      this.fetchCompetency();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editAttribute(attributeId, title) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(attributeId, 'title', title);\r\n      this.fetchCompetency();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(attributeId, isArchived) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(\r\n        attributeId,\r\n        'field_archived',\r\n        isArchived === '1' ? false : true\r\n      );\r\n      this.fetchCompetency();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  getAttributeRows(attributeType, parentIndex) {\r\n    const { competencyData } = this.state;\r\n\r\n    return competencyData.attributes\r\n      .filter(attribute => attribute.type === attributeType.description)\r\n      .map((attribute, index) => {\r\n        return (\r\n          <tr key={attribute.uuid}>\r\n            <td>{`${parentIndex}.${index + 1}`}</td>\r\n            <td>\r\n              <InlineEdit\r\n                text={attribute.title}\r\n                change={newValue => this.editAttribute(attribute.id, newValue)}\r\n              />\r\n            </td>\r\n            <td>\r\n              <button\r\n                className=\"cursor\"\r\n                onClick={() =>\r\n                  this.toggleArchive(attribute.id, attribute.archived)\r\n                }\r\n              >\r\n                {attribute.archived === '1' ? (\r\n                  <span className=\"fas fa-toggle-on\">\r\n                    <span>Archived</span>\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"fas fa-toggle-off\" />\r\n                )}\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n  }\r\n\r\n  getAttributeList() {\r\n    const { attributeTypes } = this.state;\r\n    return attributeTypes.map((attributeType, index) => (\r\n      <React.Fragment key={attributeType.uuid}>\r\n        <tr className=\"secondary-background-important white-color\">\r\n          <td>{index + 1}</td>\r\n          <td>\r\n            <strong>\r\n              <em>{attributeType.description}</em>\r\n            </strong>\r\n          </td>\r\n          <td className=\"small-1\">Archive</td>\r\n        </tr>\r\n        {this.getAttributeRows(attributeType, index + 1)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      attributeTypes,\r\n      domainId,\r\n      domainName,\r\n      competencyName,\r\n      competencyData,\r\n      loadingError\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (competencyData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage attributes</h2>\r\n        <h4>\r\n          <Link to={`/framework/${framework}/manage/competencies`}>\r\n            {frameworkName}\r\n          </Link>\r\n          {' / '}\r\n          <Link to={`/framework/${framework}/manage/competencies/${domainId}`}>\r\n            {domainName}\r\n          </Link>\r\n          {' / '}\r\n          {competencyName}\r\n        </h4>\r\n\r\n        <SimpleForm\r\n          title=\"Create new attribute\"\r\n          placeholder=\"Attribute description\"\r\n          options={attributeTypes}\r\n          onCreate={this.createAttribute}\r\n        />\r\n\r\n        <table>\r\n          <tbody>{this.getAttributeList()}</tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageAttributes);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nclass ManageCompetencies extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkName: '',\r\n    frameworkData: [],\r\n    competencyTypes: [],\r\n    loadingError: false\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework } = props.match.params;\r\n    if (framework !== state.framework) {\r\n      return {\r\n        framework,\r\n        frameworkData: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, domainId } = this.props.match.params;\r\n    await this.fetchFramework(framework);\r\n\r\n    if (domainId) {\r\n      setTimeout(() => {\r\n        const ref = this.refs[domainId];\r\n        if (ref) {\r\n          ref.scrollIntoView();\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkData, loadingError } = this.state;\r\n    if (framework !== prevState.framework) {\r\n      if (frameworkData.length === 0 && !loadingError) {\r\n        this.fetchFramework(framework);\r\n      }\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const frameworkData = await this.competencyService.getFramework(\r\n        framework\r\n      );\r\n\r\n      if (frameworkData.length) {\r\n        const competencyTypes = frameworkData[0].domains.map(domain => ({\r\n          description: domain.title,\r\n          uuid: domain.uuid\r\n        }));\r\n        this.setState({\r\n          frameworkName: frameworkData[0].title,\r\n          frameworkData,\r\n          competencyTypes\r\n        });\r\n      }\r\n    } catch (e) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  createCompetency = async (description, domainUuid) => {\r\n    const { framework, frameworkData } = this.state;\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const domainId = frameworkData[0].domains.find(\r\n        domain => domain.uuid === domainUuid\r\n      ).nid;\r\n      await this.competencyService.createCompetency({\r\n        description,\r\n        domainId,\r\n        domainUuid\r\n      });\r\n      this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editCompetency(cid, title) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetency(cid, 'title', title);\r\n      const { framework } = this.state;\r\n      this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(cid, isArchived) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const archive = isArchived ? false : true;\r\n      await this.competencyService.patchCompetency(\r\n        cid,\r\n        'field_archived',\r\n        archive\r\n      );\r\n      const { framework } = this.state;\r\n      this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  getCompetencyList() {\r\n    const { frameworkData } = this.state;\r\n    return frameworkData[0].domains.map((domain, parentIndex) => (\r\n      <React.Fragment key={domain.nid}>\r\n        <tr\r\n          className=\"secondary-background-important white-color\"\r\n          ref={domain.nid}\r\n        >\r\n          <td>{parentIndex + 1}</td>\r\n          <td>\r\n            <h4>{domain.title}</h4>\r\n          </td>\r\n          <td className=\"small-1\">Archive</td>\r\n          <td>Manage attributes</td>\r\n        </tr>\r\n        {this.getCompetencyRows(domain.competencies, parentIndex)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  getCompetencyRows(competencies, parentIndex) {\r\n    const { framework } = this.state;\r\n    return competencies.map((competency, index) => (\r\n      <tr key={competency.id}>\r\n        <td>\r\n          {parentIndex + 1}.{index + 1}\r\n        </td>\r\n        <td>\r\n          <InlineEdit\r\n            text={competency.title}\r\n            change={newValue => this.editCompetency(competency.id, newValue)}\r\n          />\r\n        </td>\r\n        <td>\r\n          <button\r\n            className=\"cursor\"\r\n            onClick={this.toggleArchive.bind(\r\n              this,\r\n              competency.id,\r\n              competency.archived\r\n            )}\r\n          >\r\n            {competency.archived === 1 ? (\r\n              <span className=\"fas fa-toggle-on\">\r\n                <span>Archived</span>\r\n              </span>\r\n            ) : (\r\n              <span className=\"fas fa-toggle-off\" />\r\n            )}\r\n          </button>\r\n        </td>\r\n        <td>\r\n          <Link\r\n            to={`/framework/${framework}/manage/competencies/${\r\n              competency.id\r\n            }/manage-attributes`}\r\n          >\r\n            <i className=\"fas fa-sitemap\" />\r\n          </Link>\r\n        </td>\r\n      </tr>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      frameworkName,\r\n      frameworkData,\r\n      competencyTypes,\r\n      loadingError\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (frameworkData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage framework</h2>\r\n        <h4>{frameworkName}</h4>\r\n\r\n        <SimpleForm\r\n          title=\"Create new competency\"\r\n          placeholder=\"Competency description\"\r\n          options={competencyTypes}\r\n          onCreate={this.createCompetency}\r\n        />\r\n\r\n        <table>\r\n          <tbody>{this.getCompetencyList()}</tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageCompetencies);\r\n","import HttpService from '../http/http';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nclass CoursesService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CoursesService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CoursesService.instance = this;\r\n  }\r\n\r\n  async getCourses() {\r\n    const response = await this.http.get(\r\n      `${apiUrl}/api/v1/training-resources/all?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CoursesService;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport CoursesService from '../services/courses/courses';\r\n\r\nclass CompetencyDetails extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  coursesService = new CoursesService();\r\n\r\n  state = {\r\n    framework: this.props.match.params.framework,\r\n    frameworkData: [],\r\n    competencyId: this.props.match.params.cid,\r\n    attributeDefs: [],\r\n    resources: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.getFramework(),\r\n        this.getAttributes(),\r\n        this.getResources()\r\n      ]);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async getFramework() {\r\n    const { framework } = this.state;\r\n    const frameworkData = await this.competencyService.getFramework(framework);\r\n\r\n    this.setState({\r\n      frameworkData\r\n    });\r\n  }\r\n\r\n  async getAttributes() {\r\n    const allFrameworks = await this.competencyService.getAllFrameworks();\r\n    const { framework } = this.state;\r\n    const frameworkMatch = allFrameworks.filter(\r\n      item => item.name.toLowerCase() === framework\r\n    );\r\n    if (frameworkMatch.length) {\r\n      const attributeDefs = frameworkMatch[0].attribute_types.map(\r\n        attribute => attribute.title\r\n      );\r\n      this.setState({ attributeDefs });\r\n    }\r\n  }\r\n\r\n  async getResources() {\r\n    try {\r\n      const resources = await this.coursesService.getCourses();\r\n      this.setState({ resources });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to retrieve training resources', {\r\n        variant: 'error'\r\n      });\r\n    }\r\n  }\r\n\r\n  resourceBlock() {\r\n    const { resources } = this.state;\r\n    return resources.map(resource =>\r\n      resource.competency_profile.map(profile =>\r\n        profile.domains.map(domain =>\r\n          domain.competencies\r\n            .filter(competency => competency.id === this.state.competencyId)\r\n            .map(competency => {\r\n              return (\r\n                <li key={resource.id}>\r\n                  <Link to={`/training-resources/${resource.id}`}>\r\n                    {resource.title}\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { competencyId, frameworkData, attributeDefs } = this.state;\r\n\r\n    const competencies = [];\r\n\r\n    frameworkData.forEach(item =>\r\n      item.domains.forEach(domain =>\r\n        domain.competencies.forEach(competency => {\r\n          if (competency.id === competencyId) {\r\n            competencies.push({\r\n              ...competency,\r\n              framework: item.title,\r\n              domain: domain.title\r\n            });\r\n          }\r\n        })\r\n      )\r\n    );\r\n\r\n    const competencyDetails = competencies.map(competency => (\r\n      <div key={competency.id}>\r\n        <div className=\"row\">\r\n          <div className=\"column large-12\">\r\n            <h4>\r\n              {' '}\r\n              {competency.framework} / {competency.domain}\r\n            </h4>\r\n            <h4>{competency.title}</h4>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"column large-8\">\r\n            <ul>\r\n              {attributeDefs.map(def => {\r\n                return (\r\n                  <div key={def}>\r\n                    <div className=\"margin-top-medium\">\r\n                      {' '}\r\n                      <strong>\r\n                        <em>{def}</em>\r\n                      </strong>\r\n                    </div>\r\n                    {competency.attributes.map(attribute => {\r\n                      if (attribute.type === def) {\r\n                        return <li key={attribute.id}>{attribute.title} </li>;\r\n                      }\r\n                      return null;\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n          <div className=\"column large-4\">\r\n            <div className=\"callout notice industry-background white-color\">\r\n              <p>Competency derived from:</p>\r\n              <p>No data available</p>\r\n            </div>\r\n            <div className=\"callout notice training-background white-color\">\r\n              <p>Training resources mapped to this competency</p>\r\n              <ul>{this.resourceBlock()}</ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"column large-12\">\r\n          <h3>Competency details</h3>\r\n          {competencyDetails}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(CompetencyDetails);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Collapsible from 'react-collapsible';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { groupBy } from 'lodash-es';\r\nimport './CompetencyList.css';\r\n\r\nfunction CompetencyList({\r\n  parentIndex,\r\n  index,\r\n  framework,\r\n  competency,\r\n  disable\r\n}) {\r\n  const attributesGrouped = groupBy(competency.attributes, 'type');\r\n  const attributesTypes = Object.keys(attributesGrouped);\r\n  const attributes = attributesTypes.map(type => {\r\n    const attributes = attributesGrouped[type].map(attribute => (\r\n      <li key={attribute.id}>{attribute.title}</li>\r\n    ));\r\n    return (\r\n      <div key={type}>\r\n        <em>{type}</em>\r\n        <ul>{attributes}</ul>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <tr>\r\n      <td>{`${parentIndex + 1}.${index + 1}`}</td>\r\n      <td>\r\n        <Collapsible\r\n          trigger={\r\n            <div className=\"open-close-title\">\r\n              <span>{competency.title}</span>\r\n              <span className=\"icon icon-common icon-plus float-right\">\r\n                <p className=\"show-for-sr\">show more</p>\r\n              </span>\r\n            </div>\r\n          }\r\n          triggerWhenOpen={\r\n            <div className=\"open-close-title\">\r\n              <span>{competency.title}</span>\r\n              <span className=\"icon icon-common icon-minus float-right\">\r\n                <p className=\"show-for-sr\">show less</p>\r\n              </span>\r\n            </div>\r\n          }\r\n        >\r\n          <div className=\"padding-left-large padding-top-large\">\r\n            <Link to={`${framework}/competency/details/${competency.id}`}>\r\n              <span className=\"float-right\">\r\n                <i className=\"icon icon-spacer icon-common icon-info\" />More\r\n                details\r\n              </span>\r\n            </Link>\r\n            {attributes}\r\n          </div>\r\n        </Collapsible>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nCompetencyList.defaultProps = {\r\n  parentIndex: 0,\r\n  index: 0,\r\n  disable: true\r\n};\r\n\r\nCompetencyList.propTypes = {\r\n  parentIndex: PropTypes.number,\r\n  index: PropTypes.number,\r\n  framework: PropTypes.string,\r\n  competency: PropTypes.shape({\r\n    title: PropTypes.string\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CompetencyList from '../competency-list/CompetencyList';\r\n\r\nfunction DomainList({ index, framework, domain, disable }) {\r\n  const competencies = domain.competencies.map((competency, childIndex) => (\r\n    <CompetencyList\r\n      key={competency.id}\r\n      parentIndex={index}\r\n      index={childIndex}\r\n      framework={framework}\r\n      competency={competency}\r\n      disable={disable}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <tbody>\r\n      <tr className=\"white-color secondary-background\">\r\n        <td>{index + 1}</td>\r\n        <td>\r\n          <h4> {domain.title}</h4>\r\n        </td>\r\n      </tr>\r\n      {competencies}\r\n    </tbody>\r\n  );\r\n}\r\n\r\nDomainList.defaultProps = {\r\n  index: 0,\r\n  domain: { title: '', competencies: [] },\r\n  disable: true\r\n};\r\n\r\nDomainList.propTypes = {\r\n  index: PropTypes.number,\r\n  framework: PropTypes.string,\r\n  domain: PropTypes.shape({\r\n    title: PropTypes.string,\r\n    competencies: PropTypes.array\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default DomainList;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport ErrorLoading from '../../components/error-loading/ErrorLoading';\r\n\r\nimport ActiveRequestsService from '../../services/active-requests/active-requests';\r\nimport CoursesService from '../../services/courses/courses';\r\nimport { safeFlat } from '../../services/util/util';\r\n\r\nclass Courses extends Component {\r\n  static propTypes = {\r\n    framework: PropTypes.string\r\n  };\r\n\r\n  state = {\r\n    courses: [],\r\n    filteredCourses: [],\r\n    filter: '',\r\n    loadingError: false\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.framework = props.framework;\r\n  }\r\n\r\n  coursesService = new CoursesService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const allCourses = await this.coursesService.getCourses();\r\n      const courses = this.filterCourses(allCourses);\r\n      this.setState({ courses, filteredCourses: courses });\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  filterCourses(allCourses) {\r\n    const { framework } = this.state;\r\n    const filteredCourses = [];\r\n    allCourses.forEach(course => {\r\n      if (course.archived === '1') {\r\n        return;\r\n      }\r\n\r\n      const filteredProfiles = course.competency_profile.filter(\r\n        profile => (profile.title || '').toLowerCase() === framework\r\n      );\r\n\r\n      if (filteredProfiles.length === 0) {\r\n        return;\r\n      }\r\n\r\n      const modifiedCourse = {\r\n        ...course,\r\n        competencies: safeFlat(\r\n          filteredProfiles.map(profile =>\r\n            safeFlat(\r\n              profile.domains.map(domain =>\r\n                domain.competencies.map(competency => ({\r\n                  ...competency,\r\n                  domain: domain.title\r\n                }))\r\n              )\r\n            )\r\n          )\r\n        )\r\n      };\r\n\r\n      filteredCourses.push(modifiedCourse);\r\n    });\r\n\r\n    return filteredCourses;\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { courses } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredCourses = courses.filter(course => term.test(course.title));\r\n    this.setState({ filteredCourses, filter });\r\n  };\r\n\r\n  render() {\r\n    const { filteredCourses, framework, filter, loadingError } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const competencyList = competencies =>\r\n      competencies.map(competency => (\r\n        <li key={competency.id}>\r\n          <Link\r\n            to={`/framework/${framework}/competency/details/${competency.id}`}\r\n          >\r\n            {competency.title}\r\n          </Link>\r\n        </li>\r\n      ));\r\n\r\n    const resources = filteredCourses.map(course => (\r\n      <tr key={course.id}>\r\n        <td>\r\n          <Link to={`/training-resources/${course.id}`}>{course.title}</Link>\r\n        </td>\r\n        <td>{course.type}</td>\r\n        <td>\r\n          <ul>{competencyList(course.competencies)}</ul>\r\n        </td>\r\n      </tr>\r\n    ));\r\n\r\n    return (\r\n      <>\r\n        <input\r\n          type=\"search\"\r\n          // className=\"clearable\" // It doesn't work correctly\r\n          value={filter}\r\n          onChange={event => this.onFilter(event.target.value)}\r\n          placeholder=\"Filter resources\"\r\n        />\r\n        <table>\r\n          <tbody>{resources}</tbody>\r\n        </table>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Courses;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat, removeHtmlTags } from '../services/util/util';\r\n\r\nimport DomainList from '../components/domain-list/DomainList';\r\nimport Courses from './courses/Courses';\r\n\r\nclass CompetencyList extends Component {\r\n  static propTypes = {\r\n    match: PropTypes.shape({\r\n      match: PropTypes.shape({ framework: PropTypes.string })\r\n    })\r\n  };\r\n\r\n  competencyService = new CompetencyService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  state = {\r\n    framework: this.props.match.params.framework,\r\n    frameworkName: '',\r\n    description: '',\r\n    domains: [],\r\n    filter: '',\r\n    filteredDomains: [],\r\n    loadingError: false\r\n  };\r\n\r\n  async componentWillMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([this.fetchFramework(), this.fetchAllFrameworks()]);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.scroll(0, 0);\r\n  }\r\n\r\n  async fetchFramework() {\r\n    const { framework } = this.state;\r\n    const frameworkData = await this.competencyService.getFramework(framework);\r\n    const domains = safeFlat(frameworkData.map(item => item.domains));\r\n    this.setState({ domains, filteredDomains: domains });\r\n  }\r\n\r\n  async fetchAllFrameworks() {\r\n    const { framework } = this.state;\r\n    const frameworkData = await this.competencyService.getAllFrameworks();\r\n    const frameworkMatch = frameworkData.filter(\r\n      item => item.name.toLowerCase() === framework\r\n    );\r\n\r\n    if (frameworkMatch.length) {\r\n      this.setState({\r\n        frameworkName: frameworkMatch[0].name,\r\n        description: removeHtmlTags(frameworkMatch[0].description)\r\n      });\r\n    }\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { domains } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredDomains = domains.map(domain => {\r\n      const filteredCompetencies = domain.competencies.filter(competency =>\r\n        term.test(competency.title)\r\n      );\r\n      if (filteredCompetencies.length === 0) {\r\n        return null;\r\n      }\r\n      return { ...domain, competencies: filteredCompetencies };\r\n    });\r\n    this.setState({ filter, filteredDomains });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      frameworkName,\r\n      description,\r\n      filteredDomains,\r\n      framework,\r\n      filter,\r\n      loadingError\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const domainList = filteredDomains.map((domain, index) =>\r\n      domain === null ? null : (\r\n        <DomainList\r\n          key={domain.nid}\r\n          index={index}\r\n          framework={framework}\r\n          domain={domain}\r\n          disable={true}\r\n        />\r\n      )\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <h3>{frameworkName}</h3>\r\n        <p>{description}</p>\r\n\r\n        <Tabs>\r\n          <TabList>\r\n            <Tab>Competencies</Tab>\r\n            <Tab>Training resources</Tab>\r\n          </TabList>\r\n\r\n          <TabPanel>\r\n            <input\r\n              // className=\"clearable\" // It doesn't work correctly\r\n              type=\"search\"\r\n              value={filter}\r\n              onChange={event => this.onFilter(event.target.value)}\r\n              placeholder=\"Filter competencies\"\r\n            />\r\n            <table>{domainList}</table>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Courses framework={framework} />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { apiUrl } from '../services/competency/competency';\r\n\r\nclass ResourceEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      path: this.props.location.pathname.split('/'),\r\n      nid: '',\r\n      title: '',\r\n      dates: '',\r\n      dates2: '',\r\n      type: '',\r\n      description: '',\r\n      location: '',\r\n      url: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      keywords: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ nid: this.state.path[3] });\r\n\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //let fetchResource = \"http://dev-competency-mapper.pantheonsite.io/api/v1/training-resources/\"+nid+\"?_format=json\";\r\n    let fetchResource = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    fetch(fetchResource)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n  }\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let nid = '';\r\n    let title = '';\r\n    let dates = '';\r\n    let dates2 = '';\r\n    let type = '';\r\n    let description = '';\r\n    let location = '';\r\n    let url = '';\r\n    let target_audience = '';\r\n    let learning_outcomes = '';\r\n    let keywords = '';\r\n    let organisers = '';\r\n    let trainers = '';\r\n\r\n    this.state.data.forEach(item => {\r\n      if (item.id === this.state.nid) {\r\n        nid = item.id;\r\n        title = item.title;\r\n        //temp_date = item.dates.split(\"-\");\r\n        dates = item.start_date;\r\n        dates2 = item.end_date;\r\n        type = item.type;\r\n        description = item.description;\r\n        location = item.location;\r\n        url = item.url;\r\n        target_audience = item.target_audience;\r\n        learning_outcomes = item.learning_outcomes;\r\n        keywords = item.keywords;\r\n        organisers = item.organisers;\r\n        trainers = item.trainers;\r\n      }\r\n    });\r\n    if (this.state.data.length > 0) {\r\n      console.log(title);\r\n      return (\r\n        <EditForm\r\n          nid={nid}\r\n          title={title}\r\n          dates={dates}\r\n          dates2={dates2}\r\n          type={type}\r\n          description={description}\r\n          location={location}\r\n          url={url}\r\n          target_audience={target_audience}\r\n          learning_outcomes={learning_outcomes}\r\n          keywords={keywords}\r\n          organisers={organisers}\r\n          trainers={trainers}\r\n        />\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass EditForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nid: this.props.nid,\r\n      title: this.props.title,\r\n      dates: this.props.dates,\r\n      dates2: this.props.dates2,\r\n      type: this.props.type,\r\n      description: this.props.description,\r\n      location: this.props.location,\r\n      url: this.props.url,\r\n      target_audience: this.props.target_audience,\r\n      learning_outcomes: this.props.learning_outcomes,\r\n      keywords: this.props.keywords,\r\n      organisers: this.props.organisers,\r\n      trainers: this.props.trainers,\r\n      redirect: false,\r\n      updateFlag: false,\r\n      csrf: ''\r\n    };\r\n    this.handleTitle = this.handleTitle.bind(this);\r\n    this.handleDates = this.handleDates.bind(this);\r\n    this.handleDates2 = this.handleDates2.bind(this);\r\n    this.handleType = this.handleType.bind(this);\r\n    this.handleDesc = this.handleDesc.bind(this);\r\n    this.handleLocation = this.handleLocation.bind(this);\r\n    this.handleURL = this.handleURL.bind(this);\r\n    this.handleTargetAudience = this.handleTargetAudience.bind(this);\r\n    this.handleLearningOutcomes = this.handleLearningOutcomes.bind(this);\r\n    this.handleKeywords = this.handleKeywords.bind(this);\r\n    this.handleOrganisers = this.handleOrganisers.bind(this);\r\n    this.handleTrainers = this.handleTrainers.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  static contextTypes = {\r\n    router: PropTypes.object\r\n  };\r\n\r\n  handleTitle(event) {\r\n    this.setState({ title: event.value });\r\n  }\r\n\r\n  handleDates(event) {\r\n    this.setState({ dates: event.value });\r\n  }\r\n\r\n  handleDates2(event) {\r\n    this.setState({ dates2: event.value });\r\n  }\r\n\r\n  handleType(event) {\r\n    this.setState({ type: event.value });\r\n  }\r\n\r\n  handleDesc(event) {\r\n    this.setState({ description: event.editor.getData() });\r\n  }\r\n  handleLocation(event) {\r\n    this.setState({ location: event.value });\r\n  }\r\n  handleURL(event) {\r\n    this.setState({ url: event.value });\r\n  }\r\n\r\n  handleTargetAudience(event) {\r\n    this.setState({ target_audience: event.editor.getData() });\r\n  }\r\n\r\n  handleLearningOutcomes(event) {\r\n    this.setState({ learning_outcomes: event.editor.getData() });\r\n  }\r\n\r\n  handleKeywords(event) {\r\n    this.setState({ keywords: event.value });\r\n  }\r\n\r\n  handleOrganisers(event) {\r\n    this.setState({ organisers: event.editor.getData() });\r\n  }\r\n\r\n  handleTrainers(event) {\r\n    this.setState({ trainers: event.editor.getData() });\r\n  }\r\n\r\n  setRedirect = () => {\r\n    this.props.history.push('all-training-resources');\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.context.router.history.push(\r\n          '/training-resources/' + this.state.nid\r\n        );\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    let nid = this.state.nid;\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = this.refs.type.value;\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n    let keywords = this.refs.keywords.value;\r\n    let csrf = localStorage.getItem('csrf_token');\r\n\r\n    fetch(`${apiUrl}/node/` + nid + '?_format=hal_json', {\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': csrf, //'yoM7eSiML2AI6A3FGH2EKCaX_agiJfmYkRIPL0MdPlI',\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        title: [\r\n          {\r\n            value: title\r\n          }\r\n        ],\r\n        field_dates: [\r\n          {\r\n            value: dates\r\n          }\r\n        ],\r\n        field_end_date: [\r\n          {\r\n            value: dates2\r\n          }\r\n        ],\r\n        field_type: [\r\n          {\r\n            value: type\r\n          }\r\n        ],\r\n        field_description: [\r\n          {\r\n            value: description,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_location: [\r\n          {\r\n            value: location\r\n          }\r\n        ],\r\n        field_url: [\r\n          {\r\n            value: url\r\n          }\r\n        ],\r\n        field_target_audience: [\r\n          {\r\n            value: target_audience,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_learning_outcomes: [\r\n          {\r\n            value: learning_outcomes,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_keywords: [\r\n          {\r\n            value: keywords\r\n          }\r\n        ],\r\n        field_organisers: [\r\n          {\r\n            value: organisers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_trainers: [\r\n          {\r\n            value: trainers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    //event.target.reset();\r\n\r\n    event.preventDefault();\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Edit Training Resources</h2>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_edit_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"title\"\r\n                    id={'title'}\r\n                    value={this.state.title}\r\n                    onChange={this.handleTitle.bind(this)}\r\n                    required\r\n                    placeholder=\"Title\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates\"\r\n                    value={this.state.dates}\r\n                    onChange={this.handleDates.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates2\"\r\n                    value={this.state.dates2}\r\n                    onChange={this.handleDates2.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type</strong>\r\n                  <select\r\n                    ref={'type'}\r\n                    value={this.state.type}\r\n                    onChange={this.handleType.bind(this)}\r\n                  >\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.handleDesc\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" value={this.state.description} onChange={this.handleDesc.bind(this)} required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"location\"\r\n                    value={this.state.location}\r\n                    onChange={this.handleLocation.bind(this)}\r\n                    placeholder=\"Location\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"url\"\r\n                    value={this.state.url}\r\n                    onChange={this.handleURL.bind(this)}\r\n                    required\r\n                    placeholder=\"URL\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.handleTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"target_audience\" value={this.state.target_audience} onChange={this.handleTargetAudience.bind(this)} required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.handleLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" value={this.state.learning_outcomes} onChange={this.handleLearningOutcomes.bind(this)} required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.handleOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" value={this.state.organisers} onChange={this.handleOrganisers.bind(this)} required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.handleTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" value={this.state.trainers} onChange={this.handleTrainers.bind(this)} required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"keywords\"\r\n                    value={this.state.keywords}\r\n                    onChange={this.handleKeywords.bind(this)}\r\n                    placeholder=\"Keywords\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Update\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst EditResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/edit/:nid\" component={ResourceEdit} />\r\n  </Switch>\r\n);\r\n\r\nexport default EditResources;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { apiUrl } from '../services/competency/competency';\r\n\r\nclass ResourceCreate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //this.onChange = this.onChange.bind(this);\r\n    this.changeDescription = this.changeDescription.bind(this);\r\n    this.changeTargetAudience = this.changeTargetAudience.bind(this);\r\n    this.changeLearningOutcomes = this.changeLearningOutcomes.bind(this);\r\n    this.changeOrganisers = this.changeOrganisers.bind(this);\r\n    this.changeTrainers = this.changeTrainers.bind(this);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      content: 'content',\r\n      description: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.props.history.push('/all-training-resources');\r\n        //this.setState({'updateFlag': false});\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = 'Online';\r\n    if (this.refs.type.value) {\r\n      type = this.refs.type.value;\r\n    }\r\n\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let keywords = this.refs.keywords.value;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n\r\n    let token = localStorage.getItem('csrf_token');\r\n\r\n    //alert(learning_outcomes);\r\n\r\n    fetch(`${apiUrl}/node?_format=hal_json`, {\r\n      credentials: 'include',\r\n      method: 'POST',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        title: [\r\n          {\r\n            value: title\r\n          }\r\n        ],\r\n        field_dates: [\r\n          {\r\n            value: dates\r\n          }\r\n        ],\r\n        field_end_date: [\r\n          {\r\n            value: dates2\r\n          }\r\n        ],\r\n        field_type: [\r\n          {\r\n            value: type\r\n          }\r\n        ],\r\n        field_description: [\r\n          {\r\n            value: description,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_location: [\r\n          {\r\n            value: location\r\n          }\r\n        ],\r\n        field_url: [\r\n          {\r\n            value: url\r\n          }\r\n        ],\r\n        field_target_audience: [\r\n          {\r\n            value: target_audience,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_learning_outcomes: [\r\n          {\r\n            value: learning_outcomes,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_keywords: [\r\n          {\r\n            value: keywords\r\n          }\r\n        ],\r\n        field_organisers: [\r\n          {\r\n            value: organisers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_trainers: [\r\n          {\r\n            value: trainers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    event.target.reset();\r\n    this.setState({ updateFlag: true });\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h2>Create Training Resources</h2>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <h4>Create new competency</h4>\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_create_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title</strong>\r\n                  <input type=\"text\" ref=\"title\" required placeholder=\"Title\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Start Date</strong>\r\n                  <input type=\"date\" ref=\"dates\" placeholder=\"Date\" />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>End Date</strong>\r\n                  <input type=\"date\" ref=\"dates2\" placeholder=\"Date\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type</strong>\r\n                  <select ref={'type'}>\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.changeDescription\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input type=\"text\" ref=\"location\" placeholder=\"Location\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL</strong>\r\n                  <input type=\"text\" ref=\"url\" required placeholder=\"URL\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.changeTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<input type=\"text\" ref=\"target_audience\" required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.changeLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.changeOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.changeTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input type=\"text\" ref=\"keywords\" placeholder=\"Keywords\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Submit\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/create\" component={ResourceCreate} />\r\n  </Switch>\r\n);\r\n\r\nexport default CreateResources;\r\n","import React from 'react';\r\n\r\nimport { apiUrl } from '../services/competency/competency';\r\n\r\nconst $ = window.$;\r\n\r\nclass AttributeMap extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      framework: this.props.selectedFramework,\r\n      resourceID: this.props.resourceID,\r\n      frameworkdetails: [],\r\n      csrf: '',\r\n      frameworkUUID: '',\r\n      competencies: [],\r\n      attributes: this.props.selectedAttributes,\r\n      selectedAttributes: this.props.selectedAttributes,\r\n      selectedCompetencies: this.props.selectedCompetencies,\r\n      resourceDetails: []\r\n    };\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n  }\r\n\r\n  handleSelect() {\r\n    let checkedAttributes = this.state.selectedAttributes;\r\n    let attributeIDs = [];\r\n    let token = localStorage.getItem('csrf_token');\r\n    for (let i = 0; i < checkedAttributes.length; i++) {\r\n      attributeIDs.push(checkedAttributes[i].split('id', 2));\r\n    }\r\n\r\n    if (attributeIDs.length > 0) {\r\n      let payload = {\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          },\r\n          [`${apiUrl}/rest/relation/node/training_resource/field_attribute_mapped`]: {\r\n            href:\r\n              'http://dev-competency-mapper.pantheonsite.io/node/' +\r\n              attributeIDs[0][1] +\r\n              '?_format=hal_json'\r\n          }\r\n        },\r\n\r\n        type: [{ target_id: 'training_resource' }],\r\n        _embedded: {}\r\n      };\r\n\r\n      let embedded_string = [];\r\n      for (let i = 0; i < attributeIDs.length; i++) {\r\n        embedded_string.push({\r\n          _links: {\r\n            self: {\r\n              href: `${apiUrl}/node/` + attributeIDs[i][1] + '?_format=hal_json'\r\n            },\r\n            type: {\r\n              href: `${apiUrl}/rest/type/node/attribute`\r\n            }\r\n          },\r\n          uuid: [\r\n            {\r\n              value: attributeIDs[i][0]\r\n            }\r\n          ]\r\n        });\r\n      }\r\n\r\n      payload._embedded = {\r\n        [`${apiUrl}/rest/relation/node/training_resource/field_attribute_mapped`]: embedded_string\r\n      };\r\n\r\n      fetch(`${apiUrl}/node/` + this.state.resourceID + '?_format=hal_json', {\r\n        credentials: 'include',\r\n        method: 'PATCH',\r\n        cookies: 'x-access-token',\r\n        headers: {\r\n          Accept: 'application/hal+json',\r\n          'Content-Type': 'application/hal+json',\r\n          'X-CSRF-Token': token,\r\n          Authorization: 'Basic'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n    }\r\n\r\n    this.props.handleCloseModal();\r\n  }\r\n\r\n  handleAllCheck(id, uuid, e) {\r\n    const selectedAttributes = this.state.selectedAttributes;\r\n    let childItems = document.getElementsByName(id);\r\n    if (e.target.checked) {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        childItems[i].checked = true;\r\n        selectedAttributes.push(\r\n          childItems[i].getAttribute('data-uuid') +\r\n            'id' +\r\n            childItems[i].getAttribute('data-id')\r\n        );\r\n        this.setState({ selectedAttributes });\r\n        console.log(this.state.selectedAttributes);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        if (childItems[i].checked === true) {\r\n          childItems[i].checked = false;\r\n          //selectedAttributes.pop(childItems[i].getAttribute('data-id'));\r\n          //let index = array.indexOf(element);\r\n          selectedAttributes.splice(\r\n            selectedAttributes.indexOf(childItems[i]),\r\n            1\r\n          );\r\n          this.setState({ selectedAttributes });\r\n          console.log(this.state.selectedAttributes);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAttributeClick(id, uuid, e) {\r\n    const selectedAttributes = this.state.selectedAttributes;\r\n    let isChecked = e.target.checked;\r\n    if (isChecked) {\r\n      selectedAttributes.push(uuid + 'id' + id);\r\n      this.setState({ selectedAttributes });\r\n      document.getElementById(e.target.name).checked = true;\r\n      console.log(this.state.selectedAttributes);\r\n    } else {\r\n      //selectedAttributes.pop(id);\r\n      selectedAttributes.splice(\r\n        selectedAttributes.indexOf(uuid + 'id' + id),\r\n        1\r\n      );\r\n      this.setState({ selectedAttributes });\r\n      if (!$(':checkbox[name=' + e.target.name + ']').is(':checked')) {\r\n        document.getElementById(e.target.name).checked = false;\r\n        console.log(this.state.selectedAttributes);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleListAllChecked(e) {\r\n    let lists = [];\r\n    $(':checkbox').each(function() {\r\n      if ($(this).is(':checked')) {\r\n        lists.push($(this).attr('id'));\r\n      }\r\n    });\r\n    alert(lists);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let fetchCompetencyList =\r\n      `${apiUrl}/api/v1/framework/` + this.state.framework + '?_format=json';\r\n    fetch(fetchCompetencyList)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n\r\n    let fetchFrameworkDetails = `${apiUrl}/api/v1/framework?_format=json`;\r\n    fetch(fetchFrameworkDetails)\r\n      .then(Response => Response.json())\r\n      .then(findresponse1 => {\r\n        this.setState({\r\n          frameworkdetails: findresponse1\r\n        });\r\n      });\r\n\r\n    fetch(`${apiUrl}/node/` + this.state.resourceID + '?_format=hal_json')\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resourceDetails: findresponse\r\n        });\r\n      });\r\n\r\n    //console.log(this.state.resourceDetails);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return this.state.attributes === nextState.attributes;\r\n  }\r\n\r\n  render() {\r\n    let frameworkDetails = this.state.frameworkdetails;\r\n    let data = this.state.data;\r\n    let frameworkDefs = [];\r\n    let domainsOptions = [];\r\n    let attributeTypeOptions = [];\r\n\r\n    //console.log(this.state.selectedAttributes);\r\n\r\n    frameworkDetails.forEach((item, ikey) => {\r\n      if (item.name.toLowerCase() === this.state.framework) {\r\n        this.state.frameworkUUID = item.uuid;\r\n        item.attribute_types.forEach(attribute_type => {\r\n          frameworkDefs.push(attribute_type.title);\r\n          attributeTypeOptions.push(\r\n            <option data-id={attribute_type.id} value={attribute_type.uuid}>\r\n              {attribute_type.title}\r\n            </option>\r\n          );\r\n        });\r\n        item.domains.forEach(domain => {\r\n          domainsOptions.push(\r\n            <option data-id={domain.id} value={domain.uuid}>\r\n              {domain.title}\r\n            </option>\r\n          );\r\n        });\r\n      }\r\n    });\r\n\r\n    const ListOfCompetencies = data.map(item =>\r\n      item.domains.map((domain, did) => (\r\n        <tbody>\r\n          <tr key={domain.nid}>\r\n            <td>{did + 1}</td>{' '}\r\n            <td>\r\n              <strong> {domain.title}</strong>{' '}\r\n            </td>{' '}\r\n          </tr>\r\n          {domain.competencies.map((competency, cid) => (\r\n            <tr key={competency.id}>\r\n              <td>\r\n                {did + 1}.{cid + 1}\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type={'checkbox'}\r\n                  defaultChecked={\r\n                    -1 !==\r\n                    this.state.selectedCompetencies.indexOf(competency.id)\r\n                  }\r\n                  data-test={competency.uuid}\r\n                  id={competency.id}\r\n                  onChange={this.handleAllCheck.bind(\r\n                    this,\r\n                    competency.id,\r\n                    competency.uuid\r\n                  )}\r\n                />{' '}\r\n                {competency.title}\r\n                <ul style={{ marginLeft: 1 + 'em', marginBottom: 1 + 'em' }}>\r\n                  {frameworkDefs.map(def => {\r\n                    return (\r\n                      <div style={{ marginLeft: 1 + 'em' }}>\r\n                        <div>\r\n                          {' '}\r\n                          <strong>\r\n                            <em>{def}</em>\r\n                          </strong>\r\n                        </div>\r\n                        {competency.attributes\r\n                          .filter(attribute => attribute.type === def)\r\n                          .map(attribute => {\r\n                            return (\r\n                              <li\r\n                                key={attribute.id}\r\n                                style={{ marginLeft: 1 + 'em' }}\r\n                              >\r\n                                <input\r\n                                  type={'checkbox'}\r\n                                  defaultChecked={\r\n                                    -1 !==\r\n                                    this.state.selectedAttributes.indexOf(\r\n                                      attribute.uuid + 'id' + attribute.id\r\n                                    )\r\n                                  }\r\n                                  name={competency.id}\r\n                                  data-id={attribute.id}\r\n                                  data-uuid={attribute.uuid}\r\n                                  id={attribute.id}\r\n                                  onChange={this.handleAttributeClick.bind(\r\n                                    this,\r\n                                    attribute.id,\r\n                                    attribute.uuid\r\n                                  )}\r\n                                />{' '}\r\n                                {attribute.title}\r\n                              </li>\r\n                            );\r\n                          })}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </ul>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n          <tr>\r\n            <td>\r\n              <td />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      ))\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        {ListOfCompetencies}\r\n        <div id={'footer-button'}>\r\n          <button className={'button'} onClick={this.handleSelect.bind(this)}>\r\n            {' '}\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AttributeMap;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport ReactModal from 'react-modal';\r\nimport AttributeMap from './AttributeMap';\r\nimport Parser from 'html-react-parser';\r\n\r\nimport { apiUrl } from '../services/competency/competency';\r\n\r\nclass ResourceDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resources: [],\r\n      frameworks: [],\r\n      resourcePath: this.props.location.pathname.split('/'),\r\n      showModal: false,\r\n      selectedFramework: '',\r\n      updateFlag: ''\r\n    };\r\n    this.handleOpenModal = this.handleOpenModal.bind(this);\r\n    this.handleCloseModal = this.handleCloseModal.bind(this);\r\n  }\r\n\r\n  handleOpenModal(event, temp) {\r\n    this.setState({ showModal: true });\r\n    this.setState({ selectedFramework: event });\r\n    temp.preventDefault();\r\n    //console.log(event);\r\n  }\r\n\r\n  handleCloseModal() {\r\n    this.setState({ showModal: false });\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=hal_json`;\r\n\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse3 => {\r\n        this.setState({ resources: findresponse3 });\r\n      });\r\n\r\n    fetch(`${apiUrl}/api/v1/framework?_format=json`)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          frameworks: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  mappingBlock() {\r\n    if (localStorage.getItem('roles')) {\r\n      if (localStorage.getItem('roles').includes('content_manager')) {\r\n        return (\r\n          <div className={'callout white-color industry-background'}>\r\n            <strong> Manage competency profile </strong>\r\n            <ul>\r\n              {this.state.frameworks.map((item, id) => {\r\n                return (\r\n                  <li style={{ display: 'inline', margin: '5px' }}>\r\n                    <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n                      onClick={this.handleOpenModal.bind(\r\n                        this,\r\n                        item.name.toLowerCase()\r\n                      )}\r\n                    >\r\n                      {' '}\r\n                      <i className=\"fas fa-tags\" /> {item.name}{' '}\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let attributes = [];\r\n    let selectedCompetencies = [];\r\n    let attribute_types = [];\r\n    //console.log(this.state.resources);\r\n    const Resource = this.state.resources.map((item, index) => {\r\n      if (item.id === this.state.resourcePath[2]) {\r\n        item.competency_profile.map(profile =>\r\n          profile.domains.map(domain =>\r\n            domain.competencies.map(competency =>\r\n              //selectedCompetencies.push(),\r\n              competency.attributes.map(\r\n                attribute =>\r\n                  attributes.push(attribute.uuid + 'id' + attribute.id),\r\n                selectedCompetencies.push(competency.id)\r\n              )\r\n            )\r\n          )\r\n        );\r\n\r\n        //console.log(attributes);\r\n\r\n        return (\r\n          <div>\r\n            <div>\r\n              <div className={'row'}>\r\n                <h2>{item.title}</h2>\r\n              </div>\r\n\r\n              <div className={'row'}>\r\n                <div className={'column large-9'}>\r\n                  <div className={'callout'}>\r\n                    {item.date ? (\r\n                      <p>\r\n                        <strong>Date:</strong> {item.dates}\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                    {item.keywords ? (\r\n                      <p>\r\n                        <strong>Keywords:</strong> {item.keywords}\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                    {item.location ? (\r\n                      <p>\r\n                        <strong>Location:</strong> {item.location}\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                    {item.type ? (\r\n                      <p>\r\n                        <strong>Type:</strong> {item.type}\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                    {item.url ? (\r\n                      <p>\r\n                        <strong> URL: </strong>{' '}\r\n                        <a href={item.url} target={'_blank'}>\r\n                          {item.url}\r\n                        </a>\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                  </div>\r\n                  <h3>Overview</h3>\r\n                  {Parser(item.description)}\r\n\r\n                  {item.target_audience\r\n                    ? Parser('<h3>Target Audience</h3>' + item.target_audience)\r\n                    : ''}\r\n                  {item.learning_outcomes\r\n                    ? Parser(\r\n                        '<h3>Learning Outcomes</h3>' + item.learning_outcomes\r\n                      )\r\n                    : ''}\r\n                  {item.organisers\r\n                    ? Parser('<h3>Organizers</h3>' + item.organisers)\r\n                    : ''}\r\n\r\n                  {item.trainers\r\n                    ? Parser('<h3>Trainers</h3>' + item.trainers)\r\n                    : ''}\r\n                  <h3>Competency Profile</h3>\r\n                  <table className={'hover'}>\r\n                    <tbody>\r\n                      {item.competency_profile.map(profile => {\r\n                        return (\r\n                          <tr>\r\n                            {this.state.frameworks.map(framework => {\r\n                              if (framework.id === profile.id) {\r\n                                framework.attribute_types.map(type =>\r\n                                  attribute_types.push(type.title)\r\n                                );\r\n                              }\r\n                              return null;\r\n                            })}\r\n                            <td>\r\n                              <h4>{profile.title}</h4>\r\n                            </td>\r\n                            <td>\r\n                              {profile.domains.map(domain => (\r\n                                <div>\r\n                                  <h5>{domain.title}</h5>\r\n                                  <ul>\r\n                                    {domain.competencies.map(competency => (\r\n                                      <li>\r\n                                        <strong> {competency.title}</strong>\r\n                                        <ul>\r\n                                          {attribute_types.map(type => (\r\n                                            <span>\r\n                                              {competency.attributes.map(\r\n                                                attribute => {\r\n                                                  if (attribute.type === type) {\r\n                                                    return (\r\n                                                      <li>\r\n                                                        {' '}\r\n                                                        <em>{type}</em> -{' '}\r\n                                                        {attribute.title}\r\n                                                      </li>\r\n                                                    );\r\n                                                  }\r\n                                                  return null;\r\n                                                }\r\n                                              )}\r\n                                            </span>\r\n                                          ))}\r\n                                        </ul>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              ))}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                <div\r\n                  className={\r\n                    'column large-3 callout industry-background white-color'\r\n                  }\r\n                >\r\n                  <h3>More information</h3>\r\n                  <p>\r\n                    We can place some relevant information in this block to make\r\n                    the page look more beautiful\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      return null;\r\n    });\r\n\r\n    return (\r\n      <div className={'row'}>\r\n        <div className={'column large-12'}>\r\n          {Resource}\r\n          {this.mappingBlock()}\r\n        </div>\r\n\r\n        <div style={{ overflow: 'scroll' }}>\r\n          <ReactModal\r\n            isOpen={this.state.showModal}\r\n            className=\"Modal\"\r\n            overlayClassName=\"Overlay\"\r\n            contentLabel=\"Minimal Modal Example\"\r\n          >\r\n            <div>\r\n              <h2 style={{ 'text-align': 'center' }}>\r\n                Manage competency profile for{' '}\r\n                {this.state.selectedFramework.toUpperCase()}{' '}\r\n                <i\r\n                  className=\"fas fa-window-close float-right\"\r\n                  data-close\r\n                  onClick={this.handleCloseModal}\r\n                />{' '}\r\n              </h2>\r\n            </div>\r\n            <table>\r\n              <AttributeMap\r\n                selectedCompetencies={selectedCompetencies}\r\n                selectedAttributes={attributes}\r\n                selectedFramework={this.state.selectedFramework}\r\n                resourceID={this.state.resourcePath[2]}\r\n                handleCloseModal={this.handleCloseModal}\r\n              />\r\n            </table>\r\n          </ReactModal>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ResDetails = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resources/:id\" component={ResourceDetails} />\r\n  </Switch>\r\n);\r\n\r\nexport default ResDetails;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Parser from 'html-react-parser';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { apiUrl } from '../services/competency/competency';\r\n\r\nclass ResourcesList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resources: [],\r\n      filterType: ''\r\n    };\r\n    this.archiveHandle = this.archiveHandle.bind(this);\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resources: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  filter(e) {\r\n    this.setState({ filter: e.target.value });\r\n  }\r\n\r\n  filterTypeHandle(e) {\r\n    this.setState({ filterType: e.target.value });\r\n  }\r\n\r\n  archiveHandle(rid, status, event) {\r\n    //alert(\"competency \"+ cid+ \"is \"+ status);\r\n    let archivedStatus = '';\r\n    if (status === 1) {\r\n      archivedStatus = false;\r\n    } else {\r\n      archivedStatus = true;\r\n    }\r\n    let token = localStorage.getItem('csrf_token');\r\n    fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        field_archived: [\r\n          {\r\n            value: archivedStatus\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    this.setState({ updateFlag: true });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let resources = this.state.resources;\r\n    if (this.state.filter) {\r\n      resources = resources.filter(\r\n        item =>\r\n          item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\r\n          item.description\r\n            .toLocaleLowerCase()\r\n            .includes(this.state.filter.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (this.state.filterType !== 'All') {\r\n      resources = resources.filter(item =>\r\n        item.type\r\n          .toLocaleLowerCase()\r\n          .includes(this.state.filterType.toLowerCase())\r\n      );\r\n    }\r\n\r\n    const ListOfResources = resources.map((item, index) => (\r\n      <tr key={index}>\r\n        <td>{index + 1} </td>\r\n        <td>\r\n          {' '}\r\n          <h4>\r\n            {' '}\r\n            <Link to={'/training-resources/' + item.id}>{item.title} </Link>\r\n          </h4>\r\n          <p>{item.dates} </p>\r\n          <strong>Learning resource type:</strong> {item.type} <br />\r\n          {Parser(item.description.substr(0, 240) + '...')} <br />\r\n          <br />\r\n          <strong> URL: </strong>{' '}\r\n          <a href={item.url} target={'_blank'}>\r\n            {item.url}\r\n          </a>\r\n        </td>\r\n        <td>\r\n          {item.archived === '1' ? (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 1)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\r\n            </a>\r\n          ) : (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 0)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-off\" />\r\n            </a>\r\n          )}\r\n        </td>\r\n        <td>\r\n          <Link to={`/training-resource/edit/${item.id}`}>\r\n            <i className=\"fas fa-edit\" />{' '}\r\n          </Link>\r\n        </td>\r\n      </tr>\r\n    ));\r\n    return (\r\n      <div className={'row'}>\r\n        <h3>Training Resources</h3>\r\n        <div className=\"row\">\r\n          <div className=\"column large-8\">\r\n            <div>\r\n              <input\r\n                type=\"text\"\r\n                onChange={this.filter.bind(this)}\r\n                placeholder=\"Type to search\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <div>\r\n              <select ref={'type'} onChange={this.filterTypeHandle.bind(this)}>\r\n                <option value={'All'}>All</option>\r\n                <option value={'Online'}>Online</option>\r\n                <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                <option value={'Webinar'}>Webinar</option>\r\n                <option value={'Hackathon'}>Hackathon</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className={'column large-2'}>\r\n            <Link\r\n              className={'button float-right'}\r\n              to={'/training-resource/create'}\r\n            >\r\n              <i className=\"fas fa-plus-circle\"> </i> Add new{' '}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>S. No.</th>\r\n              <th>Details</th>\r\n              <th>Archive</th>\r\n              <th>Edit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{ListOfResources}</tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Resources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/all-training-resources\" component={ResourcesList} />\r\n  </Switch>\r\n);\r\n\r\nexport default Resources;\r\n","import React from 'react';\r\n\r\nimport { apiUrl } from '../services/competency/competency';\r\n\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      roles: '',\r\n      user: ''\r\n    };\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    let old = this.refs.old.value;\r\n    let new1 = this.refs.new1.value;\r\n    let uid = localStorage.getItem('userid');\r\n    fetch(`${apiUrl}/user/` + uid + '/password?_format=json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': localStorage.getItem('csrf_token')\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/user/user`\r\n          }\r\n        },\r\n        old: [\r\n          {\r\n            value: old\r\n          }\r\n        ],\r\n        new: [\r\n          {\r\n            target_id: new1\r\n          }\r\n        ]\r\n      })\r\n    })\r\n      .then(resp => resp)\r\n      .then(data =>\r\n        setTimeout(() => {\r\n          alert('Password changed successfully');\r\n          window.location.reload();\r\n        }, 1000)\r\n      );\r\n    e.preventDefault();\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h3>Change password:</h3>\r\n        <form id={'passChange'}>\r\n          <input type={'password'} ref={'old'} placeholder={'Old password'} />\r\n          <input type={'password'} ref={'new1'} placeholder={'New password'} />\r\n          <input type={'password'} placeholder={'Confirm new password'} />\r\n          <input\r\n            type={'button'}\r\n            className={'button'}\r\n            onClick={this.handlePasswordChange.bind(this)}\r\n            value={'Submit'}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChangePassword;\r\n","import React from 'react';\r\n\r\nimport { removeHtmlTags } from '../../services/util/util';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction FrameworkButton({ framework }) {\r\n  let description = removeHtmlTags(framework.field_description);\r\n  if (description.length > 120) {\r\n    description = `${description.slice(0, 120).trim()}...`;\r\n  }\r\n  return (\r\n    <div className=\"column medium-4\">\r\n      <Link\r\n        className=\"column callout\"\r\n        data-equalizer-watch\r\n        to={`/framework/${framework.title.toLowerCase()}`}\r\n      >\r\n        <img\r\n          className=\"float-center margin-bottom-medium\"\r\n          style={{ height: '6rem' }}\r\n          src={`http://dev-competency-mapper.pantheonsite.io/${\r\n            framework.field_logo\r\n          }`}\r\n          alt=\"competency logo\"\r\n        />\r\n        <h5>\r\n          {description}\r\n          <i className=\"icon icon-functional\" data-icon=\">\" />\r\n        </h5>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButton;\r\n","import React from 'react';\r\n\r\nimport FrameworkButton from '../framework-button/FrameworkButton';\r\n\r\nconst $ = window.$;\r\n\r\nfunction FrameworkButtons({ frameworks }) {\r\n  const selfRef = new React.createRef();\r\n\r\n  const invokeFoundation = () => {\r\n    window.setTimeout(() => $(selfRef.current).foundation());\r\n    return frameworks.map(framework => (\r\n      <FrameworkButton key={framework.nid} framework={framework} />\r\n    ));\r\n  };\r\n\r\n  return frameworks.length < 1 ? null : (\r\n    <div className=\"row\" data-equalizer ref={selfRef}>\r\n      {invokeFoundation()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButtons;\r\n","import React, { Component } from 'react';\r\n\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nimport FrameworkButtons from '../components/framework-buttons/FrameworkButtons';\r\n\r\nclass Frameworks extends Component {\r\n  competencyService = new CompetencyService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  state = {\r\n    frameworks: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    this.activeRequests.startRequest();\r\n    const frameworks = await this.competencyService.getAllFrameworksDetails();\r\n    this.setState({ frameworks });\r\n    this.activeRequests.finishRequest();\r\n  }\r\n\r\n  render() {\r\n    const { frameworks } = this.state;\r\n\r\n    return (\r\n      <div className=\"column\">\r\n        <h3>Overview</h3>\r\n        <p className=\"lead\">\r\n          Introduction to the idea of competency frameworks and their linkage\r\n          with training resources. Two lines of description should look good and\r\n          then links can be given to{' '}\r\n          <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n            className=\"readmore\"\r\n          >\r\n            read more\r\n          </a>\r\n        </p>\r\n\r\n        <FrameworkButtons frameworks={frameworks} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Frameworks;\r\n","import { apiUrl } from '../competency/competency';\r\nimport HttpService from '../http/http';\r\n\r\nconst http = new HttpService();\r\nconst loginUrl = `${apiUrl}/user/login?_format=json`;\r\nconst logoutUrl = `${apiUrl}/user/logout`;\r\n\r\nexport async function login(username, password) {\r\n  const credentials = { name: username, pass: password };\r\n  try {\r\n    const response = await http.post(loginUrl, credentials);\r\n    const { data } = response;\r\n    localStorage.setItem('roles', data.current_user.roles);\r\n    localStorage.setItem('csrf_token', data.csrf_token);\r\n    localStorage.setItem('logout_token', data.logout_token);\r\n    localStorage.setItem('user', data.current_user.name);\r\n    localStorage.setItem('userid', data.current_user.uid);\r\n    return data;\r\n  } catch (error) {\r\n    logout();\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem('roles');\r\n  localStorage.removeItem('csrf_token');\r\n  localStorage.removeItem('logout_token');\r\n  localStorage.removeItem('userid');\r\n  localStorage.removeItem('user');\r\n  return http.post(logoutUrl);\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Masthead from '../containers/masthead/Masthead';\r\nimport ManageAttributes from './ManageAttributes';\r\nimport ManageCompetencies from './ManageCompetencies';\r\nimport CompetencyDetails from './CompetencyDetails';\r\nimport Competencies from './CompetencyList';\r\nimport ResourceEdit from './ResourceEdit';\r\nimport ResourceCreate from './ResourceCreate';\r\nimport ResourceDetails from './ResourceDetails';\r\nimport ResourcesList from './ResourcesList';\r\nimport ChangePassword from './ChangePassword';\r\nimport Frameworks from './Frameworks';\r\n\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { login, logout } from '../services/auth/auth';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nconst $ = window.$;\r\n\r\nclass Root extends Component {\r\n  state = {\r\n    isActive: false,\r\n    roles: localStorage.getItem('roles') || '',\r\n    user: localStorage.getItem('user') || ''\r\n  };\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  componentDidMount() {\r\n    $(document).foundation();\r\n    $(document).foundationExtendEBI();\r\n    this.subcription = this.activeRequests.addEventListener(\r\n      this.handleActiveRequests\r\n    );\r\n\r\n    window.addEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.subcription) {\r\n      this.activeRequests.removeEventListener(this.subcription);\r\n    }\r\n    window.removeEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  handleActiveRequests = hasPendingRequests =>\r\n    this.setState({ isActive: hasPendingRequests });\r\n\r\n  detectUserChangesFromOtherTabs = ({ key, newValue }) => {\r\n    if (key === 'user') {\r\n      if (newValue) {\r\n        this.setState({\r\n          user: localStorage.getItem('user'),\r\n          roles: localStorage.getItem('roles')\r\n        });\r\n      } else {\r\n        this.setState({ user: '', roles: '' });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogin = async (username, password) => {\r\n    try {\r\n      await login(username, password);\r\n      this.setState({\r\n        user: localStorage.getItem('user'),\r\n        roles: localStorage.getItem('roles')\r\n      });\r\n    } catch (error) {\r\n      window.console.error(error);\r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 400:\r\n            window.alert(error.response.data.message);\r\n            return;\r\n          default:\r\n            window.alert(\r\n              'Sorry, there was an unknown login problem, please try again.'\r\n            );\r\n        }\r\n        window.alert(\r\n          'Sorry, there was an unknown login problem, please try again.'\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.setState({ user: '', roles: '' });\r\n    logout();\r\n  };\r\n\r\n  render() {\r\n    const { isActive, roles, user } = this.state;\r\n    return (\r\n      <>\r\n        <SnackbarProvider\r\n          maxSnack={1}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          preventDuplicate\r\n        >\r\n          <Masthead\r\n            roles={roles}\r\n            user={user}\r\n            isActive={isActive}\r\n            onLogin={this.handleLogin}\r\n            onLogout={this.handleLogout}\r\n          />\r\n\r\n          <section id=\"main-content-area\" className=\"row\" role=\"main\">\r\n            <main className=\"column\">\r\n              <Switch>\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/edit/:nid\"\r\n                  component={ResourceEdit}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/create\"\r\n                  component={ResourceCreate}\r\n                />\r\n                <Route\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/training-resources/:id\"\r\n                  component={ResourceDetails}\r\n                />\r\n                <Route\r\n                  path=\"/all-training-resources\"\r\n                  component={ResourcesList}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:cid/manage-attributes\"\r\n                  component={ManageAttributes}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:domainId?\"\r\n                  component={ManageCompetencies}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/details/:cid\"\r\n                  component={CompetencyDetails}\r\n                />\r\n                <Route path=\"/framework/:framework\" component={Competencies} />\r\n                <Route\r\n                  path=\"/user/change/password\"\r\n                  component={ChangePassword}\r\n                />\r\n                <Route path=\"/\" component={Frameworks} />\r\n              </Switch>\r\n            </main>\r\n          </section>\r\n        </SnackbarProvider>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Root;\r\n\r\nclass ProtectedRoute extends Component {\r\n  render() {\r\n    const { component: Component, condition, ...props } = this.props;\r\n    return (\r\n      <Route\r\n        {...props}\r\n        render={props =>\r\n          condition ? <Component {...props} /> : <Redirect to=\"/\" />\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\n\r\nimport Root from './app/containers/Root';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <Root />\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meter\":\"progress-bar_meter__2KLWm\",\"progress\":\"progress-bar_progress__QKIy2\"};"],"sourceRoot":""}