{"version":3,"sources":["shared/components/progress-bar/progress-bar.jsx","app/containers/navigation/Navigation.jsx","app/containers/login-form/LoginForm.jsx","app/containers/masthead/Masthead.jsx","shared/components/edit-inline/EditInline.tsx","app/containers/simple-form/SimpleForm.tsx","app/components/error-loading/ErrorLoading.tsx","app/containers/framework-versions/FrameworkVersions.tsx","app/services/http/headers.js","app/services/http/http.js","app/services/competency/body.js","app/services/competency/competency.js","app/services/active-requests/active-requests.js","app/services/util/util.js","app/containers/ManageAttributes.jsx","app/containers/version-controls/VersionControls.tsx","app/containers/ManageCompetencies.jsx","app/services/courses/courses.js","app/containers/CompetencyDetails.jsx","app/components/competency-list/CompetencyList.jsx","app/components/domain-list/DomainList.jsx","app/containers/courses/Courses.jsx","app/containers/CompetencyList.jsx","app/containers/ResourceEdit.jsx","app/containers/ResourceCreate.jsx","app/containers/AttributeMap.jsx","app/containers/ResourceDetails.jsx","app/containers/ResourcesList.jsx","app/containers/ChangePassword.jsx","app/components/about/About.js","app/components/framework-button/FrameworkButton.jsx","app/components/framework-buttons/FrameworkButtons.jsx","app/containers/Frameworks.jsx","app/services/auth/auth.js","app/containers/Root.jsx","index.jsx","shared/components/progress-bar/progress-bar.module.css"],"names":["ProgressBar","_ref","isActive","react_default","a","createElement","Fragment","className","concat","styles","progress","role","meter","defaultProps","$","window","Navigation","navRef","React","createRef","logout","onLogout","_this","props","this","current","foundation","_this$props","roles","user","frameworkResources","tabIndex","react_router_dom","to","trainingResources","userDropdown","onClick","ref","data-dropdown-menu","data-description","includes","Component","LoginForm","state","username","password","onChange","event","setState","Object","defineProperty","currentTarget","name","value","submit","onSubmit","_this$state","_this2","_this$state2","type","autoComplete","placeholder","aria-hidden","Masthead","onLogin","data-sticky-container","id","data-sticky","data-sticky-on","data-top-anchor","data-btm-anchor","navigation_Navigation","login_form_LoginForm","progress_bar","defaultState","oriValue","active","EditInline","selfRef","inputRef","toggleActive","contains","target","reset","change","render","style","staticElement","editable","aria-label","key","text","document","addEventListener","removeEventListener","prevProps","prevState","setTimeout","focus","newValue","description","uuid","mapping","SimpleForm","preventDefault","onCreate","trim","setDefaultOption","options","length","title","showMappingField","selectOptions","map","required","ErrorLoading","message","customStyles","content","top","left","right","bottom","marginRight","transform","FrameworkVersion","versions","framework","_useState","useState","_useState2","slicedToArray","showNotes","setShowNotes","_useState3","_useState4","notes","setNotes","versionItems","filter","version","number","release_notes","lib_default","isOpen","Parser","HeadersService","classCallCheck","instance","arguments","undefined","csfrToken","localStorage","getItem","Accept","Content-Type","X-CSRF-Token","Authorization","apiUrl","process","axios","defaults","baseURL","HttpService","headers","Headers","url","credentialType","get","withCredentials","body","option","post","patch","BodyService","_links","_embedded","domainId","domainUuid","_ref$mapping","draftId","draftUuid","href","target_id","field_map_other_competency","self","lang","_links2","_embedded2","_ref2","attributeTypeId","attributeTypeUuid","competencyId","competencyUuid","mutate","_ref3","releaseNotes","field_parent","field_release_notes","field_item","nodeId","vid","CompetencyService","http","response","data","Date","now","Body","createAttribute","createCompetency","mutateCompetency","toggleArchivingVersionedNode","attributeId","mutateAttribute","publishFramework","createDraftFramework","versionId","updateReleaseNotes","ActiveRequestsService","counter","callbacks","fn","push","index","forEach","safeFlat","array","Array","prototype","flat","reduce","acc","cur","toConsumableArray","tagsReg","RegExp","nbspReg","removeHtmlTags","htmlString","replaceBy","replace","ManageAttributes","activeRequests","competencyService","match","params","frameworkName","frameworkVersion","frameworStatus","attributeTypes","domainName","cid","competencyName","competencyData","loadingError","_callee","draftVersion","regenerator_default","wrap","_context","prev","next","startRequest","find","attribute","fetchFramework","t0","enqueueSnackbar","variant","finishRequest","finish","stop","scroll","loadData","fetchVersions","getAllVersionedFrameworks","allFrameworks","currentFramework","fw","toLowerCase","attribute_types","reverse","liveVersion","status","frameworkData","getVersionedDraftFramework","getVersionedFramework","competencyMatch","filterByCompetencyId","frameworkStatus","domainTitle","item","domains","domain","competencies","competency","nid","patchAttribute","isArchived","attributeType","_this$state3","attributes","archived","EditInline_EditInline","editAttribute","toggleArchive","_this3","_this$state4","getAttributeRows","_this$state5","error_loading_ErrorLoading","SimpleForm_SimpleForm","getAttributeList","FrameworkVersions","withSnackbar","VersionControls","release","updateNotes","createDraft","curr","originalNotes","setVersion","_useState5","_useState6","pressedRelease","setPressedRelease","_useState7","_useState8","pressedNotes","setPressedNotes","react_ckeditor_component_lib_default","events","editor","getData","cleanNotes","ManageCompetencies","frameworkVersionId","competencyTypes","releaseNewVersion","_callee2","_context2","_callee3","_context3","_callee4","_context4","refs","scrollIntoView","patchCompetency","getCompetencyRows","_this4","editCompetency","bind","_this$state6","version_controls_VersionControls","getCompetencyList","CoursesService","CompetencyDetails","coursesService","location","pathname","split","attributeDefs","resources","Promise","all","getFramework","getAttributes","getResources","getAllFrameworks","frameworkMatch","getCourses","allResources","resource","competency_profile","profile","objectSpread","competencyDetails","def","mapped_other_competency","resourceBlock","CompetencyList","disable","attributesGrouped","groupBy","keys","Collapsible_default","trigger","triggerWhenOpen","parentIndex","DomainList","childIndex","components_competency_list_CompetencyList","Courses","possibleConstructorReturn","getPrototypeOf","call","courses","filteredCourses","onFilter","term","e","course","test","allCourses","filterCourses","filteredProfiles","modifiedCourse","frameworkDescription","filteredDomains","filteredCompetencies","versionStatus","vr","domainList","domain_list_DomainList","esm","courses_Courses","_props$match$params","ResourceEdit","csrf","updateFlag","path","dates","dates2","target_audience","learning_outcomes","keywords","organisers","trainers","evt","newContent","csrfURL","fetch","then","Response","findresponse2","fetchResource","json","findresponse","alert","history","console","log","checkUser","start_date","end_date","ResourceEdit_EditForm","EditForm","setRedirect","redirect","handleTitle","assertThisInitialized","handleDates","handleDates2","handleType","handleDesc","handleLocation","handleURL","handleTargetAudience","handleLearningOutcomes","handleKeywords","handleOrganisers","handleTrainers","_this5","_this6","context","router","method","cookies","JSON","stringify","field_dates","field_end_date","field_type","field_description","format","field_location","field_url","field_target_audience","field_learning_outcomes","field_keywords","field_organisers","field_trainers","handleSubmit","activeClass","contextTypes","PropTypes","object","EditResources","react_router","exact","component","ResourceCreate","changeDescription","changeTargetAudience","changeLearningOutcomes","changeOrganisers","changeTrainers","token","credentials","CreateResources","AttributeMap","selectedFramework","resourceID","frameworkdetails","frameworkUUID","selectedAttributes","selectedCompetencies","resourceDetails","handleSelect","checkedAttributes","attributeIDs","i","payload","embedded_string","handleCloseModal","childItems","getElementsByName","checked","getAttribute","splice","indexOf","getElementById","is","lists","each","attr","fetchCompetencyList","fetchFrameworkDetails","findresponse1","nextProps","nextState","frameworkDetails","frameworkDefs","domainsOptions","attributeTypeOptions","ikey","attribute_type","data-id","ListOfCompetencies","did","defaultChecked","data-test","handleAllCheck","marginLeft","marginBottom","data-uuid","handleAttributeClick","ResourceDetails","frameworks","resourcePath","showModal","handleOpenModal","temp","fetchData","resourcesURL","findresponse3","display","margin","Resource","date","mappingBlock","overflow","overlayClassName","contentLabel","text-align","toUpperCase","data-close","containers_AttributeMap","ResDetails","ResourcesList","filterType","archiveHandle","rid","archivedStatus","field_archived","toLocaleLowerCase","ListOfResources","substr","filterTypeHandle","Resources","ChangePassword","handlePasswordChange","old","new1","uid","new","resp","reload","About","FrameworkButton","slice","prevVersion","newVersion","data-equalizer-watch","height","src","logo","alt","data-icon","FrameworkButtons","data-equalizer","framework_button_FrameworkButton","Frameworks","error","framework_buttons_FrameworkButtons","loginUrl","logoutUrl","login","_x","_x2","_login","apply","pass","sent","setItem","current_user","csrf_token","logout_token","abrupt","removeItem","Root","handleActiveRequests","hasPendingRequests","detectUserChangesFromOtherTabs","handleLogin","t1","handleLogout","foundationExtendEBI","subcription","build","maxSnack","anchorOrigin","vertical","horizontal","preventDuplicate","masthead_Masthead","Root_ProtectedRoute","condition","ProtectedRoute","objectWithoutProperties","assign","root","ReactDOM","basename","containers_Root","Modal","setAppElement","module","exports"],"mappings":"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","file":"static/js/main.c6749e3b.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './progress-bar.module.css';\r\n\r\nfunction ProgressBar({ isActive }) {\r\n\r\n  return (\r\n      <React.Fragment>\r\n      { isActive &&\r\n    <div className={`warning progress ${styles.progress}`} role=\"progressbar\">\r\n      <div className={`progress-meter ${styles.meter}`}/>\r\n    </div>\r\n    }\r\n      </React.Fragment>\r\n  );\r\n}\r\n\r\nProgressBar.defaultProps = {\r\n  isActive: false\r\n};\r\n\r\nProgressBar.propTypes = {\r\n  isActive: PropTypes.bool\r\n};\r\n\r\nexport default ProgressBar;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst $ = window.$;\r\n\r\nclass Navigation extends Component {\r\n  navRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    $(this.navRef.current).foundation();\r\n  }\r\n\r\n  logout = () => {\r\n    const { onLogout } = this.props;\r\n    onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user } = this.props;\r\n\r\n    const frameworkResources = (\r\n      <li>\r\n        <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n          tabIndex=\"0\"\r\n          className=\"dropdown-on-dark-background\"\r\n        >\r\n          Manage Competencies\r\n        </a>\r\n        <ul className=\"menu vertical\">\r\n          <li>\r\n            <Link to=\"/framework/bioexcel/manage/competencies\">BioExcel</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/corbel/manage/competencies\">CORBEL</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/iscb/manage/competencies\">ISCB</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/ritrain/manage/competencies\">RITrain</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/nhs/manage/competencies\">NHS</Link>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    );\r\n\r\n    const trainingResources = (\r\n      <li>\r\n        <Link to=\"/all-training-resources\">Manage Training Resources</Link>\r\n      </li>\r\n    );\r\n\r\n    const userDropdown = (\r\n      <li>\r\n        <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n          tabIndex=\"0\"\r\n          className=\"dropdown-on-light-background\"\r\n        >\r\n          <i className=\"fas fa-user\" /> Hi {user}\r\n        </a>\r\n        <ul className=\"menu vertical\">\r\n          <li>\r\n            <Link to={'/user/change/password'}>Change password</Link>\r\n          </li>\r\n          <li>\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.logout}\r\n            >\r\n              Logout\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    );\r\n\r\n    return (\r\n      <nav ref={this.navRef}>\r\n        <ul\r\n          className=\"dropdown menu float-left\"\r\n          data-dropdown-menu\r\n          data-description=\"navigational\"\r\n        >\r\n          {roles.includes('framework_manager') && frameworkResources}\r\n          {roles.includes('content_manager') && trainingResources}\r\n        </ul>\r\n        <ul\r\n          className=\"dropdown menu float-right\"\r\n          data-dropdown-menu\r\n          data-description=\"user tasks\"\r\n        >\r\n          {userDropdown}\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass LoginForm extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ [event.currentTarget.name]: event.currentTarget.value });\r\n  };\r\n\r\n  submit = () => {\r\n    const { onSubmit } = this.props;\r\n    const { username, password } = this.state;\r\n    if (username && password) {\r\n      onSubmit(username, password);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n    return (\r\n      <nav>\r\n        {/* The wrapping in an `ul.menu.float-left > li` is necessary for the sticky header to work */}\r\n        <ul className=\"menu float-left small-12\">\r\n          <li className=\"small-12 margin-bottom-large\">\r\n            <label className=\"columns small-4 medium-3 large-2 margin-top-large\">\r\n              <input\r\n                value={username}\r\n                name=\"username\"\r\n                onChange={event => this.onChange(event)}\r\n                type=\"text\"\r\n                autoComplete=\"username\"\r\n                placeholder=\"Username\"\r\n              />\r\n            </label>\r\n            <label className=\"columns small-4 medium-3 large-2 margin-top-large\">\r\n              <input\r\n                value={password}\r\n                name=\"password\"\r\n                onChange={event => this.onChange(event)}\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n                placeholder=\"Password\"\r\n              />\r\n            </label>\r\n            <div className=\"columns small-4 medium-6 large-8 margin-top-large\">\r\n              <button\r\n                className=\"button\"\r\n                type=\"button\"\r\n                onClick={() => this.submit()}\r\n              >\r\n                <i className=\"fa fa-key\" aria-hidden=\"true\" /> Login\r\n              </button>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ProgressBar from '../../../shared/components/progress-bar/progress-bar';\r\nimport Navigation from '../navigation/Navigation';\r\nimport LoginForm from '../login-form/LoginForm';\r\n\r\nclass Masthead extends Component {\r\n  static propTypes = {\r\n    user: PropTypes.string.isRequired,\r\n    roles: PropTypes.string.isRequired,\r\n    onLogin: PropTypes.func.isRequired,\r\n    onLogout: PropTypes.func.isRequired\r\n  };\r\n\r\n  onLogin = (username, password) => {\r\n    this.props.onLogin(username, password);\r\n  };\r\n\r\n  onLogout = () => {\r\n    this.props.onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user, isActive } = this.props;\r\n\r\n    return (\r\n      <div data-sticky-container>\r\n        <header\r\n          id=\"masthead\"\r\n          className=\"masthead\"\r\n          data-sticky\r\n          data-sticky-on=\"large\"\r\n          data-top-anchor=\"main-content-area:top\"\r\n          data-btm-anchor=\"main-content-area:bottom\"\r\n        >\r\n          <div className=\"masthead-inner row\">\r\n            <div className=\"columns medium-12\" id=\"local-title\">\r\n              <h1>\r\n                <Link to=\"/\">Competency Mapper</Link>\r\n              </h1>\r\n            </div>\r\n            {user && roles ? (\r\n              <Navigation roles={roles} user={user} onLogout={this.onLogout} />\r\n            ) : (\r\n              <LoginForm onSubmit={this.onLogin} />\r\n            )}\r\n          </div>\r\n          <ProgressBar isActive={isActive} />\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Masthead;\r\n","import React, { Component } from 'react';\r\n\r\nimport './EditInline.css';\r\n\r\nconst defaultProps = {\r\n  style: {} as Record<string, string | number>,\r\n  text: '',\r\n  change: (newValue: string) => {},\r\n  staticElement: 'div',\r\n  editable: true\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  oriValue: '',\r\n  value: '',\r\n  active: false\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class EditInline extends Component<Props, State> {\r\n  static defaultProps = defaultProps; // No idea why the props are marked as optional (see '!' in the code below)\r\n  readonly state: State = defaultState;\r\n  selfRef = React.createRef<HTMLDivElement>();\r\n  inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  componentDidMount() {\r\n    const { text } = this.props;\r\n    this.setState({ value: text!, oriValue: text! });\r\n    document.addEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props, prevState: State) {\r\n    const { active } = this.state;\r\n    if (active && !prevState.active) {\r\n      // Unable to focus on the input element.\r\n      // this.inputRef.current && this.inputRef.current.focus();\r\n\r\n      // Dirty: The only way I was able to focus on the input element.\r\n      setTimeout(\r\n        () => this.inputRef.current && this.inputRef.current.focus(),\r\n        0\r\n      );\r\n    }\r\n  }\r\n\r\n  toggleActive = (event: MouseEvent) => {\r\n    if (\r\n      this.selfRef.current &&\r\n      this.selfRef.current.contains(event.target as Node)\r\n    ) {\r\n      this.setState({ active: true });\r\n      return;\r\n    }\r\n    this.reset();\r\n  };\r\n\r\n  onChange(value: string) {\r\n    this.setState({ value });\r\n  }\r\n\r\n  reset = () => {\r\n    const { oriValue, active } = this.state;\r\n    if (active) {\r\n      this.setState({ active: false, value: oriValue });\r\n    }\r\n  };\r\n\r\n  submit = () => {\r\n    const { change } = this.props;\r\n    const { value } = this.state;\r\n    change!(value);\r\n    this.setState({ active: false, oriValue: value });\r\n  };\r\n\r\n  render = () => {\r\n    const { style, staticElement, editable } = this.props;\r\n    const { value, active } = this.state;\r\n\r\n    if (!editable) {\r\n      return React.createElement(staticElement!, { style }, value);\r\n    }\r\n\r\n    if (!active) {\r\n      return React.createElement(staticElement!, { style, ref: this.selfRef }, [\r\n        value,\r\n        <i\r\n          key=\"dummy\"\r\n          className=\"icon icon-common icon-edit icon-left-spacer\"\r\n          aria-label=\"edit\"\r\n        />\r\n      ]);\r\n    }\r\n\r\n    return (\r\n      <div className=\"edit-inline-container\" ref={this.selfRef}>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inner-input\"\r\n          value={value}\r\n          onChange={event => this.onChange(event.target.value)}\r\n          ref={this.inputRef}\r\n          // autoFocus={true} // It only works when it is rendered after mounting\r\n        />\r\n        <div className=\"edit-inline-controls\">\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.submit}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-check\"\r\n              aria-label=\"accept changes\"\r\n            />\r\n          </button>\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.reset}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-undo\"\r\n              aria-label=\"undo changes\"\r\n            />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nconst defaultProps = {\r\n  showMappingField: false\r\n};\r\n\r\ntype Props = {\r\n  title: string;\r\n  placeholder: string;\r\n  options: Record<'description' | 'uuid', string>[];\r\n  onCreate(newValue: string, uuid: string, mapping: string): any;\r\n} & Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  description: '',\r\n  uuid: '',\r\n  mapping: ''\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class SimpleForm extends Component<Props, State> {\r\n  static defaultProps = defaultProps;\r\n  readonly state = defaultState;\r\n\r\n  componentDidMount() {\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  setDefaultOption() {\r\n    const { options } = this.props;\r\n    if (options.length) {\r\n      const { uuid } = options[0];\r\n      this.setState({ uuid });\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    this.setState(defaultState);\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  onChange = (event: React.FormEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    event.preventDefault();\r\n    const { value } = event.currentTarget;\r\n    const name = event.currentTarget.name;\r\n    // https://github.com/Microsoft/TypeScript/issues/13948\r\n    if (name === 'uuid') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'description') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'mapping') {\r\n      this.setState({ [name]: value });\r\n    }\r\n  };\r\n\r\n  onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const { onCreate } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    if (description.trim() && uuid) {\r\n      onCreate(description, uuid, mapping);\r\n      this.reset();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, placeholder, options, showMappingField } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    const selectOptions = options.map(({ description, uuid }) => (\r\n      <option key={uuid} value={uuid}>\r\n        {description}\r\n      </option>\r\n    ));\r\n\r\n    return (\r\n      <form onSubmit={this.onSubmit} className=\"callout\">\r\n        <h4>{title}</h4>\r\n        <div className=\"row\">\r\n          <div className=\"column large-7\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder={placeholder}\r\n              name=\"description\"\r\n              value={description}\r\n              required\r\n              onChange={this.onChange}\r\n            />\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <select name=\"uuid\" value={uuid} required onChange={this.onChange}>\r\n              {selectOptions}\r\n            </select>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <input type=\"submit\" className=\"button\" value=\"Create\" />\r\n          </div>\r\n          {showMappingField ? (\r\n            <div className=\"column\">\r\n              <label>\r\n                Maps to competency/attribute from other framework\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Framework (version), competency or attribute\"\r\n                  name=\"mapping\"\r\n                  value={mapping}\r\n                  onChange={this.onChange}\r\n                />\r\n              </label>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst defaultProps = {\r\n  message: 'Sorry, there was a problem when fetching the data!',\r\n  style: {} as Record<string, string | number>\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nexport const ErrorLoading: React.FC<Props> = ({ message, style }) => {\r\n  return (\r\n    <div className=\"margin-top-large callout alert\" style={style}>\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nErrorLoading.defaultProps = defaultProps;\r\n\r\nexport default ErrorLoading;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\nimport Parser from 'html-react-parser';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  versions: Version[];\r\n  framework: string;\r\n  style:string;\r\n};\r\n\r\nconst customStyles = {\r\n  content : {\r\n    top                   : '50%',\r\n    left                  : '50%',\r\n    right                 : 'auto',\r\n    bottom                : 'auto',\r\n    marginRight           : '-50%',\r\n    transform             : 'translate(-50%, -50%)'\r\n  }\r\n};\r\n\r\nexport const FrameworkVersion: React.FC<Props> = ({ versions, framework }) => {\r\n  const [showNotes, setShowNotes] = useState(false);\r\n  const [notes, setNotes] = useState('');\r\n\r\n  let versionNumber = '';\r\n\r\n  const versionItems = versions\r\n    .filter(version => version.number !== 'draft')\r\n    .map(version => (\r\n      <li key={version.id}>\r\n        <Link to={`/framework/${framework}/${version.number}`}>\r\n          {version.number}\r\n        </Link>{' '}\r\n        <button\r\n          className=\"anchor-like\"\r\n          onClick={() => {\r\n            setNotes(\"Version: \"+version.number + version.release_notes);\r\n            setShowNotes(true);\r\n          }}\r\n        >\r\n          (release notes)\r\n        </button>\r\n      </li>\r\n    ));\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={showNotes} style={customStyles}> \r\n        <h4>Release notes for {framework}  </h4>\r\n        {Parser(notes)}\r\n        {versionItems}\r\n        <div className=\"padding-top-large\">\r\n\r\n          <button\r\n            className=\"button\"\r\n            onClick={() => {\r\n              setNotes('');\r\n              setShowNotes(false);\r\n            }}\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n      <div className=\"callout\">\r\n        <h5>Framework versions</h5>\r\n        {versions.length === 0 ? (\r\n          'No previous versions'\r\n        ) : (\r\n          <ul>{versionItems}</ul>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FrameworkVersion;\r\n","class HeadersService {\r\n  static instance;\r\n\r\n  constructor() {\r\n    if (HeadersService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    HeadersService.instance = this;\r\n  }\r\n\r\n  get(type = 'hal+json') {\r\n    const csfrToken = window.localStorage.getItem('csrf_token');\r\n    if (type === 'json') {\r\n      return {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': csfrToken,\r\n        Authorization: 'Basic'\r\n      };\r\n    }\r\n\r\n    return {\r\n      Accept: 'application/hal+json',\r\n      'Content-Type': 'application/hal+json',\r\n      'X-CSRF-Token': csfrToken,\r\n      Authorization: 'Basic'\r\n    };\r\n  }\r\n}\r\n\r\nexport default HeadersService;\r\n","import Headers from './headers';\r\nimport axios from 'axios';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\naxios.defaults.baseURL = apiUrl;\r\n\r\nclass HttpService {\r\n  static instance;\r\n  headers = new Headers();\r\n\r\n  constructor() {\r\n    if (HttpService.instance) {\r\n      return HttpService.instance;\r\n    }\r\n\r\n    HttpService.instance = this;\r\n  }\r\n\r\n  get(url, credentialType = '') {\r\n    if (credentialType) {\r\n      return axios.get(url, {\r\n        headers: this.headers.get(credentialType),\r\n        withCredentials: true\r\n      });\r\n    }\r\n    return axios.get(url);\r\n  }\r\n\r\n  post(url, body, option = 'hal+json') {\r\n    return axios.post(url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n\r\n  patch(url, body, option = 'hal+json') {\r\n    return axios.patch(url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","import { apiUrl } from '../http/http';\r\n\r\nclass BodyService {\r\n  static createCompetency({\r\n    description,\r\n    domainId,\r\n    domainUuid,\r\n    mapping = '',\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/competency`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'competency'\r\n        }\r\n      ],\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static createAttribute({\r\n    description,\r\n    attributeTypeId,\r\n    attributeTypeUuid,\r\n    competencyId,\r\n    competencyUuid,\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/attribute`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'attribute'\r\n        }\r\n      ],\r\n\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static mutateCompetency(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateAttribute(key, value) {\r\n    return BodyService.mutate(key, value, 'attribute');\r\n  }\r\n\r\n  static mutate(key, value, target) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/${target}`\r\n        }\r\n      },\r\n      [key]: [\r\n        {\r\n          value: value\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: target\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static publishFramework(framework, version, releaseNotes) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: releaseNotes\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: version\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static createDraftFramework(framework) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: 'draft'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static toggleArchivingVersionedNode(framework, nodeId) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: nodeId\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static updateReleaseNotes(notes) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href:\r\n            //'https://dev-competency-mapper.pantheonsite.io/rest/type/taxonomy_term/version'\r\n            `${apiUrl}/rest/type/taxonomy_term/version`\r\n        }\r\n      },\r\n      vid: [\r\n        {\r\n          target_id: 'version'\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: notes\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\nexport default BodyService;\r\n","import HttpService from '../http/http';\r\nimport Body from './body';\r\n\r\nclass CompetencyService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CompetencyService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CompetencyService.instance = this;\r\n  }\r\n\r\n  async getFramework(framework) {\r\n    const response = await this.http.get(\r\n      `/api/v1/framework/${framework}?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedDraftFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/edit?_format=json`,\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/${version}?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getAllFrameworks() {\r\n    const response = await this.http.get(`/api/v1/framework?_format=json`);\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getAllVersionedFrameworks() {\r\n    const response = await this.http.get(\r\n      `/api/version_manager?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createAttribute(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createAttribute(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async createCompetency(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createCompetency(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetency(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetency(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async toggleArchivingVersionedNode(framework, nodeId) {\r\n    const response = await this.http.patch(\r\n      `/api/${framework}/edit?_format=json`,\r\n      Body.toggleArchivingVersionedNode(framework, nodeId),\r\n      'json'\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttribute(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async publishFramework(framework, version, releaseNotes) {\r\n    const response = await this.http.patch(\r\n      '/api/version_manager?_format=json',\r\n      Body.publishFramework(framework, version, releaseNotes),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createDraftFramework(framework) {\r\n    const response = await this.http.post(\r\n      '/api/version_manager?_format=json',\r\n      Body.createDraftFramework(framework),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async updateReleaseNotes(notes, versionId) {\r\n    const response = await this.http.patch(\r\n      `/taxonomy/term/${versionId}?_format=hal_json`,\r\n      Body.updateReleaseNotes(notes)\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CompetencyService;\r\n","class ActiveRequestsService {\r\n  static instance;\r\n  counter = 0;\r\n  callbacks = [];\r\n\r\n  get isActive() {\r\n    return !!this.counter;\r\n  }\r\n\r\n  constructor() {\r\n    if (ActiveRequestsService.instance) {\r\n      return ActiveRequestsService.instance;\r\n    }\r\n\r\n    ActiveRequestsService.instance = this;\r\n  }\r\n\r\n  addEventListener(fn) {\r\n    return this.callbacks.push(fn);\r\n  }\r\n\r\n  removeEventListener(index) {\r\n    return delete this.callbacks[index - 1];\r\n  }\r\n\r\n  startRequest() {\r\n    if (this.counter === 0) {\r\n      this.callbacks.forEach(fn => fn && fn(true));\r\n    }\r\n    ++this.counter;\r\n  }\r\n\r\n  finishRequest() {\r\n    if (this.counter === 1) {\r\n      this.callbacks.forEach(fn => fn && fn(false));\r\n    }\r\n\r\n    if (this.counter > 0) {\r\n      --this.counter;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ActiveRequestsService;\r\n","// In modern browser (es2018), instead of `reduce` it is possible to call `flat`\r\nexport const safeFlat = array =>\r\n  Array.prototype.flat\r\n    ? array.flat()\r\n    : array.reduce((acc, cur) => [...acc, ...cur], []);\r\n\r\nconst tagsReg = new RegExp('</?.+?/?>', 'g');\r\nconst nbspReg = /&nbsp;/g;\r\n\r\nexport const removeHtmlTags = (htmlString, replaceBy = '') =>\r\n  htmlString.replace(tagsReg, replaceBy).replace(nbspReg, ' ');\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat } from '../services/util/util';\r\n\r\nclass ManageAttributes extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    // framework level\r\n    framework: this.props.match.params.framework,\r\n    frameworkName: '',\r\n    frameworkVersion: '',\r\n    frameworStatus: '',\r\n    attributeTypes: [], // defined at framework level\r\n    versions: [],\r\n\r\n    // domain level\r\n    domainId: '',\r\n    domainName: '',\r\n\r\n    // competency level\r\n    competencyId: this.props.match.params.cid,\r\n    competencyUuid: '',\r\n    competencyName: '',\r\n    competencyData: [],\r\n\r\n    loadingError: false,\r\n    editable: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.scroll(0, 0);\r\n    this.loadData();\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions() {\r\n    const { framework } = this.state;\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const attributeTypes = currentFramework[0].attribute_types.map(\r\n        attribute => ({ description: attribute.title, uuid: attribute.uuid })\r\n      );\r\n      this.setState({\r\n        versions: currentFramework[0].versions.reverse(),\r\n        attributeTypes\r\n      });\r\n    }\r\n  }\r\n\r\n  async fetchFramework() {\r\n    const { framework, versions, competencyId } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    const competencyMatch = this.filterByCompetencyId(\r\n      frameworkData,\r\n      competencyId\r\n    );\r\n\r\n    if (competencyMatch.length) {\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        domainName: competencyMatch[0].domainTitle,\r\n        domainId: competencyMatch[0].domainId,\r\n        competencyUuid: competencyMatch[0].uuid,\r\n        competencyName: competencyMatch[0].title,\r\n        competencyData: competencyMatch[0],\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  filterByCompetencyId(data, id) {\r\n    return safeFlat(\r\n      data.map(item =>\r\n        safeFlat(\r\n          item.domains.map(domain =>\r\n            domain.competencies\r\n              .filter(competency => competency.id === id)\r\n              .map(competency => {\r\n                competency.domainTitle = domain.title;\r\n                competency.domainId = domain.nid;\r\n                return competency;\r\n              })\r\n          )\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  createAttribute = async (description, attributeTypeUuid, mapping) => {\r\n    const {\r\n      competencyId,\r\n      competencyUuid,\r\n      attributeTypes,\r\n      versions\r\n    } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const attributeTypeId = attributeTypes.find(\r\n        attribute => attribute.uuid === attributeTypeUuid\r\n      ).id;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createAttribute({\r\n        description,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editAttribute(attributeId, title) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(attributeId, 'title', title);\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(attributeId, isArchived) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(\r\n        attributeId,\r\n        'field_archived',\r\n        isArchived === '1' ? false : true\r\n      );\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  getAttributeRows(attributeType) {\r\n    const { competencyData, editable } = this.state;\r\n\r\n    return competencyData.attributes\r\n      .filter(attribute => attribute.type === attributeType.description)\r\n      .map(attribute => {\r\n        if (editable) {\r\n          return (\r\n            <tr key={attribute.uuid}>\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.title}\r\n                  change={newValue =>\r\n                    this.editAttribute(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n              <td>\r\n                <button\r\n                  className=\"cursor\"\r\n                  onClick={() =>\r\n                    this.toggleArchive(attribute.id, attribute.archived)\r\n                  }\r\n                >\r\n                  {attribute.archived === '1' ? (\r\n                    <span className=\"fas fa-toggle-on\">\r\n                      <span>Archived</span>\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"fas fa-toggle-off\" />\r\n                  )}\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          );\r\n        }\r\n\r\n        if (attribute.archived === '1') {\r\n          return null;\r\n        }\r\n        return (\r\n          <tr key={attribute.uuid}>\r\n            <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={attribute.title}\r\n                change={newValue => this.editAttribute(attribute.id, newValue)}\r\n                editable={editable}\r\n              />\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n  }\r\n\r\n  getAttributeList() {\r\n    const { attributeTypes, editable } = this.state;\r\n    return attributeTypes.map(attributeType => (\r\n      <React.Fragment key={attributeType.uuid}>\r\n        <tr className=\"secondary-background-important white-color\">\r\n          <td>\r\n            <strong>\r\n              <em>{attributeType.description}</em>\r\n            </strong>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n        </tr>\r\n        {this.getAttributeRows(attributeType)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      attributeTypes,\r\n      versions,\r\n      domainId,\r\n      domainName,\r\n      competencyName,\r\n      competencyData,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (competencyData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage attributes</h2>\r\n        <h4>\r\n          <Link to={`/framework/${framework}/manage/competencies`}>\r\n            {frameworkName}\r\n          </Link>\r\n          {' / '}\r\n          <Link to={`/framework/${framework}/manage/competencies/${domainId}`}>\r\n            {domainName}\r\n          </Link>\r\n          {' / '}\r\n          {competencyName}\r\n        </h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new attribute\"\r\n            placeholder=\"Attribute description\"\r\n            options={attributeTypes}\r\n            onCreate={this.createAttribute}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getAttributeList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageAttributes);\r\n","import React, { FC, useState } from 'react';\r\n\r\nimport Modal from 'react-modal';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  release(version: string, notes: string): void;\r\n  updateNotes(notes: string): void;\r\n  createDraft(): void;\r\n  versions: Version[];\r\n  editable: false;\r\n};\r\n\r\nexport const VersionControls: React.FC<Props> = ({\r\n  release,\r\n  updateNotes,\r\n  createDraft,\r\n  versions,\r\n  editable\r\n}) => {\r\n  const liveVersion = versions.reduce((prev, curr) => {\r\n    if (curr.status === 'live') {\r\n      return curr.number;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const originalNotes = versions.reduce((prev, curr) => {\r\n    if (curr.number === 'draft') {\r\n      return curr.release_notes;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const [version, setVersion] = useState('');\r\n  const [notes, setNotes] = useState(originalNotes);\r\n  const [pressedRelease, setPressedRelease] = useState(false);\r\n  const [pressedNotes, setPressedNotes] = useState(false);\r\n\r\n  const reset = () => {\r\n    setVersion('');\r\n    setPressedRelease(false);\r\n  };\r\n\r\n  const publish = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const cleanNotes = notes.trim();\r\n    if (pressedRelease && version && cleanNotes) {\r\n      release(version, cleanNotes);\r\n      reset();\r\n    }\r\n  };\r\n\r\n  if (editable) {\r\n    return (\r\n      <div>\r\n        <Modal isOpen={pressedNotes}>\r\n          <CKEditor\r\n            content={notes}\r\n            events={{\r\n              change: (event: any) => setNotes(event.editor.getData())\r\n            }}\r\n          />\r\n          <div className=\"padding-top-large\">\r\n            <span className=\"padding-right-small\">\r\n              <button\r\n                className=\"button\"\r\n                onClick={() => {\r\n                  setNotes(originalNotes);\r\n                  setPressedNotes(false);\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </span>\r\n            <button\r\n              className=\"button\"\r\n              onClick={() => {\r\n                updateNotes(notes);\r\n                setPressedNotes(false);\r\n              }}\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n        <Modal isOpen={pressedRelease}>\r\n          <form onSubmit={publish}>\r\n            <label>\r\n              Version{' '}\r\n              {liveVersion\r\n                ? `(live version ${liveVersion})`\r\n                : '(no live version)'}\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"1.0.0\"\r\n                value={version}\r\n                required\r\n                onChange={event => setVersion(event.currentTarget.value.trim())}\r\n              />\r\n            </label>\r\n            <CKEditor\r\n              content={notes}\r\n              events={{\r\n                change: (event: any) => setNotes(event.editor.getData())\r\n              }}\r\n            />\r\n            <div className=\"padding-top-large\">\r\n              <span className=\"padding-right-small\">\r\n                <button className=\"button\" onClick={reset}>\r\n                  Cancel\r\n                </button>\r\n              </span>\r\n              <button className=\"button\" type=\"submit\">\r\n                Publish\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </Modal>\r\n        <span className=\"padding-right-small\">\r\n          <button className=\"button\" onClick={() => setPressedRelease(true)}>\r\n            Release new version\r\n          </button>\r\n        </span>\r\n        <button className=\"button\" onClick={() => setPressedNotes(true)}>\r\n          Update release notes\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <span className=\"padding-right-small\">\r\n        <button className=\"button\" onClick={() => createDraft()}>\r\n          Create draft\r\n        </button>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VersionControls;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\nimport VersionControls from '../containers/version-controls/VersionControls';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nclass ManageCompetencies extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkName: '',\r\n    frameworkData: [],\r\n    frameworkVersion: '',\r\n    frameworkVersionId: '',\r\n    frameworkStatus: '',\r\n    competencyTypes: [],\r\n    versions: [],\r\n    loadingError: false,\r\n    editable: false\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework } = props.match.params;\r\n    if (framework !== state.framework) {\r\n      return {\r\n        framework,\r\n        frameworkData: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, domainId } = this.props.match.params;\r\n    await this.loadData(framework);\r\n\r\n    if (domainId) {\r\n      setTimeout(() => {\r\n        const ref = this.refs[domainId];\r\n        if (ref) {\r\n          ref.scrollIntoView();\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkData, loadingError } = this.state;\r\n    if (framework !== prevState.framework) {\r\n      if (frameworkData.length === 0 && !loadingError) {\r\n        this.loadData(framework);\r\n      }\r\n    }\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework) {\r\n    const { versions } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      this.setState({ frameworkVersionId: draftVersion[0].id });\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    if (frameworkData.length) {\r\n      const competencyTypes = frameworkData[0].domains.map(domain => ({\r\n        description: domain.title,\r\n        uuid: domain.uuid\r\n      }));\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkData,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        competencyTypes,\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  createCompetency = async (description, domainUuid, mapping) => {\r\n    const { framework, frameworkData, versions } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const domainId = frameworkData[0].domains.find(\r\n        domain => domain.uuid === domainUuid\r\n      ).nid;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createCompetency({\r\n        description,\r\n        domainId,\r\n        domainUuid,\r\n        mapping,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editCompetency(cid, title) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetency(cid, 'title', title);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(cid, isArchived) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.toggleArchivingVersionedNode(framework, cid);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  releaseNewVersion = async (version, notes) => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.publishFramework(framework, version, notes);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  updateNotes = async notes => {\r\n    const { framework, frameworkVersionId } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.updateReleaseNotes(\r\n        notes,\r\n        frameworkVersionId\r\n      );\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  createDraft = async () => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.createDraftFramework(framework);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  getCompetencyList() {\r\n    const { frameworkData, editable } = this.state;\r\n    return frameworkData[0].domains.map(domain => (\r\n      <React.Fragment key={domain.nid}>\r\n        <tr\r\n          className=\"secondary-background-important white-color\"\r\n          ref={domain.nid}\r\n        >\r\n          <td>\r\n            <h4>{domain.title}</h4>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          <td>Attributes</td>\r\n        </tr>\r\n        {this.getCompetencyRows(domain.competencies)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  getCompetencyRows(competencies) {\r\n    const { framework, editable } = this.state;\r\n    return competencies.map(competency => {\r\n      if (editable) {\r\n        return (\r\n          <tr key={competency.id}>\r\n            <td className={competency.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={competency.title}\r\n                change={newValue =>\r\n                  this.editCompetency(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n            <td>\r\n              <button\r\n                className=\"cursor\"\r\n                onClick={this.toggleArchive.bind(\r\n                  this,\r\n                  competency.id,\r\n                  competency.archived\r\n                )}\r\n              >\r\n                {competency.archived === '1' ? (\r\n                  <span className=\"fas fa-toggle-on\">\r\n                    <span>Archived</span>\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"fas fa-toggle-off\" />\r\n                )}\r\n              </button>\r\n            </td>\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/manage/competencies/${\r\n                  competency.id\r\n                }/manage-attributes`}\r\n              >\r\n                <i className=\"fas fa-sitemap\" />\r\n              </Link>\r\n            </td>\r\n          </tr>\r\n        );\r\n      }\r\n\r\n      if (competency.archived === '1') {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <tr key={competency.id}>\r\n          <td>\r\n            <InlineEdit\r\n              text={competency.title}\r\n              change={newValue => this.editCompetency(competency.id, newValue)}\r\n              editable={editable}\r\n            />\r\n          </td>\r\n          <td>\r\n            <Link\r\n              to={`/framework/${framework}/manage/competencies/${\r\n                competency.id\r\n              }/manage-attributes`}\r\n            >\r\n              <i className=\"fas fa-sitemap\" />\r\n            </Link>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkData,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      competencyTypes,\r\n      versions,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (frameworkData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage framework</h2>\r\n        <h4>{frameworkName}</h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        <VersionControls\r\n          editable={editable}\r\n          createDraft={this.createDraft}\r\n          versions={versions}\r\n          release={this.releaseNewVersion}\r\n          updateNotes={this.updateNotes}\r\n        />\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new competency\"\r\n            placeholder=\"Competency description\"\r\n            options={competencyTypes}\r\n            onCreate={this.createCompetency}\r\n            showMappingField={true}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getCompetencyList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageCompetencies);\r\n","import HttpService from '../http/http';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nclass CoursesService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CoursesService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CoursesService.instance = this;\r\n  }\r\n\r\n  async getCourses() {\r\n    const response = await this.http.get(\r\n      /*`${apiUrl}/api/v1/training-resources/all?_format=json`*/\r\n      `${apiUrl}/api/resources?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CoursesService;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport CoursesService from '../services/courses/courses';\r\n\r\nclass CompetencyDetails extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  coursesService = new CoursesService();\r\n\r\n  state = {\r\n    framework: this.props.match.params.framework,\r\n      version: this.props.location.pathname.split(\"/\"),\r\n    frameworkData: [],\r\n    competencyId: this.props.match.params.cid,\r\n    attributeDefs: [],\r\n    resources: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.getFramework(),\r\n        this.getAttributes(),\r\n        this.getResources()\r\n      ]);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async getFramework() {\r\n    const { framework } = this.state;\r\n      const { version } = this.state;\r\n    const frameworkData = await this.competencyService.getVersionedFramework(framework, version[3]);\r\n\r\n    this.setState({\r\n      frameworkData\r\n    });\r\n  }\r\n\r\n  async getAttributes() {\r\n    const allFrameworks = await this.competencyService.getAllFrameworks();\r\n    const { framework } = this.state;\r\n    const frameworkMatch = allFrameworks.filter(\r\n      item => item.name.toLowerCase() === framework\r\n    );\r\n    if (frameworkMatch.length) {\r\n      const attributeDefs = frameworkMatch[0].attribute_types.map(\r\n        attribute => attribute.title\r\n      );\r\n      this.setState({ attributeDefs });\r\n    }\r\n  }\r\n\r\n  async getResources() {\r\n    try {\r\n      const allResources = await this.coursesService.getCourses();\r\n      const resources = allResources.filter(\r\n        resource =>\r\n          !!resource.competency_profile.find(\r\n            profile =>\r\n              !!profile.domains.find(\r\n                domain =>\r\n                  !!domain.competencies.find(\r\n                    competency => competency.id === this.state.competencyId\r\n                  )\r\n              )\r\n          )\r\n      );\r\n\r\n      this.setState({ resources });\r\n      /*const resources = [{\"id\":1, \"title\":this.state.version[3]}];*/\r\n        this.setState({ resources });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to retrieve training resources', {\r\n        variant: 'error'\r\n      });\r\n    }\r\n  }\r\n\r\n  resourceBlock() {\r\n    const { resources } = this.state;\r\n    return resources.map(resource => (\r\n      <li key={resource.id}>\r\n        <Link to={`/training-resources/${resource.id}`}>{resource.title}</Link>\r\n      </li>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      competencyId,\r\n      frameworkData,\r\n      attributeDefs,\r\n      resources\r\n    } = this.state;\r\n\r\n    const competencies = [];\r\n\r\n    frameworkData.forEach(item =>\r\n      item.domains.forEach(domain =>\r\n        domain.competencies.forEach(competency => {\r\n          if (competency.id === competencyId) {\r\n            competencies.push({\r\n              ...competency,\r\n              framework: item.title,\r\n              domain: domain.title\r\n            });\r\n          }\r\n        })\r\n      )\r\n    );\r\n\r\n    const competencyDetails = competencies.map(competency => (\r\n      <div key={competency.id}>\r\n        <div className=\"row\">\r\n          <div className=\"column large-12\">\r\n            <h4>\r\n              {' '}\r\n              {competency.framework} / {competency.domain}\r\n            </h4>\r\n            <h4>{competency.title}</h4>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"column large-8\">\r\n            <ul>\r\n              {attributeDefs.map(def => {\r\n                return (\r\n                  <div key={def}>\r\n                    <div className=\"margin-top-medium\">\r\n                      {' '}\r\n                      <strong>\r\n                        <em>{def}</em>\r\n                      </strong>\r\n                    </div>\r\n                    {competency.attributes.map(attribute => {\r\n                      if (attribute.type === def) {\r\n                        return <li key={attribute.id}>{attribute.title} </li>;\r\n                      }\r\n                      return null;\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n          <div className=\"column large-4\">\r\n\r\n\r\n            <div className=\"callout notice industry-background white-color\">\r\n              <p>Competency derived from:</p>\r\n              <p> {competency.mapped_other_competency?competency.mapped_other_competency:\"No data available\"} </p>\r\n            </div>\r\n\r\n\r\n            {resources.length === 0 ? null : (\r\n              <div className=\"callout notice training-background white-color\">\r\n                <p>Training resources mapped to this competency</p>\r\n                <ul>{this.resourceBlock()}</ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"column large-12\">\r\n          <h3>Competency details</h3>\r\n          {competencyDetails}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(CompetencyDetails);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Collapsible from 'react-collapsible';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { groupBy } from 'lodash-es';\r\nimport './CompetencyList.css';\r\n\r\nfunction CompetencyList({ index, framework, competency, disable, version }) {\r\n  const attributesGrouped = groupBy(competency.attributes, 'type');\r\n  const attributesTypes = Object.keys(attributesGrouped);\r\n  const attributes = attributesTypes.map(type => {\r\n    const attributes = attributesGrouped[type].map(attribute => (\r\n      <li key={attribute.id}>{attribute.title}</li>\r\n    ));\r\n    return (\r\n      <div key={type}>\r\n        <em>{type}</em>\r\n        <ul>{attributes}</ul>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  if (competency.archived === '1') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        <Collapsible\r\n          trigger={\r\n            <div className=\"open-close-title\">\r\n              <span>{competency.title}</span>\r\n              <span className=\"icon icon-common icon-plus float-right\">\r\n                <p className=\"show-for-sr\">show more</p>\r\n              </span>\r\n            </div>\r\n          }\r\n          triggerWhenOpen={\r\n            <div className=\"open-close-title\">\r\n              <span>{competency.title}</span>\r\n              <span className=\"icon icon-common icon-minus float-right\">\r\n                <p className=\"show-for-sr\">show less</p>\r\n              </span>\r\n            </div>\r\n          }\r\n        >\r\n          <div className=\"padding-left-large padding-top-large\">\r\n            <Link to={`/framework/${framework}/${version}/competency/details/${competency.id}`}>\r\n              <span className=\"float-right\">\r\n                <i className=\"icon icon-spacer icon-common icon-info\" />\r\n                More details\r\n              </span>\r\n            </Link>\r\n            {attributes}\r\n          </div>\r\n        </Collapsible>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nCompetencyList.defaultProps = {\r\n  parentIndex: 0,\r\n  index: 0,\r\n  disable: true\r\n};\r\n\r\nCompetencyList.propTypes = {\r\n  parentIndex: PropTypes.number,\r\n  index: PropTypes.number,\r\n  framework: PropTypes.string,\r\n  competency: PropTypes.shape({\r\n    title: PropTypes.string\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CompetencyList from '../competency-list/CompetencyList';\r\n\r\nfunction DomainList({ index, framework, domain, disable, version }) {\r\n  const competencies = domain.competencies.map((competency, childIndex) => (\r\n    <CompetencyList\r\n      key={competency.id}\r\n      index={childIndex}\r\n      framework={framework}\r\n      competency={competency}\r\n      disable={disable}\r\n      version = {version}\r\n\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <tbody>\r\n      <tr className=\"white-color secondary-background\">\r\n        <td>\r\n          <h4> {domain.title}</h4>\r\n        </td>\r\n      </tr>\r\n      {competencies}\r\n    </tbody>\r\n  );\r\n}\r\n\r\nDomainList.defaultProps = {\r\n  domain: { title: '', competencies: [] },\r\n  disable: true\r\n};\r\n\r\nDomainList.propTypes = {\r\n  framework: PropTypes.string,\r\n  domain: PropTypes.shape({\r\n    title: PropTypes.string,\r\n    competencies: PropTypes.array\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default DomainList;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport ErrorLoading from '../../components/error-loading/ErrorLoading';\r\n\r\nimport ActiveRequestsService from '../../services/active-requests/active-requests';\r\nimport CoursesService from '../../services/courses/courses';\r\nimport { safeFlat } from '../../services/util/util';\r\n\r\nclass Courses extends Component {\r\n  static propTypes = {\r\n    framework: PropTypes.string,\r\n    version: PropTypes.string\r\n  };\r\n\r\n  state = {\r\n    courses: [],\r\n    filteredCourses: [],\r\n    filter: '',\r\n    loadingError: false,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.framework = props.framework;\r\n    this.state.version = props.version;\r\n  }\r\n\r\n  coursesService = new CoursesService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const allCourses = await this.coursesService.getCourses();\r\n      const courses = this.filterCourses(allCourses);\r\n      this.setState({ courses, filteredCourses: courses });\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  filterCourses(allCourses) {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const filteredCourses = [];\r\n    allCourses.forEach(course => {\r\n      if (course.archived === '1') {\r\n        return;\r\n      }\r\n\r\n      const filteredProfiles = course.competency_profile.filter(\r\n        profile => (profile.title || '').toLowerCase() === framework\r\n      );\r\n\r\n      if (filteredProfiles.length === 0) {\r\n        return;\r\n      }\r\n\r\n      const modifiedCourse = {\r\n        ...course,\r\n        competencies: safeFlat(\r\n          filteredProfiles.map(profile =>\r\n            safeFlat(\r\n              profile.domains.map(domain =>\r\n                domain.competencies.map(competency => ({\r\n                  ...competency,\r\n                  domain: domain.title\r\n                }))\r\n              )\r\n            )\r\n          )\r\n        )\r\n      };\r\n\r\n      filteredCourses.push(modifiedCourse);\r\n    });\r\n\r\n    return filteredCourses;\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { courses } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredCourses = courses.filter(course => term.test(course.title));\r\n    this.setState({ filteredCourses, filter });\r\n  };\r\n\r\n  render() {\r\n    const { filteredCourses, framework, filter, loadingError, version } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const competencyList = competencies =>\r\n      competencies.map(competency => (\r\n        <li key={competency.id}>\r\n          <Link\r\n            to={`/framework/${framework}/${version}/competency/details/${competency.id}`}\r\n          >\r\n            {competency.title}\r\n          </Link>\r\n        </li>\r\n      ));\r\n\r\n    const resources = filteredCourses.map(course => (\r\n      <tr key={course.id}>\r\n        <td>\r\n          <Link to={`/training-resources/${course.id}`}>{course.title}</Link>\r\n        </td>\r\n        <td>{course.type}</td>\r\n        <td>\r\n          <ul>{competencyList(course.competencies)}</ul>\r\n        </td>\r\n      </tr>\r\n    ));\r\n\r\n    return (\r\n      <>\r\n        <input\r\n          type=\"search\"\r\n          // className=\"clearable\" // It doesn't work correctly\r\n          value={filter}\r\n          onChange={event => this.onFilter(event.target.value)}\r\n          placeholder=\"Filter resources\"\r\n        />\r\n        <table>\r\n          <tbody>{resources}</tbody>\r\n        </table>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Courses;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport DomainList from '../components/domain-list/DomainList';\r\nimport Courses from './courses/Courses';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat, removeHtmlTags } from '../services/util/util';\r\n\r\nclass CompetencyList extends Component {\r\n  static propTypes = {\r\n    match: PropTypes.shape({\r\n      match: PropTypes.shape({ framework: PropTypes.string })\r\n    })\r\n  };\r\n\r\n  competencyService = new CompetencyService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkVersion: '',\r\n    frameworkName: '',\r\n    frameworkStatus: '',\r\n    frameworkDescription: '',\r\n    versions: [],\r\n    domains: [],\r\n    filter: '',\r\n    filteredDomains: [],\r\n    loadingError: false\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework, version: frameworkVersion } = props.match.params;\r\n    if (\r\n      framework !== state.framework ||\r\n      frameworkVersion !== state.frameworkVersion\r\n    ) {\r\n      return {\r\n        framework,\r\n        frameworkVersion,\r\n        domains: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, version: frameworkVersion } = this.props.match.params;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.fetchFramework(framework, frameworkVersion),\r\n        this.fetchVersions(framework)\r\n      ]);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkVersion, domains, loadingError } = this.state;\r\n    if (\r\n      framework !== prevState.framework ||\r\n      frameworkVersion !== prevState.frameworkVersion\r\n    ) {\r\n      if (domains.length === 0 && !loadingError) {\r\n        try {\r\n          this.activeRequests.startRequest();\r\n          await this.fetchFramework(framework, frameworkVersion);\r\n        } catch (error) {\r\n          this.setState({ loadingError: true });\r\n        } finally {\r\n          this.activeRequests.finishRequest();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework, frameworkVersion) {\r\n    window.scroll(0, 0);\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      frameworkVersion\r\n    );\r\n    const domains = safeFlat(frameworkData.map(item => item.domains));\r\n    const frameworkDescription = removeHtmlTags(frameworkData[0].description);\r\n\r\n    this.setState({\r\n      frameworkName: frameworkData[0].title,\r\n      //frameworkStatus: frameworkData[0].status,\r\n      frameworkDescription,\r\n      domains,\r\n      filteredDomains: domains\r\n    });\r\n\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const versionStatus = currentFramework[0].versions.filter(vr => vr.number == frameworkVersion);\r\n      this.setState({frameworkStatus: versionStatus[0].status });\r\n      \r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { domains } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredDomains = domains.map(domain => {\r\n      const filteredCompetencies = domain.competencies.filter(competency =>\r\n        term.test(competency.title)\r\n      );\r\n      if (filteredCompetencies.length === 0) {\r\n        return null;\r\n      }\r\n      return { ...domain, competencies: filteredCompetencies };\r\n    });\r\n    this.setState({ filter, filteredDomains });\r\n  };\r\n\r\n\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkVersion,\r\n      frameworkName,\r\n      frameworkStatus,\r\n      frameworkDescription,\r\n      filteredDomains,\r\n      versions,\r\n      filter,\r\n      loadingError\r\n    } = this.state;\r\n\r\n/*if(versions.length > 0){\r\n console.log(this.state.versions[0].status);  \r\n}*/\r\n\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const domainList = filteredDomains.map(domain =>\r\n      domain === null ? null : (\r\n        <DomainList\r\n          key={domain.nid}\r\n          framework={framework}\r\n          domain={domain}\r\n          disable={true}\r\n          version = {frameworkVersion}\r\n\r\n        />\r\n      )\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <h3>{frameworkName}</h3>\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\"> {frameworkStatus}</span>\r\n          \r\n        </p>\r\n        <p>{frameworkDescription}</p>\r\n\r\n        <Tabs>\r\n          <TabList>\r\n            <Tab>Competencies</Tab>\r\n            <Tab>Training resources</Tab>\r\n          </TabList>\r\n\r\n          <TabPanel>\r\n            <input\r\n              // className=\"clearable\" // It doesn't work correctly\r\n              type=\"search\"\r\n              value={filter}\r\n              onChange={event => this.onFilter(event.target.value)}\r\n              placeholder=\"Filter competencies\"\r\n            />\r\n            <table>{domainList}</table>\r\n            <FrameworkVersions framework={framework} versions={versions} />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Courses framework={framework} version={frameworkVersion} />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourceEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      path: this.props.location.pathname.split('/'),\r\n      nid: '',\r\n      title: '',\r\n      dates: '',\r\n      dates2: '',\r\n      type: '',\r\n      description: '',\r\n      location: '',\r\n      url: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      keywords: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ nid: this.state.path[3] });\r\n\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //let fetchResource = \"http://dev-competency-mapper.pantheonsite.io/api/v1/training-resources/\"+nid+\"?_format=json\";\r\n    let fetchResource = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    fetch(fetchResource)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n  }\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let nid = '';\r\n    let title = '';\r\n    let dates = '';\r\n    let dates2 = '';\r\n    let type = '';\r\n    let description = '';\r\n    let location = '';\r\n    let url = '';\r\n    let target_audience = '';\r\n    let learning_outcomes = '';\r\n    let keywords = '';\r\n    let organisers = '';\r\n    let trainers = '';\r\n\r\n    this.state.data.forEach(item => {\r\n      if (item.id === this.state.nid) {\r\n        nid = item.id;\r\n        title = item.title;\r\n        //temp_date = item.dates.split(\"-\");\r\n        dates = item.start_date;\r\n        dates2 = item.end_date;\r\n        type = item.type;\r\n        description = item.description;\r\n        location = item.location;\r\n        url = item.url;\r\n        target_audience = item.target_audience;\r\n        learning_outcomes = item.learning_outcomes;\r\n        keywords = item.keywords;\r\n        organisers = item.organisers;\r\n        trainers = item.trainers;\r\n      }\r\n    });\r\n    if (this.state.data.length > 0) {\r\n      console.log(title);\r\n      return (\r\n        <EditForm\r\n          nid={nid}\r\n          title={title}\r\n          dates={dates}\r\n          dates2={dates2}\r\n          type={type}\r\n          description={description}\r\n          location={location}\r\n          url={url}\r\n          target_audience={target_audience}\r\n          learning_outcomes={learning_outcomes}\r\n          keywords={keywords}\r\n          organisers={organisers}\r\n          trainers={trainers}\r\n        />\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass EditForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nid: this.props.nid,\r\n      title: this.props.title,\r\n      dates: this.props.dates,\r\n      dates2: this.props.dates2,\r\n      type: this.props.type,\r\n      description: this.props.description,\r\n      location: this.props.location,\r\n      url: this.props.url,\r\n      target_audience: this.props.target_audience,\r\n      learning_outcomes: this.props.learning_outcomes,\r\n      keywords: this.props.keywords,\r\n      organisers: this.props.organisers,\r\n      trainers: this.props.trainers,\r\n      redirect: false,\r\n      updateFlag: false,\r\n      csrf: ''\r\n    };\r\n    this.handleTitle = this.handleTitle.bind(this);\r\n    this.handleDates = this.handleDates.bind(this);\r\n    this.handleDates2 = this.handleDates2.bind(this);\r\n    this.handleType = this.handleType.bind(this);\r\n    this.handleDesc = this.handleDesc.bind(this);\r\n    this.handleLocation = this.handleLocation.bind(this);\r\n    this.handleURL = this.handleURL.bind(this);\r\n    this.handleTargetAudience = this.handleTargetAudience.bind(this);\r\n    this.handleLearningOutcomes = this.handleLearningOutcomes.bind(this);\r\n    this.handleKeywords = this.handleKeywords.bind(this);\r\n    this.handleOrganisers = this.handleOrganisers.bind(this);\r\n    this.handleTrainers = this.handleTrainers.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  static contextTypes = {\r\n    router: PropTypes.object\r\n  };\r\n\r\n  handleTitle(event) {\r\n    this.setState({ title: event.value });\r\n  }\r\n\r\n  handleDates(event) {\r\n    this.setState({ dates: event.value });\r\n  }\r\n\r\n  handleDates2(event) {\r\n    this.setState({ dates2: event.value });\r\n  }\r\n\r\n  handleType(event) {\r\n    this.setState({ type: event.value });\r\n  }\r\n\r\n  handleDesc(event) {\r\n    this.setState({ description: event.editor.getData() });\r\n  }\r\n  handleLocation(event) {\r\n    this.setState({ location: event.value });\r\n  }\r\n  handleURL(event) {\r\n    this.setState({ url: event.value });\r\n  }\r\n\r\n  handleTargetAudience(event) {\r\n    this.setState({ target_audience: event.editor.getData() });\r\n  }\r\n\r\n  handleLearningOutcomes(event) {\r\n    this.setState({ learning_outcomes: event.editor.getData() });\r\n  }\r\n\r\n  handleKeywords(event) {\r\n    this.setState({ keywords: event.value });\r\n  }\r\n\r\n  handleOrganisers(event) {\r\n    this.setState({ organisers: event.editor.getData() });\r\n  }\r\n\r\n  handleTrainers(event) {\r\n    this.setState({ trainers: event.editor.getData() });\r\n  }\r\n\r\n  setRedirect = () => {\r\n    this.props.history.push('all-training-resources');\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.context.router.history.push(\r\n          '/training-resources/' + this.state.nid\r\n        );\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    let nid = this.state.nid;\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = this.refs.type.value;\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n    let keywords = this.refs.keywords.value;\r\n    let csrf = localStorage.getItem('csrf_token');\r\n\r\n    fetch(`${apiUrl}/node/` + nid + '?_format=hal_json', {\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': csrf, //'yoM7eSiML2AI6A3FGH2EKCaX_agiJfmYkRIPL0MdPlI',\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        title: [\r\n          {\r\n            value: title\r\n          }\r\n        ],\r\n        field_dates: [\r\n          {\r\n            value: dates\r\n          }\r\n        ],\r\n        field_end_date: [\r\n          {\r\n            value: dates2\r\n          }\r\n        ],\r\n        field_type: [\r\n          {\r\n            value: type\r\n          }\r\n        ],\r\n        field_description: [\r\n          {\r\n            value: description,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_location: [\r\n          {\r\n            value: location\r\n          }\r\n        ],\r\n        field_url: [\r\n          {\r\n            value: url\r\n          }\r\n        ],\r\n        field_target_audience: [\r\n          {\r\n            value: target_audience,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_learning_outcomes: [\r\n          {\r\n            value: learning_outcomes,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_keywords: [\r\n          {\r\n            value: keywords\r\n          }\r\n        ],\r\n        field_organisers: [\r\n          {\r\n            value: organisers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_trainers: [\r\n          {\r\n            value: trainers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    //event.target.reset();\r\n\r\n    event.preventDefault();\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Edit Training Resources</h2>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_edit_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"title\"\r\n                    id={'title'}\r\n                    value={this.state.title}\r\n                    onChange={this.handleTitle.bind(this)}\r\n                    required\r\n                    placeholder=\"Title\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates\"\r\n                    value={this.state.dates}\r\n                    onChange={this.handleDates.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates2\"\r\n                    value={this.state.dates2}\r\n                    onChange={this.handleDates2.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type</strong>\r\n                  <select\r\n                    ref={'type'}\r\n                    value={this.state.type}\r\n                    onChange={this.handleType.bind(this)}\r\n                  >\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.handleDesc\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" value={this.state.description} onChange={this.handleDesc.bind(this)} required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"location\"\r\n                    value={this.state.location}\r\n                    onChange={this.handleLocation.bind(this)}\r\n                    placeholder=\"Location\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"url\"\r\n                    value={this.state.url}\r\n                    onChange={this.handleURL.bind(this)}\r\n                    required\r\n                    placeholder=\"URL\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.handleTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"target_audience\" value={this.state.target_audience} onChange={this.handleTargetAudience.bind(this)} required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.handleLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" value={this.state.learning_outcomes} onChange={this.handleLearningOutcomes.bind(this)} required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.handleOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" value={this.state.organisers} onChange={this.handleOrganisers.bind(this)} required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.handleTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" value={this.state.trainers} onChange={this.handleTrainers.bind(this)} required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"keywords\"\r\n                    value={this.state.keywords}\r\n                    onChange={this.handleKeywords.bind(this)}\r\n                    placeholder=\"Keywords\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Update\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst EditResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/edit/:nid\" component={ResourceEdit} />\r\n  </Switch>\r\n);\r\n\r\nexport default EditResources;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourceCreate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //this.onChange = this.onChange.bind(this);\r\n    this.changeDescription = this.changeDescription.bind(this);\r\n    this.changeTargetAudience = this.changeTargetAudience.bind(this);\r\n    this.changeLearningOutcomes = this.changeLearningOutcomes.bind(this);\r\n    this.changeOrganisers = this.changeOrganisers.bind(this);\r\n    this.changeTrainers = this.changeTrainers.bind(this);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      content: 'content',\r\n      description: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.props.history.push('/all-training-resources');\r\n        //this.setState({'updateFlag': false});\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = 'Online';\r\n    if (this.refs.type.value) {\r\n      type = this.refs.type.value;\r\n    }\r\n\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let keywords = this.refs.keywords.value;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n\r\n    let token = localStorage.getItem('csrf_token');\r\n\r\n    //alert(learning_outcomes);\r\n\r\n    fetch(`${apiUrl}/node?_format=hal_json`, {\r\n      credentials: 'include',\r\n      method: 'POST',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        title: [\r\n          {\r\n            value: title\r\n          }\r\n        ],\r\n        field_dates: [\r\n          {\r\n            value: dates\r\n          }\r\n        ],\r\n        field_end_date: [\r\n          {\r\n            value: dates2\r\n          }\r\n        ],\r\n        field_type: [\r\n          {\r\n            value: type\r\n          }\r\n        ],\r\n        field_description: [\r\n          {\r\n            value: description,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_location: [\r\n          {\r\n            value: location\r\n          }\r\n        ],\r\n        field_url: [\r\n          {\r\n            value: url\r\n          }\r\n        ],\r\n        field_target_audience: [\r\n          {\r\n            value: target_audience,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_learning_outcomes: [\r\n          {\r\n            value: learning_outcomes,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_keywords: [\r\n          {\r\n            value: keywords\r\n          }\r\n        ],\r\n        field_organisers: [\r\n          {\r\n            value: organisers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_trainers: [\r\n          {\r\n            value: trainers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    event.target.reset();\r\n    this.setState({ updateFlag: true });\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h2>Create Training Resources</h2>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <h4>Create new competency</h4>\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_create_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title</strong>\r\n                  <input type=\"text\" ref=\"title\" required placeholder=\"Title\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Start Date</strong>\r\n                  <input type=\"date\" ref=\"dates\" placeholder=\"Date\" />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>End Date</strong>\r\n                  <input type=\"date\" ref=\"dates2\" placeholder=\"Date\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type</strong>\r\n                  <select ref={'type'}>\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.changeDescription\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input type=\"text\" ref=\"location\" placeholder=\"Location\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL</strong>\r\n                  <input type=\"text\" ref=\"url\" required placeholder=\"URL\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.changeTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<input type=\"text\" ref=\"target_audience\" required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.changeLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.changeOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.changeTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input type=\"text\" ref=\"keywords\" placeholder=\"Keywords\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Submit\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/create\" component={ResourceCreate} />\r\n  </Switch>\r\n);\r\n\r\nexport default CreateResources;\r\n","import React from 'react';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nconst $ = window.$;\r\n\r\nclass AttributeMap extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      framework: this.props.selectedFramework,\r\n      resourceID: this.props.resourceID,\r\n      frameworkdetails: [],\r\n      csrf: '',\r\n      frameworkUUID: '',\r\n      competencies: [],\r\n      attributes: this.props.selectedAttributes,\r\n      selectedAttributes: this.props.selectedAttributes,\r\n      selectedCompetencies: this.props.selectedCompetencies,\r\n      resourceDetails: []\r\n    };\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n  }\r\n\r\n  handleSelect() {\r\n    let checkedAttributes = this.state.selectedAttributes;\r\n    let attributeIDs = [];\r\n    let token = localStorage.getItem('csrf_token');\r\n    for (let i = 0; i < checkedAttributes.length; i++) {\r\n      attributeIDs.push(checkedAttributes[i].split('id', 2));\r\n    }\r\n\r\n    if (attributeIDs.length > 0) {\r\n      let payload = {\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          },\r\n          [`${apiUrl}/rest/relation/node/training_resource/field_attribute_mapped`]: {\r\n            href:\r\n              'http://dev-competency-mapper.pantheonsite.io/node/' +\r\n              attributeIDs[0][1] +\r\n              '?_format=hal_json'\r\n          }\r\n        },\r\n\r\n        type: [{ target_id: 'training_resource' }],\r\n        _embedded: {}\r\n      };\r\n\r\n      let embedded_string = [];\r\n      for (let i = 0; i < attributeIDs.length; i++) {\r\n        embedded_string.push({\r\n          _links: {\r\n            self: {\r\n              href: `${apiUrl}/node/` + attributeIDs[i][1] + '?_format=hal_json'\r\n            },\r\n            type: {\r\n              href: `${apiUrl}/rest/type/node/attribute`\r\n            }\r\n          },\r\n          uuid: [\r\n            {\r\n              value: attributeIDs[i][0]\r\n            }\r\n          ]\r\n        });\r\n      }\r\n\r\n      payload._embedded = {\r\n        [`${apiUrl}/rest/relation/node/training_resource/field_attribute_mapped`]: embedded_string\r\n      };\r\n\r\n      fetch(`${apiUrl}/node/` + this.state.resourceID + '?_format=hal_json', {\r\n        credentials: 'include',\r\n        method: 'PATCH',\r\n        cookies: 'x-access-token',\r\n        headers: {\r\n          Accept: 'application/hal+json',\r\n          'Content-Type': 'application/hal+json',\r\n          'X-CSRF-Token': token,\r\n          Authorization: 'Basic'\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n    }\r\n\r\n    this.props.handleCloseModal();\r\n  }\r\n\r\n  handleAllCheck(id, uuid, e) {\r\n    const selectedAttributes = this.state.selectedAttributes;\r\n    let childItems = document.getElementsByName(id);\r\n    if (e.target.checked) {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        childItems[i].checked = true;\r\n        selectedAttributes.push(\r\n          childItems[i].getAttribute('data-uuid') +\r\n            'id' +\r\n            childItems[i].getAttribute('data-id')\r\n        );\r\n        this.setState({ selectedAttributes });\r\n        console.log(this.state.selectedAttributes);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        if (childItems[i].checked === true) {\r\n          childItems[i].checked = false;\r\n          //selectedAttributes.pop(childItems[i].getAttribute('data-id'));\r\n          //let index = array.indexOf(element);\r\n          selectedAttributes.splice(\r\n            selectedAttributes.indexOf(childItems[i]),\r\n            1\r\n          );\r\n          this.setState({ selectedAttributes });\r\n          console.log(this.state.selectedAttributes);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAttributeClick(id, uuid, e) {\r\n    const selectedAttributes = this.state.selectedAttributes;\r\n    let isChecked = e.target.checked;\r\n    if (isChecked) {\r\n      selectedAttributes.push(uuid + 'id' + id);\r\n      this.setState({ selectedAttributes });\r\n      document.getElementById(e.target.name).checked = true;\r\n      console.log(this.state.selectedAttributes);\r\n    } else {\r\n      //selectedAttributes.pop(id);\r\n      selectedAttributes.splice(\r\n        selectedAttributes.indexOf(uuid + 'id' + id),\r\n        1\r\n      );\r\n      this.setState({ selectedAttributes });\r\n      if (!$(':checkbox[name=' + e.target.name + ']').is(':checked')) {\r\n        document.getElementById(e.target.name).checked = false;\r\n        console.log(this.state.selectedAttributes);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleListAllChecked(e) {\r\n    let lists = [];\r\n    $(':checkbox').each(function() {\r\n      if ($(this).is(':checked')) {\r\n        lists.push($(this).attr('id'));\r\n      }\r\n    });\r\n    alert(lists);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let fetchCompetencyList =\r\n      `${apiUrl}/api/v1/framework/` + this.state.framework + '?_format=json';\r\n    fetch(fetchCompetencyList)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n\r\n    let fetchFrameworkDetails = `${apiUrl}/api/v1/framework?_format=json`;\r\n    fetch(fetchFrameworkDetails)\r\n      .then(Response => Response.json())\r\n      .then(findresponse1 => {\r\n        this.setState({\r\n          frameworkdetails: findresponse1\r\n        });\r\n      });\r\n\r\n    fetch(`${apiUrl}/node/` + this.state.resourceID + '?_format=hal_json')\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resourceDetails: findresponse\r\n        });\r\n      });\r\n\r\n    //console.log(this.state.resourceDetails);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return this.state.attributes === nextState.attributes;\r\n  }\r\n\r\n  render() {\r\n    let frameworkDetails = this.state.frameworkdetails;\r\n    let data = this.state.data;\r\n    let frameworkDefs = [];\r\n    let domainsOptions = [];\r\n    let attributeTypeOptions = [];\r\n\r\n    //console.log(this.state.selectedAttributes);\r\n\r\n    frameworkDetails.forEach((item, ikey) => {\r\n      if (item.name.toLowerCase() === this.state.framework) {\r\n        this.state.frameworkUUID = item.uuid;\r\n        item.attribute_types.forEach(attribute_type => {\r\n          frameworkDefs.push(attribute_type.title);\r\n          attributeTypeOptions.push(\r\n            <option data-id={attribute_type.id} value={attribute_type.uuid}>\r\n              {attribute_type.title}\r\n            </option>\r\n          );\r\n        });\r\n        item.domains.forEach(domain => {\r\n          domainsOptions.push(\r\n            <option data-id={domain.id} value={domain.uuid}>\r\n              {domain.title}\r\n            </option>\r\n          );\r\n        });\r\n      }\r\n    });\r\n\r\n    const ListOfCompetencies = data.map(item =>\r\n      item.domains.map((domain, did) => (\r\n        <tbody>\r\n          <tr key={domain.nid}>\r\n            <td>{did + 1}</td>{' '}\r\n            <td>\r\n              <strong> {domain.title}</strong>{' '}\r\n            </td>{' '}\r\n          </tr>\r\n          {domain.competencies.map((competency, cid) => (\r\n            <tr key={competency.id}>\r\n              <td>\r\n                {did + 1}.{cid + 1}\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type={'checkbox'}\r\n                  defaultChecked={\r\n                    -1 !==\r\n                    this.state.selectedCompetencies.indexOf(competency.id)\r\n                  }\r\n                  data-test={competency.uuid}\r\n                  id={competency.id}\r\n                  onChange={this.handleAllCheck.bind(\r\n                    this,\r\n                    competency.id,\r\n                    competency.uuid\r\n                  )}\r\n                />{' '}\r\n                {competency.title}\r\n                <ul style={{ marginLeft: 1 + 'em', marginBottom: 1 + 'em' }}>\r\n                  {frameworkDefs.map(def => {\r\n                    return (\r\n                      <div style={{ marginLeft: 1 + 'em' }}>\r\n                        <div>\r\n                          {' '}\r\n                          <strong>\r\n                            <em>{def}</em>\r\n                          </strong>\r\n                        </div>\r\n                        {competency.attributes\r\n                          .filter(attribute => attribute.type === def)\r\n                          .map(attribute => {\r\n                            return (\r\n                              <li\r\n                                key={attribute.id}\r\n                                style={{ marginLeft: 1 + 'em' }}\r\n                              >\r\n                                <input\r\n                                  type={'checkbox'}\r\n                                  defaultChecked={\r\n                                    -1 !==\r\n                                    this.state.selectedAttributes.indexOf(\r\n                                      attribute.uuid + 'id' + attribute.id\r\n                                    )\r\n                                  }\r\n                                  name={competency.id}\r\n                                  data-id={attribute.id}\r\n                                  data-uuid={attribute.uuid}\r\n                                  id={attribute.id}\r\n                                  onChange={this.handleAttributeClick.bind(\r\n                                    this,\r\n                                    attribute.id,\r\n                                    attribute.uuid\r\n                                  )}\r\n                                />{' '}\r\n                                {attribute.title}\r\n                              </li>\r\n                            );\r\n                          })}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </ul>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n          <tr>\r\n            <td>\r\n              <td />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      ))\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        {ListOfCompetencies}\r\n        <div id={'footer-button'}>\r\n          <button className={'button'} onClick={this.handleSelect.bind(this)}>\r\n            {' '}\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AttributeMap;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport ReactModal from 'react-modal';\r\nimport AttributeMap from './AttributeMap';\r\nimport Parser from 'html-react-parser';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourceDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resources: [],\r\n      frameworks: [],\r\n      resourcePath: this.props.location.pathname.split('/'),\r\n      showModal: false,\r\n      selectedFramework: '',\r\n      updateFlag: ''\r\n    };\r\n    this.handleOpenModal = this.handleOpenModal.bind(this);\r\n    this.handleCloseModal = this.handleCloseModal.bind(this);\r\n  }\r\n\r\n  handleOpenModal(event, temp) {\r\n    this.setState({ showModal: true });\r\n    this.setState({ selectedFramework: event });\r\n    temp.preventDefault();\r\n    //console.log(event);\r\n  }\r\n\r\n  handleCloseModal() {\r\n    this.setState({ showModal: false });\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    /*let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=hal_json`;*/\r\n    let resourcesURL = `${apiUrl}/api/resources/?_format=json`;\r\n\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse3 => {\r\n        this.setState({ resources: findresponse3 });\r\n      });\r\n\r\n    fetch(`${apiUrl}/api/v1/framework?_format=json`)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          frameworks: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  mappingBlock() {\r\n    if (localStorage.getItem('roles')) {\r\n      if (localStorage.getItem('roles').includes('content_manager')) {\r\n        return (\r\n          <div className={'callout white-color industry-background'}>\r\n            <strong> Manage competency profile </strong>\r\n            <ul>\r\n              {this.state.frameworks.map((item, id) => {\r\n                return (\r\n                  <li style={{ display: 'inline', margin: '5px' }}>\r\n                    <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n                      onClick={this.handleOpenModal.bind(\r\n                        this,\r\n                        item.name.toLowerCase()\r\n                      )}\r\n                    >\r\n                      {' '}\r\n                      <i className=\"fas fa-tags\" /> {item.name}{' '}\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let attributes = [];\r\n    let selectedCompetencies = [];\r\n    let attribute_types = [];\r\n    //console.log(this.state.resources);\r\n    const Resource = this.state.resources.map((item, index) => {\r\n      if (item.id === this.state.resourcePath[2]) {\r\n        item.competency_profile.map(profile =>\r\n          profile.domains.map(domain =>\r\n            domain.competencies.map(competency =>\r\n              //selectedCompetencies.push(),\r\n              competency.attributes.map(\r\n                attribute =>\r\n                  attributes.push(attribute.uuid + 'id' + attribute.id),\r\n                selectedCompetencies.push(competency.id)\r\n              )\r\n            )\r\n          )\r\n        );\r\n\r\n        //console.log(attributes);\r\n\r\n        return (\r\n          <div>\r\n            <div>\r\n              <div className={'row'}>\r\n                <h2>{item.title}</h2>\r\n              </div>\r\n\r\n              <div className={'row'}>\r\n                <div className={'column large-9'}>\r\n                  <div className={'callout'}>\r\n                    {item.date ? (\r\n                      <p>\r\n                        <strong>Date:</strong> {item.dates}\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                    {item.keywords ? (\r\n                      <p>\r\n                        <strong>Keywords:</strong> {item.keywords}\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                    {item.location ? (\r\n                      <p>\r\n                        <strong>Location:</strong> {item.location}\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                    {item.type ? (\r\n                      <p>\r\n                        <strong>Type:</strong> {item.type}\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                    {item.url ? (\r\n                      <p>\r\n                        <strong> URL: </strong>{' '}\r\n                        <a href={item.url} target={'_blank'}>\r\n                          {item.url}\r\n                        </a>\r\n                      </p>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                  </div>\r\n                  <h3>Overview</h3>\r\n                  {Parser(item.description)}\r\n\r\n                  {item.target_audience\r\n                    ? Parser('<h3>Target Audience</h3>' + item.target_audience)\r\n                    : ''}\r\n                  {item.learning_outcomes\r\n                    ? Parser(\r\n                        '<h3>Learning Outcomes</h3>' + item.learning_outcomes\r\n                      )\r\n                    : ''}\r\n                  {item.organisers\r\n                    ? Parser('<h3>Organizers</h3>' + item.organisers)\r\n                    : ''}\r\n\r\n                  {item.trainers\r\n                    ? Parser('<h3>Trainers</h3>' + item.trainers)\r\n                    : ''}\r\n                  <h3>Competency Profile</h3>\r\n                  <table className={'hover'}>\r\n                    <tbody>\r\n                      {item.competency_profile.map(profile => {\r\n                        return (\r\n                          <tr>\r\n                            {this.state.frameworks.map(framework => {\r\n                              if (framework.id === profile.id) {\r\n                                framework.attribute_types.map(type =>\r\n                                  attribute_types.push(type.title)\r\n                                );\r\n                              }\r\n                              return null;\r\n                            })}\r\n                            <td>\r\n                              <h4>{profile.title}</h4>\r\n                            </td>\r\n                            <td>\r\n                              {profile.domains.map(domain => (\r\n                                <div>\r\n                                  <h5>{domain.title}</h5>\r\n                                  <ul>\r\n                                    {domain.competencies.map(competency => (\r\n                                      <li>\r\n                                        <strong> {competency.title}</strong>\r\n                                        <ul>\r\n                                          {attribute_types.map(type => (\r\n                                            <span>\r\n                                              {competency.attributes.map(\r\n                                                attribute => {\r\n                                                  if (attribute.type === type) {\r\n                                                    return (\r\n                                                      <li>\r\n                                                        {' '}\r\n                                                        <em>{type}</em> -{' '}\r\n                                                        {attribute.title}\r\n                                                      </li>\r\n                                                    );\r\n                                                  }\r\n                                                  return null;\r\n                                                }\r\n                                              )}\r\n                                            </span>\r\n                                          ))}\r\n                                        </ul>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              ))}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                <div\r\n                  className={\r\n                    'column large-3 callout industry-background white-color'\r\n                  }\r\n                >\r\n                  <h3>More information</h3>\r\n                  <p>\r\n                    No data available\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      return null;\r\n    });\r\n\r\n    return (\r\n      <div className={'row'}>\r\n        <div className={'column large-12'}>\r\n          {Resource}\r\n          {this.mappingBlock()}\r\n        </div>\r\n\r\n        <div style={{ overflow: 'scroll' }}>\r\n          <ReactModal\r\n            isOpen={this.state.showModal}\r\n            className=\"Modal\"\r\n            overlayClassName=\"Overlay\"\r\n            contentLabel=\"Minimal Modal Example\"\r\n          >\r\n            <div>\r\n              <h2 style={{ 'text-align': 'center' }}>\r\n                Manage competency profile for{' '}\r\n                {this.state.selectedFramework.toUpperCase()}{' '}\r\n                <i\r\n                  className=\"fas fa-window-close float-right\"\r\n                  data-close\r\n                  onClick={this.handleCloseModal}\r\n                />{' '}\r\n              </h2>\r\n            </div>\r\n            <table>\r\n              <AttributeMap\r\n                selectedCompetencies={selectedCompetencies}\r\n                selectedAttributes={attributes}\r\n                selectedFramework={this.state.selectedFramework}\r\n                resourceID={this.state.resourcePath[2]}\r\n                handleCloseModal={this.handleCloseModal}\r\n              />\r\n            </table>\r\n          </ReactModal>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ResDetails = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resources/:id\" component={ResourceDetails} />\r\n  </Switch>\r\n);\r\n\r\nexport default ResDetails;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Parser from 'html-react-parser';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourcesList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resources: [],\r\n      filterType: ''\r\n    };\r\n    this.archiveHandle = this.archiveHandle.bind(this);\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resources: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  filter(e) {\r\n    this.setState({ filter: e.target.value });\r\n  }\r\n\r\n  filterTypeHandle(e) {\r\n    this.setState({ filterType: e.target.value });\r\n  }\r\n\r\n  archiveHandle(rid, status, event) {\r\n    //alert(\"competency \"+ cid+ \"is \"+ status);\r\n    let archivedStatus = '';\r\n    if (status === 1) {\r\n      archivedStatus = false;\r\n    } else {\r\n      archivedStatus = true;\r\n    }\r\n    let token = localStorage.getItem('csrf_token');\r\n    fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        field_archived: [\r\n          {\r\n            value: archivedStatus\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    this.setState({ updateFlag: true });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let resources = this.state.resources;\r\n    if (this.state.filter) {\r\n      resources = resources.filter(\r\n        item =>\r\n          item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\r\n          item.description\r\n            .toLocaleLowerCase()\r\n            .includes(this.state.filter.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (this.state.filterType !== 'All') {\r\n      resources = resources.filter(item =>\r\n        item.type\r\n          .toLocaleLowerCase()\r\n          .includes(this.state.filterType.toLowerCase())\r\n      );\r\n    }\r\n\r\n    const ListOfResources = resources.map((item, index) => (\r\n      <tr key={index}>\r\n        <td>{index + 1} </td>\r\n        <td>\r\n          {' '}\r\n          <h4>\r\n            {' '}\r\n            <Link to={'/training-resources/' + item.id}>{item.title} </Link>\r\n          </h4>\r\n          <p>{item.dates} </p>\r\n          <strong>Learning resource type:</strong> {item.type} <br />\r\n          {Parser(item.description.substr(0, 240) + '...')} <br />\r\n          <br />\r\n          <strong> URL: </strong>{' '}\r\n          <a href={item.url} target={'_blank'}>\r\n            {item.url}\r\n          </a>\r\n        </td>\r\n        <td>\r\n          {item.archived === '1' ? (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 1)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\r\n            </a>\r\n          ) : (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 0)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-off\" />\r\n            </a>\r\n          )}\r\n        </td>\r\n        <td>\r\n          <Link to={`/training-resource/edit/${item.id}`}>\r\n            <i className=\"fas fa-edit\" />{' '}\r\n          </Link>\r\n        </td>\r\n      </tr>\r\n    ));\r\n    return (\r\n      <div className={'row'}>\r\n        <h3>Training Resources</h3>\r\n        <div className=\"row\">\r\n          <div className=\"column large-8\">\r\n            <div>\r\n              <input\r\n                type=\"text\"\r\n                onChange={this.filter.bind(this)}\r\n                placeholder=\"Type to search\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <div>\r\n              <select ref={'type'} onChange={this.filterTypeHandle.bind(this)}>\r\n                <option value={'All'}>All</option>\r\n                <option value={'Online'}>Online</option>\r\n                <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                <option value={'Webinar'}>Webinar</option>\r\n                <option value={'Hackathon'}>Hackathon</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className={'column large-2'}>\r\n            <Link\r\n              className={'button float-right'}\r\n              to={'/training-resource/create'}\r\n            >\r\n              <i className=\"fas fa-plus-circle\"> </i> Add new{' '}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>S. No.</th>\r\n              <th>Details</th>\r\n              <th>Archive</th>\r\n              <th>Edit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{ListOfResources}</tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Resources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/all-training-resources\" component={ResourcesList} />\r\n  </Switch>\r\n);\r\n\r\nexport default Resources;\r\n","import React from 'react';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      roles: '',\r\n      user: ''\r\n    };\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    let old = this.refs.old.value;\r\n    let new1 = this.refs.new1.value;\r\n    let uid = localStorage.getItem('userid');\r\n    fetch(`${apiUrl}/user/` + uid + '/password?_format=json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': localStorage.getItem('csrf_token')\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/user/user`\r\n          }\r\n        },\r\n        old: [\r\n          {\r\n            value: old\r\n          }\r\n        ],\r\n        new: [\r\n          {\r\n            target_id: new1\r\n          }\r\n        ]\r\n      })\r\n    })\r\n      .then(resp => resp)\r\n      .then(data =>\r\n        setTimeout(() => {\r\n          alert('Password changed successfully');\r\n          window.location.reload();\r\n        }, 1000)\r\n      );\r\n    e.preventDefault();\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h3>Change password:</h3>\r\n        <form id={'passChange'}>\r\n          <input type={'password'} ref={'old'} placeholder={'Old password'} />\r\n          <input type={'password'} ref={'new1'} placeholder={'New password'} />\r\n          <input type={'password'} placeholder={'Confirm new password'} />\r\n          <input\r\n            type={'button'}\r\n            className={'button'}\r\n            onClick={this.handlePasswordChange.bind(this)}\r\n            value={'Submit'}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChangePassword;\r\n","import React from 'react';\r\n\r\nconst About = () => (\r\n  <React.Fragment>\r\n    <h2>About competency mapper</h2>\r\n    <p className=\"lead\">\r\n      Competency mapper is a web-based tool to support the creation and\r\n      management of competency frameworks for professionals working in the\r\n      biomolecular sciences.\r\n    </p>\r\n    <h3>Anyone can..</h3>\r\n    <p>\r\n      <ul>\r\n        <li>\r\n          Explore the five competency frameworks that we currently have in the\r\n          system\r\n        </li>\r\n        <li>\r\n          Click on any competency to find the knowledge, skills and attitudes\r\n          (KSAs) associated with it\r\n        </li>\r\n        <li>\r\n          See the relationships between different competency frameworks; for\r\n          example, if a competency in framework 2 is derived from one in\r\n          framework 1, this information is captured\r\n        </li>\r\n        <li>\r\n          Access a list of courses that have been mapped to a particular\r\n          competency\r\n        </li>\r\n        <li>\r\n          View summary information on each of these courses, including a link\r\n          through to the course website\r\n        </li>\r\n      </ul>\r\n    </p>\r\n    <h3>In addition to the above, content editors can...</h3>\r\n    <ul>\r\n      <li>Map courses to any competency in the mapper</li>\r\n      <li>Map courses to any combination of knowledge, skills and attitudes</li>\r\n    </ul>\r\n    <h3>In addition to the above, administrators can...</h3>\r\n    <ul>\r\n      <li>Build a completely new competency framework from a blank template</li>\r\n      <li>Make minor updates to an existing competency framework</li>\r\n      <li>\r\n        If a competency framework has undergone major updates such as merging,\r\n        splitting or deprecation of competencies, create and publish a new\r\n        version of the framework without overwriting the previous version, and\r\n        without losing links to pre-existing mappings\r\n      </li>\r\n      <li>\r\n        Create and edit multiple personas or roles associated with a competency\r\n        framework\r\n      </li>\r\n      <li>\r\n        For each competency in an associated framework, define the level of\r\n        competency required by any of the personas/roles associated with it,\r\n        using an administrator-defined list of variables.\r\n      </li>\r\n    </ul>\r\n\r\n    <h3>What is competency?</h3>\r\n    <p>\r\n      By definition, competency is an observable ability of any professional,\r\n      integrating multiple components such as knowledge, skills, values and\r\n      attitudes. It is observable, so its acquisition can be validated\r\n      objectively.\r\n    </p>\r\n    <h4>Why is it relevant?</h4>\r\n    <p>\r\n      Competency provides a shared ‘currency’ applicable to learning of all\r\n      types and at all career stages.\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        Individual professionals can use competency as a career development\r\n        tool: by documenting the competencies that you have gained, and the\r\n        evidence that you have gained them, in a competency portfolio you can\r\n        seek further training to fill gaps in your portfolio, or map your\r\n        existing portfolio to roles that you might not previously have\r\n        considered.\r\n      </li>\r\n      <li>\r\n        Professional bodies and employers can use competency to define\r\n        competency frameworks for different roles or professions. These provide\r\n        useful guidance when hiring and promoting individuals, and can also\r\n        provide the basis for professional recognition in regulated professions.\r\n      </li>\r\n      <li>\r\n        Course providers can use competency to develop training (by asking what\r\n        competencies their trainees need to gain) and, where appropriate, to\r\n        assess whether training has been effective.\r\n      </li>\r\n    </ul>\r\n\r\n    <h3>What is a competency framework?</h3>\r\n    <p>\r\n      A competency framework defines the competencies required to fulfil a\r\n      particular role. competency frameworks are typically defined by\r\n      professional bodies or learned societies in collaboration with employers.\r\n      Several projects under the EU’s Horizon 2020 framework have developed\r\n      competency frameworks to support emerging professions.\r\n    </p>\r\n\r\n    <h3>Who is developing the competency mapper?</h3>\r\n    <p>\r\n      The competency mapper is being developed by the{' '}\r\n      <a\r\n        href={'https://www.ebi.ac.uk/about/people/cath-brooksbank'}\r\n        target={'_blank'}\r\n      >\r\n        {' '}\r\n        EMBL-EBI training team{' '}\r\n      </a>{' '}\r\n      with the{' '}\r\n      <a href={'https://bioexcel.eu/'} target={'_blank'}>\r\n        {' '}\r\n        BioExcel{' '}\r\n      </a>{' '}\r\n      competency framework as its primary use case.{' '}\r\n    </p>\r\n    <p>\r\n      EMBL-EBI’s Training programme uses a competency-based approach to\r\n      developing new courses: put simply, we ask ourselves ‘What competency or\r\n      competencies does our audience for this course need to develop?’ before we\r\n      create the programme and content for a new course, and before we make a\r\n      significant update to an existing course.\r\n    </p>\r\n    <p>\r\n      The team has contributed to, and helped to steer, a number of initiatives\r\n      to develop new training programmes by defining competency requirements in\r\n      relation to a specific target audience and building a competency framework\r\n      for that audience. Competency-based projects that we have been involved in\r\n      include:\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        The ISCB education committee’s{' '}\r\n        <a href={'https://europepmc.org/articles/PMC5794068'} target={'_blank'}>\r\n          {' '}\r\n          competency framework for bioinformatics professionals{' '}\r\n        </a>{' '}\r\n      </li>\r\n      <li>\r\n        A clinical bioinformatics competency framework to support Health\r\n        Education England to prepare clinical practitioners for the application\r\n        of genomics in the healthcare service\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={\r\n            'https://drive.google.com/file/d/0B3BA3KSKGOoQb0hvUkx3a3lMS00/view'\r\n          }\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          RItrain competency framework{' '}\r\n        </a>{' '}\r\n        for managers and leaders of research infrastructure\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={'https://zenodo.org/record/154085#.WbUNUhNSwUE'}\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          CORBEL competency framework{' '}\r\n        </a>{' '}\r\n        for technical operators of research infrastructure\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={'https://zenodo.org/record/264231#.WbUNoRNSwUE'}\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          BioExcel competency framework{' '}\r\n        </a>\r\n        for scientists working on biomolecular modelling and simulation\r\n      </li>\r\n      <p />\r\n      <p>\r\n        These competency frameworks were designed to be used by the training\r\n        communities who developed them, and openly available to anyone who might\r\n        find them useful, yet all too often they end up buried in a PDF file as\r\n        part of a project deliverable. This made us long for a web-based tool\r\n        that would make these frameworks,and the training associated with them,\r\n        readily discoverable. We therefore decided to build that tool, and\r\n        although it’s still in the early stages of development we’ve decided to\r\n        make it openly available now so that we can seek broad input to improve\r\n        it and make it as useful as possible to the education and training\r\n        community at large. If you have comments or suggestions, please{' '}\r\n        <a href={'mailto:competency@ebi.ac.uk'}> contact us </a>.\r\n      </p>\r\n    </ul>\r\n  </React.Fragment>\r\n);\r\n\r\nexport default About;\r\n","import React from 'react';\r\n\r\nimport { removeHtmlTags } from '../../services/util/util';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction FrameworkButton({ framework }) {\r\n  let description = removeHtmlTags(framework.description);\r\n  if (description.length > 120) {\r\n    description = `${description.slice(0, 120).trim()}...`;\r\n  }\r\n  const liveVersion = framework.versions.reduce((prevVersion, newVersion) => {\r\n    if (newVersion.status === 'live') {\r\n      return newVersion.number;\r\n    }\r\n    return prevVersion;\r\n  }, null);\r\n\r\n  if (liveVersion === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"column medium-4\">\r\n      <Link\r\n        className=\"column callout\"\r\n        data-equalizer-watch\r\n        to={`/framework/${framework.title.toLowerCase()}/${liveVersion}`}\r\n      >\r\n        <img\r\n          className=\"float-center margin-bottom-medium\"\r\n          style={{ height: '6rem' }}\r\n          src={framework.logo[0].url}\r\n          alt=\"competency logo\"\r\n        />\r\n        <h5>\r\n          {description}\r\n          <i className=\"icon icon-functional\" data-icon=\">\" />\r\n        </h5>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButton;\r\n","import React from 'react';\r\n\r\nimport FrameworkButton from '../framework-button/FrameworkButton';\r\n\r\nconst $ = window.$;\r\n\r\nfunction FrameworkButtons({ frameworks }) {\r\n  const selfRef = new React.createRef();\r\n\r\n  const invokeFoundation = () => {\r\n    window.setTimeout(() => $(selfRef.current).foundation());\r\n    return frameworks.map(framework => (\r\n      <FrameworkButton key={framework.nid} framework={framework} />\r\n    ));\r\n  };\r\n\r\n  return frameworks.length < 1 ? null : (\r\n    <div className=\"row\" data-equalizer ref={selfRef}>\r\n      {invokeFoundation()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButtons;\r\n","import React, { Component } from 'react';\r\n\r\nimport FrameworkButtons from '../components/framework-buttons/FrameworkButtons';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nclass Frameworks extends Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    frameworks: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const frameworks = await this.competencyService.getAllVersionedFrameworks();\r\n      this.setState({ frameworks });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to fetch framework data', {\r\n        variant: 'error'\r\n      });\r\n      console.error(error);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { frameworks } = this.state;\r\n\r\n    return (\r\n      <div className=\"column\">\r\n        <h3>Overview</h3>\r\n        <p className=\"lead\">\r\n          Competency mapper is a web-based tool to support the creation and\r\n          management of competency frameworks for professionals working in the\r\n          biomolecular sciences{' '}\r\n          <Link to=\"/about\" className=\"readmore\">\r\n            read more{' '}\r\n          </Link>\r\n        </p>\r\n\r\n        <FrameworkButtons frameworks={frameworks} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(Frameworks);\r\n","import HttpService from '../http/http';\r\n\r\nconst http = new HttpService();\r\nconst loginUrl = '/user/login?_format=json';\r\nconst logoutUrl = '/user/logout';\r\n\r\nexport async function login(username, password) {\r\n  const credentials = { name: username, pass: password };\r\n  try {\r\n    const response = await http.post(loginUrl, credentials);\r\n    const { data } = response;\r\n    localStorage.setItem('roles', data.current_user.roles);\r\n    localStorage.setItem('csrf_token', data.csrf_token);\r\n    localStorage.setItem('logout_token', data.logout_token);\r\n    localStorage.setItem('user', data.current_user.name);\r\n    localStorage.setItem('userid', data.current_user.uid);\r\n    return data;\r\n  } catch (error) {\r\n    logout();\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem('roles');\r\n  localStorage.removeItem('csrf_token');\r\n  localStorage.removeItem('logout_token');\r\n  localStorage.removeItem('userid');\r\n  localStorage.removeItem('user');\r\n  return http.post(logoutUrl);\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Masthead from '../containers/masthead/Masthead';\r\nimport ManageAttributes from './ManageAttributes';\r\nimport ManageCompetencies from './ManageCompetencies';\r\nimport CompetencyDetails from './CompetencyDetails';\r\nimport CompetencyList from './CompetencyList';\r\nimport ResourceEdit from './ResourceEdit';\r\nimport ResourceCreate from './ResourceCreate';\r\nimport ResourceDetails from './ResourceDetails';\r\nimport ResourcesList from './ResourcesList';\r\nimport ChangePassword from './ChangePassword';\r\nimport About from '../components/about/About';\r\nimport Frameworks from './Frameworks';\r\n\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { login, logout } from '../services/auth/auth';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nconst $ = window.$;\r\n\r\nclass Root extends Component {\r\n  state = {\r\n    isActive: false,\r\n    roles: localStorage.getItem('roles') || '',\r\n    user: localStorage.getItem('user') || ''\r\n  };\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  componentDidMount() {\r\n    $(document).foundation();\r\n    $(document).foundationExtendEBI();\r\n\r\n    this.setState({ isActive: this.activeRequests.isActive });\r\n    this.subcription = this.activeRequests.addEventListener(\r\n      this.handleActiveRequests\r\n    );\r\n\r\n    window.addEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.subcription) {\r\n      this.activeRequests.removeEventListener(this.subcription);\r\n    }\r\n    window.removeEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  handleActiveRequests = hasPendingRequests => {\r\n    this.setState({ isActive: hasPendingRequests });\r\n  };\r\n\r\n  detectUserChangesFromOtherTabs = ({ key, newValue }) => {\r\n    if (key === 'user') {\r\n      if (newValue) {\r\n        this.setState({\r\n          user: localStorage.getItem('user'),\r\n          roles: localStorage.getItem('roles')\r\n        });\r\n      } else {\r\n        this.setState({ user: '', roles: '' });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogin = async (username, password) => {\r\n    try {\r\n      await login(username, password);\r\n      this.setState({\r\n        user: localStorage.getItem('user'),\r\n        roles: localStorage.getItem('roles')\r\n      });\r\n    } catch (error) {\r\n      window.console.error(error);\r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 400:\r\n            window.alert(error.response.data.message);\r\n            return;\r\n          default:\r\n            window.alert(\r\n              'Sorry, there was an unknown login problem, please try again.'\r\n            );\r\n        }\r\n        window.alert(\r\n          'Sorry, there was an unknown login problem, please try again.'\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.setState({ user: '', roles: '' });\r\n    logout();\r\n  };\r\n\r\n  render() {\r\n    const { isActive, roles, user } = this.state;\r\n    return (\r\n      <>\r\n        <SnackbarProvider\r\n          maxSnack={1}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          preventDuplicate\r\n        >\r\n          <Masthead\r\n            roles={roles}\r\n            user={user}\r\n            isActive={isActive}\r\n            onLogin={this.handleLogin}\r\n            onLogout={this.handleLogout}\r\n          />\r\n\r\n          <section id=\"main-content-area\" className=\"row\" role=\"main\">\r\n            <main className=\"column\">\r\n              <Switch>\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/edit/:nid\"\r\n                  component={ResourceEdit}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/create\"\r\n                  component={ResourceCreate}\r\n                />\r\n                <Route\r\n                  path=\"/training-resources/:id\"\r\n                  component={ResourceDetails}\r\n                />\r\n                <Route\r\n                  path=\"/all-training-resources\"\r\n                  component={ResourcesList}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:cid/manage-attributes\"\r\n                  component={ManageAttributes}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:domainId?\"\r\n                  component={ManageCompetencies}\r\n                />\r\n                <Route\r\n                  path=\"/framework/:framework/:version/competency/details/:cid\"\r\n                  component={CompetencyDetails}\r\n                />\r\n                <Route\r\n                  path=\"/framework/:framework/:version\"\r\n                  component={CompetencyList}\r\n                />\r\n                <Route\r\n                  path=\"/user/change/password\"\r\n                  component={ChangePassword}\r\n                />\r\n                <Route path=\"/about\" component={About} />\r\n                <Route path=\"/\" component={Frameworks} />\r\n              </Switch>\r\n            </main>\r\n          </section>\r\n        </SnackbarProvider>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Root;\r\n\r\nclass ProtectedRoute extends Component {\r\n  render() {\r\n    const { component: Component, condition, ...props } = this.props;\r\n    return (\r\n      <Route\r\n        {...props}\r\n        render={props =>\r\n          condition ? <Component {...props} /> : <Redirect to=\"/\" />\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\n\r\nimport Root from './app/containers/Root';\r\nimport Modal from 'react-modal';\r\n\r\nconst root = document.getElementById('root');\r\nReactDOM.render(\r\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <Root />\r\n  </BrowserRouter>,\r\n  root\r\n);\r\n\r\nModal.setAppElement(root);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meter\":\"progress-bar_meter__2KLWm\",\"progress\":\"progress-bar_progress__QKIy2\"};"],"sourceRoot":""}