(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1070:function(e,t){},1072:function(e,t){},1082:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),i=a.n(c),o=a(4),l=(a(313),a(282)),s=a(1),u=a.n(s),m=a(2),p=a(8),f=a(7),d=a(11),h=a(10),v=a(12),g=a(73),b=function(){function e(){if(Object(p.a)(this,e),e.instance)return this.instance;e.instance=this}return Object(f.a)(e,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hal+json",t=window.localStorage.getItem("csrf_token");return"json"===e?{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":t,Authorization:"Basic"}:{Accept:"application/hal+json","Content-Type":"application/hal+json","X-CSRF-Token":t,Authorization:"Basic"}}}]),e}(),E=a(32),y=a.n(E),_=localStorage.getItem("userid"),k=_?"https://cms.competency.ebi.ac.uk":"https://www.ebi.ac.uk",w="http://cms.competency.ebi.ac.uk";y.a.defaults.baseURL=k;var N=_?"&timestamp="+Date.now():"",j=function(){function e(){if(Object(p.a)(this,e),this.headers=new b,e.instance)return e.instance;e.instance=this}return Object(f.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?y.a.get(e,{headers:this.headers.get(t),withCredentials:!0}):y.a.get(e+"&source=competencyhub"+N)}},{key:"post",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hal+json";return y.a.post("https://cms.competency.ebi.ac.uk"+e,t,{headers:this.headers.get(a),withCredentials:!0})}},{key:"patch",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hal+json";return y.a.patch("https://cms.competency.ebi.ac.uk"+e,t,{headers:this.headers.get(a),withCredentials:!0})}}]),e}(),x={csrf_token:localStorage.getItem("csrf_token"),currently_logged_in_user:{id:null,username:"",is_logged_in:!1,roles:[]},getLoggedInUser:function(){var e=this;return new Promise(function(t,a){y.a.get("".concat("https://cms.competency.ebi.ac.uk","/api/users?_format=json"),{withCredentials:!0}).then(function(a){e.currently_logged_in_user=a.data.user,t(a.data.user)}).catch(function(e){console.log("error caught",e),a(e)})})},logout:function(){return new Promise(function(e,t){var a=localStorage.getItem("logout_token");y.a.get("".concat("https://cms.competency.ebi.ac.uk","/user/logout?_format=json&token=").concat(a,"&timestamp=").concat(Date.now()),{withCredentials:!0}).then(function(){localStorage.removeItem("roles"),localStorage.removeItem("csrf_token"),localStorage.removeItem("logout_token"),localStorage.removeItem("userid"),localStorage.removeItem("user"),e()}).catch(function(e){t(e)})})}},O=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).navRef=r.a.createRef(),a.state={user:a.props.user,frameworks:[]},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("csrf_token");fetch("".concat(k,"/api/authorisation/").concat(this.state.user,"?_format=json"),{method:"GET",credentials:"include",headers:{"X-CSRF-Token":t}}).then(function(e){return e.json()}).then(function(t){e.setState({frameworks:t})})}},{key:"render",value:function(){var e=this.props.roles,t=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-list__item",key:"navigation"},r.a.createElement(o.b,{className:"vf-link",to:"/manage-frameworks",tabIndex:"0"},"Manage frameworks")),r.a.createElement("li",{className:"vf-list__item",style:{padding:"5px"}},"|")),a=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-list__item",key:"resources"},r.a.createElement(o.b,{className:"vf-link",to:"/all-training-resources"},"Manage Training Resources")),r.a.createElement("li",{className:"vf-list__item",style:{padding:"5px"}},"|")),n=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-list__item",key:"myaccount",style:{padding:"5px"}},r.a.createElement(o.b,{className:"vf-link",to:"/user/view"},"My account")),r.a.createElement("li",{className:"vf-list__item",key:"changepwd",style:{padding:"5px"}},r.a.createElement(o.b,{className:"vf-link",to:"/user/change/password"},"Change password")),r.a.createElement("li",{className:"vf-list__item",style:{padding:"5px"}},r.a.createElement("span",{className:"vf-link",href:"#",onClick:function(e){e.preventDefault(),x.logout().then(function(){window.location.reload()})},style:{cursor:"pointer"}},"Logout")));return r.a.createElement("div",null,r.a.createElement("div",{className:"vf-breadcrumbs"},r.a.createElement("ul",{className:"vf-breadcrumbs__list | vf-list vf-list--inline"},e.includes("framework_manager")&&t,e.includes("content_manager")&&a,n)))}}]),t}(n.Component),S=a(15),C=(a(102),a(38)),D=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onChange=function(e){a.setState(Object(S.a)({},e.currentTarget.name,e.currentTarget.value))},a.submit=function(){var e=a.props.onSubmit,t=a.state,n=t.username,r=t.password;n&&r&&e(n,r)},a.state={showModal:!1,username:"",password:""},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"OpenModal",value:function(e){e.preventDefault(),this.setState({showModal:!0})}},{key:"CloseModal",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement("a",{href:"#",onClick:function(t){return e.OpenModal(t)}},"Login as administrator")),r.a.createElement("p",null,"Manage frameworks and competencies.")),r.a.createElement(C.Modal,{open:this.state.showModal,onClose:function(t){return e.CloseModal()},center:!0,classNames:{overlay:"customOverlay",modal:"customModal"}},r.a.createElement("div",null,r.a.createElement("h3",null,"Admin login"),r.a.createElement("p",null,"If you are a framework manager or content manager, please login to continue")),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("input",{value:a,name:"username",onChange:function(t){return e.onChange(t)},type:"text",autoComplete:"username",placeholder:"Username",className:"vf-form__input"})),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("input",{value:n,name:"password",onChange:function(t){return e.onChange(t)},type:"password",autoComplete:"current-password",placeholder:"Password",className:"vf-form__input"})),r.a.createElement("div",null,r.a.createElement("button",{className:"vf-button vf-button--sm vf-button--primary",onClick:function(){return e.submit()}},r.a.createElement("i",{className:"fa fa-key","aria-hidden":"true"})," Login"))))}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).onLogin=function(e,t){a.props.onLogin(e,t)},a.onLogout=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.onLogout();case 2:case"end":return e.stop()}},e)})),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.roles,a=e.user,n=e.location.pathname,c={backgroundImage:"url("+JSON.stringify("https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/themes/custom/ebi_academy/images/mastheads/CH_Jigsaw.jpg")+")",marginBottom:0};return r.a.createElement(r.a.Fragment,null,n.includes("profile/view")||n.includes("profile/create")||n.includes("profiles/compare")||n.includes("profile/edit")||n.includes("profile/map")||n.includes("training-resources/")||n.includes("competency/details")?"":r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"vf-hero | vf-u-fullbleed",style:c},r.a.createElement("div",{className:"vf-hero__content | vf-box | vf-stack vf-stack--400"},r.a.createElement("h1",{className:"vf-hero__heading"},"Competency Hub"),r.a.createElement("p",{className:"vf-hero__subheading"},"Browse competencies, career profiles and training resources to advance your career in the life sciences"),r.a.createElement(o.b,{className:"vf-hero__link",to:"/about"},"Learn more about competencies and the Competency Hub",r.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12S18.627 0 12 0C5.376.008.008 5.376 0 12zm13.707-5.209l4.5 4.5a1 1 0 010 1.414l-4.5 4.5a1 1 0 01-1.414-1.414l2.366-2.367a.25.25 0 00-.177-.424H6a1 1 0 010-2h8.482a.25.25 0 00.177-.427l-2.366-2.368a1 1 0 011.414-1.414z",fill:"",fillRule:"nonzero"}))))),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null,a&&t?r.a.createElement(O,{roles:t,user:a,onLogout:this.onLogout}):""))))}}]),t}(n.Component),T=(a(338),{oriValue:"",value:"",active:!1}),I=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state=T,a.selfRef=r.a.createRef(),a.inputRef=r.a.createRef(),a.toggleActive=function(e){a.selfRef.current&&a.selfRef.current.contains(e.target)?a.setState({active:!0}):a.reset()},a.reset=function(){var e=a.state,t=e.oriValue;e.active&&a.setState({active:!1,value:t})},a.submit=function(){var e=a.props.change,t=a.state.value;e(t),a.setState({active:!1,oriValue:t})},a.render=function(){var e=a.props,t=e.style,n=e.staticElement,c=e.editable,i=a.state,o=i.value,l=i.active;return c?l?r.a.createElement("div",{className:"edit-inline-container",ref:a.selfRef},r.a.createElement("input",{type:"text",className:"inner-input vf-form__input",value:o,onChange:function(e){return a.onChange(e.target.value)},ref:a.inputRef}),r.a.createElement("div",{className:"edit-inline-controls"},r.a.createElement("button",{className:"button margin-bottom-none",type:"button",onClick:a.submit},r.a.createElement("i",{className:"icon icon-common icon-check","aria-label":"accept changes"})),r.a.createElement("button",{className:"button margin-bottom-none",type:"button",onClick:a.reset},r.a.createElement("i",{className:"icon icon-common icon-undo","aria-label":"undo changes"})))):r.a.createElement(n,{style:t,ref:a.selfRef},[o,r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{key:"dummy",className:"icon icon-common icon-edit icon-left-spacer edit-indicator cursor","aria-label":"edit"}),r.a.createElement("span",{className:"edit-indicator cursor"},"Edit"))]):r.a.createElement(n,{style:t},o)},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.text;this.setState({value:e,oriValue:e}),document.addEventListener("mousedown",this.toggleActive)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.toggleActive)}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.active&&!t.active&&setTimeout(function(){return a.inputRef.current&&a.inputRef.current.focus()},0)}},{key:"onChange",value:function(e){this.setState({value:e})}}]),t}(n.Component);I.defaultProps={style:{},text:"",change:function(e){},staticElement:"div",editable:!0};var R={description:"",uuid:"",mapping:""},q=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=R,a.onChange=function(e){e.preventDefault();var t=e.currentTarget.value,n=e.currentTarget.name;"uuid"===n&&a.setState(Object(S.a)({},n,t)),"description"===n&&a.setState(Object(S.a)({},n,t)),"mapping"===n&&a.setState(Object(S.a)({},n,t))},a.onSubmit=function(e){e.preventDefault();var t=a.props.onCreate,n=a.state,r=n.description,c=n.uuid,i=n.mapping;r.trim()&&c&&(t(r,c,i),a.reset())},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setDefaultOption()}},{key:"setDefaultOption",value:function(){var e=this.props.options;if(e.length){var t=e[0].uuid;this.setState({uuid:t})}}},{key:"reset",value:function(){this.setState(R),this.setDefaultOption()}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.placeholder,n=e.options,c=e.showMappingField,i=this.state,o=i.description,l=i.uuid,s=i.mapping,u=n.map(function(e){var t=e.description,a=e.uuid;return r.a.createElement("option",{key:a,value:a},t)});return r.a.createElement("form",{onSubmit:this.onSubmit,className:"callout"},r.a.createElement("h4",null,t),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column large-7"},r.a.createElement("input",{type:"text",placeholder:a,name:"description",value:o,required:!0,onChange:this.onChange})),r.a.createElement("div",{className:"column large-3"},r.a.createElement("select",{name:"uuid",value:l,required:!0,onChange:this.onChange},u)),r.a.createElement("div",{className:"column large-2"},r.a.createElement("input",{type:"submit",className:"button",value:"Create"})),c?r.a.createElement("div",{className:"column"},r.a.createElement("label",null,"Maps to competency/attribute from other framework",r.a.createElement("input",{type:"text",placeholder:"Framework (version), competency or attribute",name:"mapping",value:s,onChange:this.onChange}))):null))}}]),t}(n.Component);q.defaultProps={showMappingField:!1};var M=function(e){var t=e.message,a=e.style;return r.a.createElement("div",{className:"margin-top-large callout alert",style:a},t)};M.defaultProps={message:"Sorry, there was a problem when fetching the data!",style:{}};var P=M,F=a(3),L=a(30),B=a.n(L),U=a(17),V=a.n(U),H={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"80%",height:"50%",border:"1px solid #000"}},J=function(e){var t=e.versions,a=e.framework,c=Object(n.useState)(!1),i=Object(F.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(""),m=Object(F.a)(u,2),p=m[0],f=m[1],d=t.filter(function(e){return"draft"!==e.number}).map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(e.number)},e.number)," ",r.a.createElement("button",{className:"vf-link ch_link",onClick:function(){f("Version: "+e.number+e.release_notes),s(!0)}},"(release notes)"))});return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{isOpen:l,style:H},r.a.createElement("h4",null,"Release notes for ",a," "),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("button",{className:"button",onClick:function(){f(""),s(!1)}},"X")),V()(p),d,r.a.createElement("div",{className:"padding-top-large"},r.a.createElement("button",{className:"button",onClick:function(){f(""),s(!1)}},"Close"))),r.a.createElement("div",null,r.a.createElement("h3",{className:"vf-u-type__text-heading--4"},"Framework versions"),0===t.length?"No previous versions":r.a.createElement("ul",null,d)))},z=a(24),G=k.replace("https","http"),W=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"createCompetency",value:function(e){var t,a,n=e.description,r=e.domainId,c=e.domainUuid,i=e.mapping,o=void 0===i?"":i,l=e.draftId,s=e.draftUuid;return{_links:(t={type:{href:"".concat(G,"/rest/type/node/competency")}},Object(S.a)(t,"".concat(G,"/rest/relation/node/competency/field_domain"),{href:"".concat(G,"/node/").concat(r,"?_format=hal_json")}),Object(S.a)(t,"".concat(G,"/rest/relation/node/competency/field_versions"),[{href:"http://local.competency-mapper/taxonomy/term/".concat(l,"?_format=hal_json")}]),t),title:[{value:n}],type:[{target_id:"competency"}],field_map_other_competency:[{value:o}],_embedded:(a={},Object(S.a)(a,"".concat(G,"/rest/relation/node/competency/field_versions"),[{_links:{self:{href:"".concat(G,"/taxonomy/term/").concat(l,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/taxonomy_term/version")}},uuid:[{value:s}]}]),Object(S.a)(a,"".concat(G,"/rest/relation/node/competency/field_domain"),[{_links:{self:{href:"".concat(G,"/node/").concat(r,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/node/domain")}},uuid:[{value:c}],lang:"en"}]),a)}}},{key:"createAttribute",value:function(e){var t,a,n=e.description,r=e.attributeTypeId,c=e.attributeTypeUuid,i=e.competencyId,o=e.competencyUuid,l=e.draftId,s=e.draftUuid;return{_links:(t={type:{href:"".concat(G,"/rest/type/node/attribute")}},Object(S.a)(t,"".concat(G,"/rest/relation/node/attribute/field_competency"),{href:"".concat(G,"/node/").concat(i,"?_format=hal_json")}),Object(S.a)(t,"".concat(G,"/rest/relation/node/attribute/field_attribute_type"),{href:"".concat(G,"/node/").concat(r,"?_format=hal_json")}),Object(S.a)(t,"".concat(G,"/rest/relation/node/competency/field_versions"),[{href:"http://local.competency-mapper/taxonomy/term/".concat(l,"?_format=hal_json")}]),t),title:[{value:n}],type:[{target_id:"attribute"}],_embedded:(a={},Object(S.a)(a,"".concat(G,"/rest/relation/node/competency/field_versions"),[{_links:{self:{href:"".concat(G,"/taxonomy/term/").concat(l,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/taxonomy_term/version")}},uuid:[{value:s}]}]),Object(S.a)(a,"".concat(G,"/rest/relation/node/attribute/field_competency"),[{_links:{self:{href:"".concat(G,"/node/").concat(i,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/node/competency")}},uuid:[{value:o}],lang:"en"}]),Object(S.a)(a,"".concat(G,"/rest/relation/node/attribute/field_attribute_type"),[{_links:{self:{href:"".concat(G,"/node/").concat(r,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/node/attribute_type")}},uuid:[{value:c}],lang:"en"}]),a)}}},{key:"mutateCompetency",value:function(t,a){return e.mutate(t,a,"competency")}},{key:"mutateCompetencyPosition",value:function(t,a){return e.mutate(t,a,"competency")}},{key:"mutateAttribute",value:function(t,a){return e.mutate(t,a,"attribute")}},{key:"mutateDomain",value:function(t,a){return e.mutate(t,a,"domain")}},{key:"mutate",value:function(e,t,a){var n;return n={_links:{type:{href:"".concat(G,"/rest/type/node/").concat(a)}}},Object(S.a)(n,e,[{value:t}]),Object(S.a)(n,"type",[{target_id:a}]),n}},{key:"publishFramework",value:function(e,t,a){return{type:[{target_id:"article"}],title:[{value:e}],field_parent:[{value:e}],field_release_notes:[{value:a}],field_item:[{value:t}]}}},{key:"createDraftFramework",value:function(e){return{type:[{target_id:"article"}],title:[{value:"draft"}],field_parent:[{value:e}]}}},{key:"toggleArchivingVersionedNode",value:function(e,t){return{type:[{target_id:"article"}],field_parent:[{value:e}],field_item:[{value:t}]}}},{key:"updateReleaseNotes",value:function(e){return{_links:{type:{href:"".concat(G,"/rest/type/taxonomy_term/version")}},vid:[{target_id:"version"}],field_release_notes:[{value:e}]}}},{key:"changeDomain",value:function(e,t,a,n){return{_links:Object(S.a)({self:{href:"".concat(G,"/node/").concat(e,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/node/competency")}},"".concat(G,"/rest/relation/node/competency/field_domain"),{href:"".concat(G,"/node/").concat(t,"?_format=hal_json")}),field_map_other_competency:[{value:n}],type:{target_id:"competency"},_embedded:Object(S.a)({},"".concat(G,"/rest/relation/node/competency/field_domain"),[{_links:{self:{href:"".concat(G,"/node/").concat(t,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/node/domain")}},uuid:[{value:a}]}])}}},{key:"changeAttributeSettings",value:function(e,t,a,n,r){var c,i;return{_links:(c={self:{href:"".concat(G,"/node/").concat(e,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/node/attribute")}},Object(S.a)(c,"".concat(G,"/rest/relation/node/attribute/field_competency"),{href:"".concat(G,"/node/").concat(t,"?_format=hal_json")}),Object(S.a)(c,"".concat(G,"/rest/relation/node/attribute/field_attribute_type"),{href:"".concat(G,"/node/").concat(n,"?_format=hal_json")}),c),type:{target_id:"attribute"},_embedded:(i={},Object(S.a)(i,"".concat(G,"/rest/relation/node/attribute/field_competency"),[{_links:{self:{href:"".concat(G,"/node/").concat(t,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/node/competency")}},uuid:[{value:a}]}]),Object(S.a)(i,"".concat(G,"/rest/relation/node/attribute/field_attribute_type"),[{_links:{self:{href:"".concat(G,"/node/").concat(n,"?_format=hal_json")},type:{href:"".concat(G,"/rest/type/node/attribute_type")}},uuid:[{value:r}]}]),i)}}},{key:"editResource",value:function(e,t,a,n,r,c,i,o,l,s,u,m,p){return{_links:{type:{href:"".concat(G,"/rest/type/node/training_resource")}},title:[{value:t}],type:[{target_id:"training_resource"}]}}},{key:"createBulkData",value:function(e,t,a,n,r){return{type:[{target_id:"article"}],body:[{value:a}],field_parent:[{value:e}],field_item:[{value:t}],field_type:[{value:n}],field_additional_information:[{value:r}]}}},{key:"saveSorting",value:function(e){return{type:[{target_id:"article"}],body:[{value:e}]}}}]),e}(),Q=function(){function e(){if(Object(p.a)(this,e),this.http=new j,e.instance)return this.instance;e.instance=this}return Object(f.a)(e,[{key:"getFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/api/v1/framework/".concat(t,"?_format=json"));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getVersionedDraftFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/api/".concat(t,"/edit?_format=json&timestamp=").concat(Date.now()),"json");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getVersionedFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/api/".concat(t,"/").concat(a,"?_format=json"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getAllFrameworks",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/api/v1/framework?_format=json");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAllVersionedFrameworks",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/api/version_manager?_format=json");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createAttribute",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("/node?_format=hal_json",W.createAttribute(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createCompetency",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("/node?_format=hal_json",W.createCompetency(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"patchCompetency",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),W.mutateCompetency(a,n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"patchDomain",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),W.mutateDomain(a,n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"patchCompetencyPosition",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),W.mutateCompetencyPosition(a,n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"toggleArchivingVersionedNode",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/api/".concat(t,"/edit?_format=json"),W.toggleArchivingVersionedNode(t,a),"json");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"patchAttribute",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),W.mutateAttribute(a,n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"patchAttributePosition",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),W.mutateAttribute(a,n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"publishFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/api/version_manager?_format=json",W.publishFramework(t,a,n),"json");case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"createDraftFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("/api/version_manager?_format=json",W.createDraftFramework(t),"json");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateReleaseNotes",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/taxonomy/term/".concat(a,"?_format=hal_json"),W.updateReleaseNotes(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"changeDomain",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r){var c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),W.changeDomain(t,a,n,r));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"editResource",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r,c,i,o,l,s,m,p,f,d){var h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),W.editResource(t,a,n,r,c,i,o,l,s,m,p,f,d));case 2:return h=e.sent,e.abrupt("return",h.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,c,i,o,l,s,u,m,p,f){return e.apply(this,arguments)}}()},{key:"changeAttributeSettings",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r,c){var i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),W.changeAttributeSettings(t,a,n,r,c));case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,c){return e.apply(this,arguments)}}()},{key:"demap",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/api/mapping?_format=hal_json&resource="+t+"&items="+a+"&timestamp=".concat(Date.now()));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"attrmap",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/api/mapping?_format=hal_json&resource="+t+"&attributes="+a+"&framework_id="+n+"&timestamp=".concat(Date.now()));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"createBulkData",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r,c){var i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("/api/data_manager?_format=json",W.createBulkData(t,a,n,r,c),"json");case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,c){return e.apply(this,arguments)}}()},{key:"saveSorting",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/api/data_manager?_format=json",W.saveSorting(t),"json");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Y=function(){function e(){if(Object(p.a)(this,e),this.counter=0,this.callbacks=[],e.instance)return e.instance;e.instance=this}return Object(f.a)(e,[{key:"isActive",get:function(){return!!this.counter}}]),Object(f.a)(e,[{key:"addEventListener",value:function(e){return this.callbacks.push(e)}},{key:"removeEventListener",value:function(e){return delete this.callbacks[e-1]}},{key:"startRequest",value:function(){0===this.counter&&this.callbacks.forEach(function(e){return e&&e(!0)}),++this.counter}},{key:"finishRequest",value:function(){1===this.counter&&this.callbacks.forEach(function(e){return e&&e(!1)}),this.counter>0&&--this.counter}}]),e}(),K=a(65),X=function(e){return Array.prototype.flat?e.flat():e.reduce(function(e,t){return[].concat(Object(K.a)(e),Object(K.a)(t))},[])},Z=new RegExp("</?.+?/?>","g"),$=/&nbsp;/g,ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.replace(Z,t).replace($," ")},te=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).activeRequests=new Y,a.competencyService=new Q,a.state={framework:a.props.match.params.framework,frameworkName:"",frameworkVersion:"",frameworStatus:"",attributeTypes:[],versions:[],domainId:"",domainName:"",competencyId:a.props.match.params.cid,competencyUuid:"",competencyName:"",competencyData:[],path:a.props.location.pathname.split("/"),loadingError:!1,editable:!1},a.createAttribute=function(){var e=Object(m.a)(u.a.mark(function e(t,n,r){var c,i,o,l,s,m,p,f,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.state,i=c.competencyId,o=c.competencyUuid,l=c.attributeTypes,s=c.versions,m=s.filter(function(e){return"draft"===e.number}),e.prev=2,a.activeRequests.startRequest(),p=l.find(function(e){return e.uuid===n}).id,f=m[0].id,d=m[0].uuid,e.next=9,a.competencyService.createAttribute({description:t,competencyId:i,competencyUuid:o,attributeTypeId:p,attributeTypeUuid:n,draftId:f,draftUuid:d});case 9:return e.next=11,a.fetchFramework();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 16:return e.prev=16,a.activeRequests.finishRequest(),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[2,13,16,19]])}));return function(t,a,n){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){window.scroll(0,0),this.loadData()}},{key:"loadData",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.activeRequests.startRequest(),e.next=4,this.fetchVersions(t);case 4:return e.next=6,this.fetchFramework(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({loadingError:!0});case 11:return e.prev=11,this.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,8,11,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchVersions",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.framework,e.next=3,this.competencyService.getAllVersionedFrameworks();case 3:a=e.sent,(n=a.filter(function(e){return e.title.toLowerCase()===t})).length>0&&(r=n[0].attribute_types.map(function(e){return{description:e.title,uuid:e.uuid}}),this.setState({versions:n[0].versions.reverse(),attributeTypes:r}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r,c,i,o,l,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.framework,n=t.versions,r=t.competencyId,c=n.filter(function(e){return"live"===e.status}),i=n.filter(function(e){return"draft"===e.status}),o=[],l=!1,!i.length){e.next=12;break}return e.next=8,this.competencyService.getVersionedDraftFramework(a);case 8:o=e.sent,l=!0,e.next=16;break;case 12:if(!c.length){e.next=16;break}return e.next=15,this.competencyService.getVersionedFramework(a,c[0].number);case 15:o=e.sent;case 16:(s=this.filterByCompetencyId(o,r)).length&&this.setState({frameworkName:o[0].title,frameworkVersion:o[0].version,frameworkStatus:o[0].status,domainName:s[0].domainTitle,domainId:s[0].domainId,competencyUuid:s[0].uuid,competencyName:s[0].title,competencyData:s[0],editable:l});case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"filterByCompetencyId",value:function(e,t){return X(e.map(function(e){return X(e.domains.map(function(e){return e.competencies.filter(function(e){return e.id===t}).map(function(t){return t.domainTitle=e.title,t.domainId=e.nid,t})}))}))}},{key:"editAttribute",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.activeRequests.startRequest(),e.next=4,this.competencyService.patchAttribute(t,"title",a);case 4:return e.next=6,this.fetchFramework();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,this.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,8,11,14]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"editAttributePosition",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.activeRequests.startRequest(),e.next=4,this.competencyService.patchAttributePosition(t,"field_number",a);case 4:return e.next=6,this.fetchFramework();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,this.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,8,11,14]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"toggleArchive",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.activeRequests.startRequest(),e.next=4,this.competencyService.patchAttribute(t,"field_archived","1"!==a);case 4:return e.next=6,this.fetchFramework();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,this.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,8,11,14]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getAttributeRows",value:function(e){var t=this,a=this.state,n=a.competencyData,c=a.editable;return n.attributes.filter(function(t){return t.type===e.description}).map(function(e){return c?r.a.createElement("tr",{key:e.uuid},r.a.createElement("td",{className:"1"===e.archived?"strikeout":""},r.a.createElement(I,{text:e.title,change:function(a){return t.editAttribute(e.id,a)},editable:"1"!==e.archived})),r.a.createElement("td",{className:"1"===e.archived?"strikeout":""},r.a.createElement(I,{text:e.field_number,change:function(a){return t.editAttributePosition(e.id,a)},editable:"1"!==e.archived})),r.a.createElement("td",null,r.a.createElement("button",{className:"cursor",onClick:function(){return t.toggleArchive(e.id,e.archived)}},"1"===e.archived?r.a.createElement("span",{className:"fas fa-toggle-on"},r.a.createElement("span",null,"Archived")):r.a.createElement("span",{className:"fas fa-toggle-off"}))),r.a.createElement("td",null,r.a.createElement(o.b,{to:"/framework/".concat(t.state.framework,"/competency/").concat(t.state.competencyId,"/attribute/").concat(e.id,"/settings")},r.a.createElement("i",{className:"fas fa-cog"})))):"1"===e.archived?null:r.a.createElement("tr",{key:e.uuid},r.a.createElement("td",{className:"1"===e.archived?"strikeout":""},r.a.createElement(I,{text:e.title,change:function(a){return t.editAttribute(e.id,a)},editable:c})))})}},{key:"getAttributeList",value:function(){var e=this,t=this.state,a=t.attributeTypes,n=t.editable;return a.map(function(t){return r.a.createElement(r.a.Fragment,{key:t.uuid},r.a.createElement("tr",{className:"secondary-background-important white-color"},r.a.createElement("td",null,r.a.createElement("strong",null,r.a.createElement("em",null,t.description))),n&&r.a.createElement("td",{className:"small-1"},"Position"),n&&r.a.createElement("td",{className:"small-1"},"Archive"),n&&r.a.createElement("td",{className:"small-1"},"Settings")),e.getAttributeRows(t))})}},{key:"render",value:function(){var e=this.state,t=e.framework,a=e.frameworkName,n=e.frameworkVersion,c=e.frameworkStatus,i=e.attributeTypes,l=e.versions,s=e.domainId,u=e.domainName,m=e.competencyName,p=e.competencyData,f=e.loadingError,d=e.editable;return f?r.a.createElement(P,null):0===p.length?null:r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Manage attributes"),r.a.createElement("h4",null,r.a.createElement(o.b,{to:"/framework/".concat(t,"/manage/competencies")},a)," / ",r.a.createElement(o.b,{to:"/framework/".concat(t,"/manage/competencies/").concat(s)},u)," / ",m),r.a.createElement("p",null,r.a.createElement("span",{className:"tag"},n),r.a.createElement("span",{className:"tag secondary-background"},""===c?"draft":c)),d&&r.a.createElement(q,{title:"Create new attribute",placeholder:"Attribute description",options:i,onCreate:this.createAttribute}),r.a.createElement("table",null,r.a.createElement("tbody",null,this.getAttributeList())),r.a.createElement(J,{framework:t,versions:l}))}}]),t}(r.a.Component),ae=Object(z.withSnackbar)(te),ne=a(21),re=a.n(ne),ce=function(e){var t=e.release,a=e.updateNotes,c=e.createDraft,i=e.versions,o=e.editable,l=i.reduce(function(e,t){return"live"===t.status?t.number:e},""),s=i.reduce(function(e,t){return"draft"===t.number?t.release_notes:e},""),u=Object(n.useState)(""),m=Object(F.a)(u,2),p=m[0],f=m[1],d=Object(n.useState)(s),h=Object(F.a)(d,2),v=h[0],g=h[1],b=Object(n.useState)(!1),E=Object(F.a)(b,2),y=E[0],_=E[1],k=Object(n.useState)(!1),w=Object(F.a)(k,2),N=w[0],j=w[1],x=function(){f(""),_(!1)};return o?r.a.createElement("div",null,r.a.createElement(B.a,{isOpen:N},r.a.createElement(re.a,{content:v,events:{change:function(e){return g(e.editor.getData())}}}),r.a.createElement("div",{className:"padding-top-large"},r.a.createElement("span",{className:"padding-right-small"},r.a.createElement("button",{className:"button",onClick:function(){g(s),j(!1)}},"Close")),r.a.createElement("button",{className:"button",onClick:function(){a(v),j(!1)}},"Save"))),r.a.createElement(B.a,{isOpen:y},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=v.trim();y&&p&&a&&(t(p,a),x())}},r.a.createElement("label",null,"Version"," ",l?"(live version ".concat(l,")"):"(no live version)",r.a.createElement("input",{type:"text",placeholder:"1.0.0",value:p,required:!0,onChange:function(e){return f(e.currentTarget.value.trim())}})),r.a.createElement(re.a,{content:v,events:{change:function(e){return g(e.editor.getData())}}}),r.a.createElement("div",{className:"padding-top-large"},r.a.createElement("span",{className:"padding-right-small"},r.a.createElement("button",{className:"button",onClick:x},"Cancel")),r.a.createElement("button",{className:"button",type:"submit"},"Publish")))),r.a.createElement("span",{className:"padding-right-small"},r.a.createElement("button",{className:"vf-button vf-button--tertiary vf-button--sm",onClick:function(){return _(!0)}},"Release new version ",r.a.createElement("i",{className:"icon icon-common icon-send"}))),r.a.createElement("button",{className:"vf-button vf-button--tertiary vf-button--sm",onClick:function(){return j(!0)}},"Update release notes ",r.a.createElement("i",{className:"icon icon-common icon-edit"}))):r.a.createElement("div",null,r.a.createElement("span",{className:"padding-right-small"},r.a.createElement("button",{className:"vf-button vf-button--tertiary vf-button--sm",onClick:function(){return c()}},"Create draft")))},ie=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).activeRequests=new Y,a.competencyService=new Q,a.state={framework:"",frameworkName:"",frameworkData:[],frameworkVersion:"",frameworkVersionId:"",frameworkStatus:"",competencyTypes:[],versions:[],loadingError:!1,editable:!1,allowedFrms:[]},a.createCompetency=function(){var e=Object(m.a)(u.a.mark(function e(t,n,r){var c,i,o,l,s,m,p,f;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.state,i=c.framework,o=c.frameworkData,l=c.versions,s=l.filter(function(e){return"draft"===e.number}),e.prev=2,a.activeRequests.startRequest(),m=o[0].domains.find(function(e){return e.uuid===n}).nid,p=s[0].id,f=s[0].uuid,e.next=9,a.competencyService.createCompetency({description:t,domainId:m,domainUuid:n,mapping:r,draftId:p,draftUuid:f});case 9:return e.next=11,a.fetchFramework(i);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 16:return e.prev=16,a.activeRequests.finishRequest(),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[2,13,16,19]])}));return function(t,a,n){return e.apply(this,arguments)}}(),a.releaseNewVersion=function(){var e=Object(m.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.framework,e.prev=1,a.activeRequests.startRequest(),e.next=5,a.competencyService.publishFramework(r,t,n);case 5:a.loadData(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,a.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t,a){return e.apply(this,arguments)}}(),a.updateNotes=function(){var e=Object(m.a)(u.a.mark(function e(t){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state,r=n.framework,c=n.frameworkVersionId,e.prev=1,a.activeRequests.startRequest(),e.next=5,a.competencyService.updateReleaseNotes(t,c);case 5:a.loadData(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,a.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),a.createDraft=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.framework,e.prev=1,a.activeRequests.startRequest(),e.next=5,a.competencyService.createDraftFramework(t);case 5:a.loadData(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,a.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])})),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,a=t.framework,n=t.domainId,e.next=3,this.loadData(a);case 3:n&&setTimeout(function(){var e=r.refs[n];e&&e.scrollIntoView()},100);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,c,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state,r=n.framework,c=n.frameworkData,i=n.loadingError,r!==a.framework&&(0!==c.length||i||this.loadData(r));case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.activeRequests.startRequest(),e.next=4,this.fetchVersions(t);case 4:return e.next=6,this.fetchFramework(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({loadingError:!0});case 11:return e.prev=11,this.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,8,11,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchVersions",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.competencyService.getAllVersionedFrameworks();case 2:a=e.sent,(n=a.filter(function(e){return e.title.toLowerCase()===t})).length>0&&this.setState({versions:n[0].versions.reverse()});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,c,i,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.versions,n=a.filter(function(e){return"live"===e.status}),r=a.filter(function(e){return"draft"===e.status}),c=[],i=!1,!r.length){e.next=13;break}return e.next=8,this.competencyService.getVersionedDraftFramework(t);case 8:c=e.sent,this.setState({frameworkVersionId:r[0].id}),i=!0,e.next=17;break;case 13:if(!n.length){e.next=17;break}return e.next=16,this.competencyService.getVersionedFramework(t,n[0].number);case 16:c=e.sent;case 17:c.length&&(o=c[0].domains.map(function(e){return{description:e.title,uuid:e.uuid}}),this.setState({frameworkName:c[0].title,frameworkData:c,frameworkVersion:c[0].version,frameworkStatus:c[0].status,competencyTypes:o,editable:i}));case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"editCompetency",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.framework,e.prev=1,this.activeRequests.startRequest(),e.next=5,this.competencyService.patchCompetency(t,"title",a);case 5:return e.next=7,this.fetchFramework(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 12:return e.prev=12,this.activeRequests.finishRequest(),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,9,12,15]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"editCompetencyPosition",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.framework,e.prev=1,this.activeRequests.startRequest(),e.next=5,this.competencyService.patchCompetencyPosition(t,"field_number",a);case 5:return e.next=7,this.fetchFramework(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 12:return e.prev=12,this.activeRequests.finishRequest(),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,9,12,15]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"toggleArchive",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.framework,e.prev=1,this.activeRequests.startRequest(),e.next=5,this.competencyService.toggleArchivingVersionedNode(n,t);case 5:return e.next=7,this.fetchFramework(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 12:return e.prev=12,this.activeRequests.finishRequest(),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,9,12,15]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCompetencyList",value:function(){var e=this,t=this.state,a=t.frameworkData,n=t.editable;return a[0].domains.map(function(t){return r.a.createElement(r.a.Fragment,{key:t.nid},r.a.createElement("tr",{className:"secondary-background-important white-color",ref:t.nid},r.a.createElement("td",null,r.a.createElement("h4",null,t.title)),n&&r.a.createElement("td",{className:"small-1"},"Position"),n&&r.a.createElement("td",{className:"small-1"},"Archive"),r.a.createElement("td",null,"Attributes"),n&&r.a.createElement("td",{className:"small-1"},"Settings")),e.getCompetencyRows(t.competencies))})}},{key:"getCompetencyRows",value:function(e){var t=this,a=this.state,n=a.framework,c=a.editable;return e.map(function(e){return c?r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"1"===e.archived?"strikeout":""},r.a.createElement(I,{text:e.title,change:function(a){return t.editCompetency(e.id,a)},editable:"1"!==e.archived})),r.a.createElement("td",null,r.a.createElement(I,{text:e.position,change:function(a){return t.editCompetencyPosition(e.id,a)},editable:"1"!==e.archived})),r.a.createElement("td",null,r.a.createElement("button",{className:"cursor",onClick:t.toggleArchive.bind(t,e.id,e.archived)},"1"===e.archived?r.a.createElement("span",{className:"fas fa-toggle-on"},r.a.createElement("span",null,"Archived")):r.a.createElement("span",{className:"fas fa-toggle-off"}))),r.a.createElement("td",null,r.a.createElement(o.b,{to:"/framework/".concat(n,"/manage/competencies/").concat(e.id,"/manage-attributes")},r.a.createElement("i",{className:"fas fa-sitemap"}))),r.a.createElement("td",null,r.a.createElement(o.b,{to:"/framework/".concat(n,"/competency/").concat(e.id,"/settings")},r.a.createElement("i",{className:"fas fa-cog"})))):"1"===e.archived?null:r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(I,{text:e.title,change:function(a){return t.editCompetency(e.id,a)},editable:c})),r.a.createElement("td",null,r.a.createElement(o.b,{to:"/framework/".concat(n,"/manage/competencies/").concat(e.id,"/manage-attributes")},r.a.createElement("i",{className:"fas fa-sitemap"}))))})}},{key:"render",value:function(){var e=this.state,t=e.framework,a=e.frameworkName,n=e.frameworkData,c=e.frameworkVersion,i=e.frameworkStatus,o=e.competencyTypes,l=e.versions,s=e.loadingError,u=e.editable;return s?r.a.createElement(P,null):0===n.length?null:r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Manage framework"),r.a.createElement("h4",null,a),r.a.createElement("p",null,r.a.createElement("span",{className:"tag"},c),r.a.createElement("span",{className:"tag secondary-background"},""===i?"draft":i)),r.a.createElement(ce,{editable:u,createDraft:this.createDraft,versions:l,release:this.releaseNewVersion,updateNotes:this.updateNotes}),u&&r.a.createElement(q,{title:"Create new competency",placeholder:"Competency description",options:o,onCreate:this.createCompetency,showMappingField:!0}),r.a.createElement("table",null,r.a.createElement("tbody",null,this.getCompetencyList())),r.a.createElement(J,{framework:t,versions:l}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.match.params.framework;return a!==t.framework?{framework:a,frameworkData:[],loadingError:!1}:null}}]),t}(r.a.Component),oe=Object(z.withSnackbar)(ie),le=a(9),se=document.createElement("li");se.className="placeholder";var ue=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).activeRequests=new Y,a.competencyService=new Q,a.saveSorting=function(){var e=Object(m.a)(u.a.mark(function e(t){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.framework,r=a.state.sorting,c=r.map(function(e){return e.id}),e.prev=3,a.activeRequests.startRequest(),e.next=7,a.competencyService.saveSorting(c);case 7:return e.next=9,a.props.loadData(n);case 9:a.props.enqueueSnackbar("Items updated",{variant:"success"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 15:return e.prev=15,a.setState({sorting:void 0}),a.closeModalPosition(),a.activeRequests.finishRequest(),e.finish(15);case 20:case"end":return e.stop()}},e,null,[[3,12,15,20]])}));return function(t){return e.apply(this,arguments)}}(),a.state={loadingError:!1,editable:!1,showModal:!1,parentID:"",parentTitle:"",showAttributeModal:"",attributeType:"",attributeTypeTitle:"",newAttributes:"",competency:[],typetitle:""},a.handleOpenAttributeModal=a.handleOpenAttributeModal.bind(Object(le.a)(a)),a.handleCloseAttributeModal=a.handleCloseAttributeModal.bind(Object(le.a)(a)),a.OpenModalPosition=a.OpenModalPosition.bind(Object(le.a)(a)),a.closeModalPosition=a.closeModalPosition.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"OpenModalPosition",value:function(e,t){this.setState({showModalPosition:!0}),this.setState({competency:t}),this.setState({typetitle:e.target.dataset.typetitle})}},{key:"closeModalPosition",value:function(){this.setState({showModalPosition:!1})}},{key:"handleOpenAttributeModal",value:function(e){this.setState({showAttributeModal:!0}),this.setState({parentID:e.target.dataset.competencyid}),this.setState({parentTitle:e.target.dataset.competencytitle}),this.setState({attributeType:e.target.dataset.attributetype}),this.setState({attributeTypeTitle:e.target.dataset.typetitle}),e.preventDefault()}},{key:"handleCloseAttributeModal",value:function(){this.setState({showAttributeModal:!1})}},{key:"editAttribute",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.framework,c=n.loadData,e.prev=1,this.activeRequests.startRequest(),e.next=5,this.competencyService.patchCompetency(t,"title",a);case 5:return e.next=7,c(r);case 7:this.props.enqueueSnackbar("Attribute updated",{variant:"success"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 13:return e.prev=13,this.activeRequests.finishRequest(),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[1,10,13,16]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"setAttributes",value:function(e){this.setState({newAttributes:e.target.value})}},{key:"saveAttributes",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,c,i,o,l,s,m,p,f,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=this.props,n=a.frameworkData,r=a.framework,c=a.loadData,i=this.state,o=i.newAttributes,l=i.attributeType,s=i.parentID,m=n[0].version_id,p=o,"attribute",f=l,d="";try{d=this.competencyService.createBulkData(s,m,p,"attribute",f),console.log(d),c(r),this.props.enqueueSnackbar("Attributes created",{variant:"success"})}catch(t){this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"})}t.preventDefault(),this.handleCloseAttributeModal();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"archiveAttribute",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.framework,c=n.loadData,e.prev=1,e.next=4,this.competencyService.toggleArchivingVersionedNode(r,t);case 4:c(r),this.props.enqueueSnackbar("Attribute status updated",{variant:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}},e,this,[[1,8,11,13]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"dragStart",value:function(e){this.dragged=e.currentTarget,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.dragged)}},{key:"dragEnd",value:function(e){this.dragged.style.display="block",this.dragged.parentNode.removeChild(se),console.log(this.dragged.parentNode);var t=this.state.competency.attributes,a=Number(this.dragged.dataset.position),n=Number(this.over.dataset.position);a<n&&n--,t.splice(n,0,t.splice(a,1)[0]),this.setState({sorting:t}),console.log(t.map(function(e){return e.id}))}},{key:"dragOver",value:function(e){e.preventDefault(),this.dragged.style.display="none","placeholder"!==e.target.className&&(this.over=e.target,e.target.parentNode.insertBefore(se,e.target))}},{key:"getAttributes",value:function(e,t,a,n,c){var i=this;return e.map(function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-12"},r.a.createElement("li",{className:"attribute_type"},r.a.createElement("em",null,e.title),r.a.createElement("span",{style:{display:"flex"}},!0===c?r.a.createElement("button",{className:"ch_link addButton icon icon-common icon-plus-circle icon-custom ","data-competencyid":a.id,"data-competencytitle":a.title,"data-typetitle":e.title,"data-attributetype":e.id,title:"Add attributes",onClick:function(e){return i.handleOpenAttributeModal(e)}},"Add ",e.title," "):""),r.a.createElement("ul",null,a.attributes.map(function(t){return t.type===e.title?r.a.createElement("li",{key:t.id,className:"1"===t.archived?"strikeout":""},r.a.createElement("div",{className:"attribute_title"},r.a.createElement(I,{style:{display:"inline"},text:t.title,change:function(e){return i.editAttribute(t.id,e)},editable:"1"!==t.archived&&!1!==c}),!0===c?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"edit-indicator"},r.a.createElement("button",{className:"ch_link",onClick:function(){return i.archiveAttribute(t.id,t.archived)}},"1"===t.archived?r.a.createElement("span",{className:"fas fa-toggle-on icon-left-spacer"},r.a.createElement("span",null,"Archived")):r.a.createElement("span",{className:"fas fa-toggle-off icon-left-spacer"}," ",r.a.createElement("span",null," Archive")))),r.a.createElement("span",{className:"edit-indicator"},r.a.createElement("button",{className:"ch_link addButton icon icon-common icon-sort",title:"Change order","data-typetitle":e.title,onClick:function(e){return i.OpenModalPosition(e,a)}},"Change order"," "))):"")):null})),r.a.createElement("hr",null))))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.frameworkDef,n=t.frameworkData,c=t.competency,i=t.domain,o=t.editableFrm,l=this.state,s=l.parentTitle,u=l.attributeTypeTitle;return r.a.createElement("div",null,this.getAttributes(a,n,c,i,o),r.a.createElement(C.Modal,{open:this.state.showAttributeModal,onClose:this.handleCloseAttributeModal,center:!0,classNames:{overlay:"customOverlay",modal:"customModal"}},r.a.createElement("h3",null,"Add ",u," attributes"),r.a.createElement("h4",null,s," "),r.a.createElement("h5",null,"Please enter one ",u," attribute per line"),r.a.createElement("form",{className:"vf-form"},r.a.createElement("textarea",{id:"attribute_txt",rows:"5",onChange:function(t){return e.setAttributes(t)},required:!0,className:"vf-form__input"}),r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm",onClick:function(t){return e.saveAttributes(t)}},"Save"))),r.a.createElement(C.Modal,{open:this.state.showModalPosition,onClose:this.closeModalPosition,center:!0,classNames:{overlay:"customOverlay",modal:"customModal"}},r.a.createElement("h3",null,"Change order"),r.a.createElement("p",null,"Please drag and drop items to change order"),this.state.competency.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,this.state.competency.title),r.a.createElement("ul",{onDragOver:this.dragOver.bind(this)},this.state.competency.attributes.map(function(t,a){return t.type===e.state.typetitle?r.a.createElement("li",{style:{listStyleType:"none"},"data-position":a,key:t.position,draggable:"true",onDragEnd:e.dragEnd.bind(e),onDragStart:e.dragStart.bind(e)},r.a.createElement("i",{className:"icon icon-common icon-move"})," ",t.title):null}))):"",r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm",onClick:this.saveSorting},"Save")))}}]),t}(r.a.Component),me=Object(z.withSnackbar)(ue),pe=a(29),fe=a.n(pe),de=document.createElement("li");de.className="placeholder";var he=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).activeRequests=new Y,a.competencyService=new Q,a.saveSorting=function(){var e=Object(m.a)(u.a.mark(function e(t){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.framework,r=a.state.sorting,c=r.map(function(e){return e.id}),e.prev=3,a.activeRequests.startRequest(),e.next=7,a.competencyService.saveSorting(c);case 7:return e.next=9,a.props.loadData(n);case 9:a.props.enqueueSnackbar("Items updated",{variant:"success"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 15:return e.prev=15,a.setState({sorting:void 0}),a.closeModalPosition(),a.activeRequests.finishRequest(),e.finish(15);case 20:case"end":return e.stop()}},e,null,[[3,12,15,20]])}));return function(t){return e.apply(this,arguments)}}(),a.state={loadingError:!1,editable:!1,domain:[],comp:"",mapping:""},a.OpenModalPosition=a.OpenModalPosition.bind(Object(le.a)(a)),a.closeModalPosition=a.closeModalPosition.bind(Object(le.a)(a)),a.OpenModalMapping=a.OpenModalMapping.bind(Object(le.a)(a)),a.CloseModalMapping=a.CloseModalMapping.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"OpenModalPosition",value:function(e,t){this.setState({showModalPosition:!0}),this.setState({domain:t})}},{key:"closeModalPosition",value:function(){this.setState({showModalPosition:!1})}},{key:"OpenModalMapping",value:function(e,t){this.setState({showModalMapping:!0}),this.setState({comp:t}),this.setState({mapping:t.mapped_other_competency})}},{key:"CloseModalMapping",value:function(){this.setState({showModalMapping:!1})}},{key:"editCompetency",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.framework,e.prev=1,this.activeRequests.startRequest(),e.next=5,this.competencyService.patchCompetency(t,"title",a);case 5:return e.next=7,this.props.loadData(n);case 7:this.props.enqueueSnackbar("Competency updated",{variant:"success"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 13:return e.prev=13,this.activeRequests.finishRequest(),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[1,10,13,16]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"editMapping",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=this.props.framework,e.prev=2,this.activeRequests.startRequest(),e.next=6,this.competencyService.patchCompetency(a,"field_map_other_competency",n);case 6:return e.next=8,this.props.loadData(r);case 8:this.CloseModalMapping(),this.props.enqueueSnackbar("Record updated",{variant:"success"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 15:return e.prev=15,this.activeRequests.finishRequest(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[2,12,15,18]])}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"archiveCompetency",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.framework,c=n.loadData,e.prev=1,this.activeRequests.startRequest(),e.next=5,this.competencyService.toggleArchivingVersionedNode(r,t);case 5:c(r),this.props.enqueueSnackbar("Competency status updated",{variant:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 12:return e.prev=12,this.activeRequests.finishRequest(),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,9,12,15]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"dragStart",value:function(e){this.dragged=e.currentTarget,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.dragged)}},{key:"dragEnd",value:function(e){this.dragged.style.display="block",this.dragged.parentNode.removeChild(de);var t=this.state.domain.competencies,a=Number(this.dragged.dataset.position),n=Number(this.over.dataset.position);a<n&&n--,t.splice(n,0,t.splice(a,1)[0]),this.setState({sorting:t})}},{key:"dragOver",value:function(e){e.preventDefault(),this.dragged.style.display="none","placeholder"!==e.target.className&&(this.over=e.target,e.target.parentNode.insertBefore(de,e.target))}},{key:"getCompetencies",value:function(e){var t=this,a=this.props,n=a.frameworkData,c=a.domain,i=a.frameworkDef,o=a.framework,l=a.loadData,s=a.editableFrm;return e.map(function(e){return r.a.createElement("li",{id:e.id,key:e.id,style:{listStyleType:"none"}},r.a.createElement("div",{className:"row competency_title"},r.a.createElement("h3",{className:"1"===e.archived?"strikeout":""},r.a.createElement(I,{style:{display:"inline"},text:e.title,change:function(a){return t.editCompetency(e.id,a)},editable:"1"!==e.archived&&!1!==s}),!0===s?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"edit-indicator"},r.a.createElement("button",{className:"ch_link",onClick:function(){return t.archiveCompetency(e.id,e.archived)}},"1"===e.archived?r.a.createElement("span",{className:"fas fa-toggle-on icon-left-spacer"},r.a.createElement("span",null,"Archived")):r.a.createElement("span",{className:"fas fa-toggle-off icon-left-spacer"}," ",r.a.createElement("span",null," Archive")))),r.a.createElement("span",{className:"edit-indicator"},r.a.createElement("button",{className:"ch_link",onClick:function(e){return t.OpenModalPosition(e,c)}},r.a.createElement("span",{className:"fas fa-sort icon-left-spacer"},r.a.createElement("span",null,"Change order"))))):"")),r.a.createElement(fe.a,{trigger:r.a.createElement("div",{className:"open-close-title collapsible-arrows"},r.a.createElement("span",{className:"icon icon-common icon-angle-right icon-custom"})),triggerWhenOpen:r.a.createElement("div",{className:"open-close-title collapsible-arrows"},r.a.createElement("span",{className:"icon icon-common icon-angle-down icon-custom"}))},r.a.createElement("em",null,r.a.createElement("span",null,"This competency maps to:",V()(e.mapped_other_competency||""),r.a.createElement("button",{className:"ch_link",onClick:function(a){return t.OpenModalMapping(a,e)}},r.a.createElement("span",{className:"fas fa-edit icon-left-spacer"})))),r.a.createElement("ul",null,r.a.createElement(me,{framework:o,frameworkData:n,domain:c,competency:e,frameworkDef:i,loadData:l,editableFrm:s}))))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.frameworkData,n=t.domain,c=a.map(function(t){return t.domains.map(function(t){return t.nid===n.nid?r.a.createElement("ul",null,e.getCompetencies(t.competencies)):null})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{key:"domainlist"},c||"No competencies found. Add new competencies to start."),r.a.createElement(C.Modal,{open:this.state.showModalMapping,onClose:this.CloseModalMapping,center:!0,classNames:{overlay:"customOverlay",modal:"customModal"}},r.a.createElement("form",{onSubmit:function(t){return e.editMapping(t,e.state.comp.id,e.state.mapping)}},r.a.createElement("div",{className:"column medium-9"},r.a.createElement("h3",null,this.state.comp.title),r.a.createElement("h4",null,"This competency maps to:"),console.log(this.state.comp.id),r.a.createElement(re.a,{key:"mapsto_",content:this.state.mapping,events:{change:function(t){return e.setState({mapping:t.editor.getData()})}},activeclassName:"p10",config:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]}]}}),r.a.createElement("input",{type:"submit",className:"button",value:"Save"})))),r.a.createElement(C.Modal,{open:this.state.showModalPosition,onClose:this.closeModalPosition,center:!0,classNames:{overlay:"customOverlay",modal:"customModal"}},r.a.createElement("h3",null,"Change order"),r.a.createElement("p",null,"Please drag and drop items to change order"),this.state.domain.nid?r.a.createElement("h4",null,this.state.domain.title):"",r.a.createElement("ul",{onDragOver:this.dragOver.bind(this)},a.map(function(t){return t.domains.map(function(t){return t.nid===e.state.domain.nid?t.competencies.map(function(t,a){return r.a.createElement("li",{style:{listStyleType:"none"},"data-position":a,key:t.position,draggable:"true",onDragEnd:e.dragEnd.bind(e),onDragStart:e.dragStart.bind(e)},r.a.createElement("i",{className:"icon icon-common icon-move"})," ",t.title)}):null})})),r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm",onClick:this.saveSorting},"Save")))}}]),t}(r.a.Component),ve=Object(z.withSnackbar)(he),ge=document.createElement("li");ge.className="placeholder";var be=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).activeRequests=new Y,a.competencyService=new Q,a.saveSorting=function(){var e=Object(m.a)(u.a.mark(function e(t){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.framework,r=a.state.sorting,c=r.map(function(e){return e.nid}),e.prev=3,a.activeRequests.startRequest(),e.next=7,a.competencyService.saveSorting(c);case 7:return e.next=9,a.props.loadData(n);case 9:a.props.enqueueSnackbar("Items updated",{variant:"success"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 15:return e.prev=15,a.setState({sorting:void 0}),a.closeModalPosition(),a.activeRequests.finishRequest(),e.finish(15);case 20:case"end":return e.stop()}},e,null,[[3,12,15,20]])}));return function(t){return e.apply(this,arguments)}}(),a.state={loadingError:!1,editable:!1,showModal:!1,newDomains:"",showModalCompetency:!1,showModalMapping:!1,newCompetencies:[{competency:"",mapping:""}],parentID:"",parentTitle:"",sorting:[]},a.archiveDomain=a.archiveDomain.bind(Object(le.a)(a)),a.OpenModalCompetency=a.OpenModalCompetency.bind(Object(le.a)(a)),a.closeModalCompetency=a.closeModalCompetency.bind(Object(le.a)(a)),a.OpenModalMapping=a.OpenModalMapping.bind(Object(le.a)(a)),a.CloseModalMapping=a.CloseModalMapping.bind(Object(le.a)(a)),a.handleRemoveCompetencies=a.handleRemoveCompetencies.bind(Object(le.a)(a)),a.setCompetencies=a.setCompetencies.bind(Object(le.a)(a)),a.OpenModalPosition=a.OpenModalPosition.bind(Object(le.a)(a)),a.closeModalPosition=a.closeModalPosition.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"OpenModalMapping",value:function(e,t){this.setState({showModalMapping:!0})}},{key:"CloseModalMapping",value:function(){this.setState({showModalMapping:!1})}},{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1})}},{key:"OpenModalPosition",value:function(e){this.setState({showModalPosition:!0}),console.log("change positions")}},{key:"closeModalPosition",value:function(){this.setState({showModalPosition:!1})}},{key:"OpenModalCompetency",value:function(e){this.setState({parentID:e.target.dataset.domainid}),this.setState({parentTitle:e.target.dataset.domaintitle}),this.setState({showModalCompetency:!0})}},{key:"closeModalCompetency",value:function(){this.setState({showModalCompetency:!1})}},{key:"handleAddMoreCompetencies",value:function(e){this.setState({newCompetencies:[].concat(Object(K.a)(this.state.newCompetencies),[{competency:"",mapping:""}])}),e.preventDefault()}},{key:"handleRemoveCompetencies",value:function(e,t){this.state.newCompetencies.splice(t,1),this.setState({newCompetencies:this.state.newCompetencies}),e.preventDefault()}},{key:"setCompetencies",value:function(e,t,a){var n=this.state.newCompetencies;"competency"===a?n[t].competency=e.target.value:n[t].mapping=e.editor.getData(),this.setState({newCompetencies:n})}},{key:"saveCompetencies",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,c,i,o,l,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props,n=a.framework,r=a.frameworkData,c=this.state,i=c.newCompetencies,o=c.parentID,l=r[0].version_id,s=i,"competency","",t.preventDefault(),console.log(this.state.newCompetencies),e.prev=8,this.activeRequests.startRequest(),e.next=12,this.competencyService.createBulkData(o,l,s,"competency","");case 12:return e.next=14,this.props.loadData(n);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 19:return e.prev=19,this.activeRequests.finishRequest(),this.props.enqueueSnackbar("Competencies added successfully",{variant:"success"}),e.finish(19);case 23:this.setState({newCompetencies:[{competency:"",mapping:""}]}),this.closeModalCompetency();case 25:case"end":return e.stop()}},e,this,[[8,16,19,23]])}));return function(t){return e.apply(this,arguments)}}()},{key:"editDomain",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.framework,e.prev=1,this.activeRequests.startRequest(),e.next=5,this.competencyService.patchDomain(t,"title",a);case 5:return e.next=7,this.props.loadData(n);case 7:return e.next=9,this.props.enqueueSnackbar("Domain updated",{variant:"success"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 14:return e.prev=14,this.activeRequests.finishRequest(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"archiveDomain",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.framework,e.prev=1,e.next=4,this.competencyService.toggleArchivingVersionedNode(n,t);case 4:this.props.loadData(n),console.log("all good gg"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,this.props.enqueueSnackbar("Domain updated",{variant:"success"}),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,8,11,14]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"dragStart",value:function(e){this.dragged=e.currentTarget,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.dragged)}},{key:"dragEnd",value:function(e){this.dragged.style.display="block",this.dragged.parentNode.removeChild(ge),console.log(this.dragged.parentNode);var t=this.props.frameworkData[0].domains,a=Number(this.dragged.dataset.position),n=Number(this.over.dataset.position);a<n&&n--,t.splice(n,0,t.splice(a,1)[0]),this.setState({sorting:t}),console.log(t.map(function(e){return e.nid}))}},{key:"dragOver",value:function(e){e.preventDefault(),this.dragged.style.display="none","placeholder"!==e.target.className&&(this.over=e.target,e.target.parentNode.insertBefore(ge,e.target))}},{key:"render",value:function(){var e=this,t=this.props,a=t.framework,n=t.frameworkData,c=t.frameworkDef,i=t.loadData,o=t.editableFrm,l=n.map(function(t){return t.domains.map(function(t,l){return r.a.createElement("li",{key:"li_"+l,id:t.nid,className:"1"===t.archived?"strikeout":"",style:{listStyleType:"none"}},r.a.createElement("div",{key:"div1_"+t.nid,className:"row domain_title"},r.a.createElement("hr",null),r.a.createElement("div",{key:"div2_"+t.nid,className:"column medium-12"},r.a.createElement("h2",{key:"h4_"+t.nid},r.a.createElement(I,{style:{display:"inline"},text:t.title,change:function(a){return e.editDomain(t.nid,a)},editable:"1"!==t.archived&&!1!==o,key:"inline_edit_"+t.nid}),!1!==o?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{key:"span_"+t.nid,className:"edit-indicator"},r.a.createElement("button",{key:t.nid,className:"ch_link ",onClick:function(){return e.archiveDomain(t.nid,t.archived)}},"1"===t.archived?r.a.createElement("span",{className:"ch_link fas fa-toggle-on icon-left-spacer"},r.a.createElement("span",null,"Archived")):r.a.createElement("span",{className:"fas fa-toggle-off icon-left-spacer"}," ",r.a.createElement("span",null," Archive")))),r.a.createElement("span",{key:"span_"+t.nid,className:"edit-indicator"},r.a.createElement("button",{className:"ch_link addButton",onClick:e.OpenModalPosition}," ",r.a.createElement("i",{className:"icon icon-common icon-sort icon-left-spacer"})," ","Change order"," ")),"1"!==t.archived?r.a.createElement("span",{key:"span_"+t.nid,className:"edit-indicator"},r.a.createElement("button",{className:"ch_link addButton icon icon-common icon-plus-circle icon-left-spacer",href:"#","data-domainid":t.nid,"data-domaintitle":t.title,onClick:function(t){return e.OpenModalCompetency(t)}},"Add competencies")):""):""))),r.a.createElement("div",{key:"p_"+t.nid},r.a.createElement(ve,{framework:a,frameworkData:n,frameworkDef:c,loadData:i,domain:t,editableFrm:o})))})});return r.a.createElement("div",{key:"domains_list"},l[0].length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{key:"ul_"+l.count},l)," ",console.log(l)," "):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"callout"},"No data found. You may start by adding domains.")," ",console.log(l)),r.a.createElement(C.Modal,{open:this.state.showModalCompetency,onClose:this.closeModalCompetency,center:!0,classNames:{overlay:"customOverlay",modal:"customModal"}},r.a.createElement("h2",null,this.state.parentTitle),r.a.createElement("h3",null,"Add competencies(s) "),r.a.createElement("form",{className:"vf-form",onSubmit:function(t){return e.saveCompetencies(t)}},this.state.newCompetencies.map(function(t,a){return r.a.createElement("div",{key:"competency_"+a,className:"row callout"},r.a.createElement("div",{className:"column medium-9"},"Competency",r.a.createElement("input",{key:a,type:"text",onChange:function(t){return e.setCompetencies(t,a,"competency")},value:t.competency,required:!0,className:"vf-form__input"}),"This competency maps to:",r.a.createElement(re.a,{key:"mapsto_"+a,className:"vf-form__input",content:t.mapping,events:{change:function(t){return e.setCompetencies(t,a,"mapping")}},activeClass:"p10",config:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]}]}})),r.a.createElement("div",{className:"column medium-3",style:{paddingTop:"1%"}},a>0?r.a.createElement("button",{className:"vf-button vf-button--sm",onClick:function(t){return e.handleRemoveCompetencies(t,a)}},r.a.createElement("i",{className:"icon icon-common icon-close"})," "):""))}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-10"},r.a.createElement("button",{className:"vf-button vf-button--sm vf-button--secondary",onClick:function(t){return e.handleAddMoreCompetencies(t)}},r.a.createElement("i",{className:"icon icon-common icon-plus-circle"})," Add more"))),r.a.createElement("input",{type:"submit",className:"vf-button vf-button--sm vf-button--primary",value:"Save"}))),r.a.createElement(C.Modal,{open:this.state.showModalPosition,onClose:this.closeModalPosition,center:!0,classNames:{overlay:"customOverlay",modal:"customModal"}},r.a.createElement("h3",null,"Change order"),r.a.createElement("p",null,"Please drag and drop items to change order"),r.a.createElement("ul",{onDragOver:this.dragOver.bind(this)},n.map(function(t){return t.domains.map(function(a,n){return r.a.createElement("li",{style:{listStyleType:"none"},"data-position":n,key:t.position,draggable:"true",onDragEnd:e.dragEnd.bind(e),onDragStart:e.dragStart.bind(e)},r.a.createElement("i",{className:"icon icon-common icon-move"})," ",a.title)})})),r.a.createElement("button",{className:"vf-button vf-button--sm vf-button--primary",onClick:this.saveSorting},"Save")))}}]),t}(r.a.Component),Ee=Object(z.withSnackbar)(be),ye=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).activeRequests=new Y,a.competencyService=new Q,a.releaseNewVersion=function(){var e=Object(m.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.framework,e.prev=1,a.activeRequests.startRequest(),e.next=5,a.competencyService.publishFramework(r,t,n);case 5:a.loadData(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,a.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t,a){return e.apply(this,arguments)}}(),a.updateNotes=function(){var e=Object(m.a)(u.a.mark(function e(t){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state,r=n.framework,c=n.frameworkVersionId,e.prev=1,a.activeRequests.startRequest(),e.next=5,a.competencyService.updateReleaseNotes(t,c);case 5:a.loadData(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,a.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),a.createDraft=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.framework,e.prev=1,a.activeRequests.startRequest(),e.next=5,a.competencyService.createDraftFramework(t);case 5:a.loadData(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 11:return e.prev=11,a.activeRequests.finishRequest(),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])})),a.state={framework:"",frameworkName:"",frameworkData:[],frameworkVersion:"",frameworkVersionId:"",frameworkStatus:"",frameworkDef:[],versions:[],loadingError:!1,editable:!1,showModal:!1,showModalPosition:!1,newDomains:"",parent:""},a.handleOpenModal=a.handleOpenModal.bind(Object(le.a)(a)),a.handleCloseModal=a.handleCloseModal.bind(Object(le.a)(a)),a.saveDomains=a.saveDomains.bind(Object(le.a)(a)),a.loadData=a.loadData.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1})}},{key:"OpenModalPosition",value:function(e){this.setState({showModalPosition:!0})}},{key:"closeModalPosition",value:function(){this.setState({showModalPosition:!1})}},{key:"setDomains",value:function(e){this.setState({newDomains:e.target.value})}},{key:"saveDomains",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,c,i,o,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state,n=a.framework,r=a.frameworkData,c=a.newDomains,i=r[0].nid,o=r[0].version_id,l=c,"domain","",t.preventDefault(),e.prev=7,this.activeRequests.startRequest(),e.next=11,this.competencyService.createBulkData(i,o,l,"domain","");case 11:return e.next=13,this.loadData(n);case 13:this.props.enqueueSnackbar("Domains created",{variant:"success"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),this.props.enqueueSnackbar("Unable to perform the request",{variant:"error"});case 19:return e.prev=19,this.activeRequests.finishRequest(),e.finish(19);case 22:this.handleCloseModal();case 23:case"end":return e.stop()}},e,this,[[7,16,19,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,a=t.framework,n=t.domainId,e.next=3,this.loadData(a);case 3:n&&setTimeout(function(){var e=r.refs[n];e&&e.scrollIntoView()},100);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,c,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state,r=n.framework,c=n.frameworkData,i=n.loadingError,r!==a.framework&&(0!==c.length||i||this.loadData(r));case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.activeRequests.startRequest(),e.next=4,this.fetchVersions(t);case 4:return e.next=6,this.fetchFramework(t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({loadingError:!0}),alert("Error: ".concat(e.t0));case 12:return e.prev=12,this.activeRequests.finishRequest(),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[0,8,12,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchVersions",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.competencyService.getAllVersionedFrameworks();case 2:a=e.sent,(n=a.filter(function(e){return e.title.toLowerCase().replace(/\s+/g,"")===t})).length>0&&(this.setState({versions:n[0].versions.reverse()}),this.setState({frameworkDef:n[0].attribute_types}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,c,i,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.versions,n=a.filter(function(e){return"live"===e.status}),r=a.filter(function(e){return"draft"===e.status}),c=[],i=!1,!r.length){e.next=14;break}return e.next=8,this.competencyService.getVersionedDraftFramework(t);case 8:c=e.sent,this.setState({frameworkVersionId:r[0].id}),i=!0,console.log(c),e.next=18;break;case 14:if(!n.length){e.next=18;break}return e.next=17,this.competencyService.getVersionedFramework(t,n[0].number);case 17:c=e.sent;case 18:c.length&&(o=c[0].domains.map(function(e){return{description:e.title,uuid:e.uuid}}),this.setState({frameworkName:c[0].title,frameworkData:c,frameworkVersion:c[0].version,frameworkStatus:c[0].status,competencyTypes:o,editable:i}));case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.framework,n=t.frameworkName,c=t.frameworkData,i=t.frameworkVersion,o=t.frameworkStatus,l=t.frameworkDef,s=t.versions,u=t.loadingError,m=t.editable;return u?r.a.createElement(P,null):0===c.length?null:r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Manage framework data"),r.a.createElement("h4",null,n),r.a.createElement("p",null,r.a.createElement("span",{className:"tag"},i),r.a.createElement("span",{className:"tag secondary-background"},""===o?"draft":o)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-9"},r.a.createElement(ce,{editable:m,createDraft:this.createDraft,versions:s,release:this.releaseNewVersion,updateNotes:this.updateNotes})),r.a.createElement("div",{className:"vf-grid vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid vf-grid__col--span-3"}),r.a.createElement("div",{className:"vf-grid vf-grid__col--span-1"},!0===m?r.a.createElement("button",{href:"#",className:"vf-button vf-button--tertirary vf-button--sm",onClick:this.handleOpenModal}," ",r.a.createElement("i",{className:"icon icon-common icon-plus-circle"})," Add domains"," "):""))),r.a.createElement(Ee,{editableFrm:m,framework:a,frameworkData:c,frameworkDef:l,loadData:this.loadData}),r.a.createElement(J,{framework:a,versions:s}),r.a.createElement(C.Modal,{open:this.state.showModal,onClose:this.handleCloseModal,center:!0,classNames:{overlay:"customOverlay",modal:"customModal"}},r.a.createElement("h2",null,"Add domain(s) "),r.a.createElement("h3",null,"Please enter one domain per line"),r.a.createElement("form",{className:"vf-form"},r.a.createElement("textarea",{id:"domain_txt_area",rows:"5",onChange:function(t){return e.setDomains(t)},required:!0,className:"vf-form__input"}),r.a.createElement("button",{className:"vf-button vf-button--sm vf-button--primary",onClick:function(t){return e.saveDomains(t)}},"Save"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.match.params.framework;return a!==t.framework?{framework:a,frameworkData:[],loadingError:!1}:null}}]),t}(r.a.Component),_e=Object(z.withSnackbar)(ye),ke=a(99),we=function(){function e(t){if(Object(p.a)(this,e),this.http=new j,e.instance)return this.instance;e.instance=this}return Object(f.a)(e,[{key:"checkForTrainingResources",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r){var c,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=localStorage.getItem("userid"),c?"&timestamp="+Date.now():"",e.next=4,this.http.get("".concat("https://www.ebi.ac.uk","/api/competency_framework_resources?_format=json&source=competencyhub&page=").concat(t,"&title=").concat(a,"&type=").concat(n,"&framework=").concat(r,"&checkForTrainingResources=",!0,"&timestamp=").concat(Date.now()));case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"getCourses",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("".concat("https://www.ebi.ac.uk","/api/resources?_format=json&source=competencyhub&page=").concat(t,"&title=").concat(a,"&type=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getByFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r){var c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("".concat("https://www.ebi.ac.uk","/api/competency_framework_resources?_format=json&source=competencyhub&page=").concat(t,"&title=").concat(a,"&type=").concat(n,"&framework=").concat(r,"&timestamp=").concat(Date.now()));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"getByCompetency",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("".concat("https://www.ebi.ac.uk","/api/competency-resources?field_competency_target_id=").concat(t,"?source=competencyhub"));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ne(e){return e.split("/")[4].split("?")[0]}var je=a(48),xe=a.n(je),Oe=a(47),Se=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).activeRequests=new Y,a.competencyService=new Q,a.coursesService=new we,a.state={framework:a.props.match.params.framework,version:a.props.location.pathname.split("/"),frameworkData:[],competencyId:a.props.match.params.cid,attributeDefs:[],resources:[],competency:[]},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.activeRequests.startRequest(),e.next=4,Promise.all([this.getFramework(),this.getAttributes(),this.getResources()]).then(function(){if("true"===new URLSearchParams(window.location.search).get("scroll")){var e=document.getElementById("training-resources-block");e&&(e.scrollIntoView(),e.scrollIntoView(!1),e.scrollIntoView({block:"start"}),e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}))}});case 4:return e.prev=4,this.activeRequests.finishRequest(),e.finish(4);case 7:case"end":return e.stop()}},e,this,[[0,,4,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.framework,a=this.state.version,e.next=4,this.competencyService.getVersionedFramework(t,a[3]);case 4:n=e.sent,this.setState({frameworkData:n});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAttributes",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.competencyService.getAllFrameworks();case 2:t=e.sent,a=this.state.framework,(n=t.filter(function(e){return e.name.toLowerCase().replace(/ /g,"")===a.replace(/ /g,"")})).length&&(r=n[0].attribute_types.map(function(e){return e.title}),this.setState({attributeDefs:r}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getResources",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.coursesService.getByCompetency(this.state.competencyId);case 3:t=e.sent,this.setState({resources:t}),this.setState({resources:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.enqueueSnackbar("Unable to retrieve training resources",{variant:"error"});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"resourceBlock",value:function(){return this.state.resources.map(function(e){return r.a.createElement("li",{key:e.nid},r.a.createElement(o.b,{to:{pathname:"/training-resources/".concat((t=e.title,t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"))),state:{training_resource_id:e.nid}}},e.title));var t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.competencyId,n=t.frameworkData,c=t.attributeDefs,i=t.resources,o=[];n.forEach(function(e){return e.domains.forEach(function(t){return t.competencies.forEach(function(n){n.id===a&&o.push(Object(ke.a)({},n,{framework:e.title,domain:t.title}))})})});var l=o.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null,r.a.createElement("h1",null,t.title),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"Competency attributes"),r.a.createElement("ul",null,c.map(function(e){return r.a.createElement("div",{key:e},r.a.createElement("div",{className:"margin-top-medium"}," ",r.a.createElement("h3",null,e)),t.attributes.map(function(t){return t.type===e?r.a.createElement("li",{key:t.id},t.title," "):null}))})),r.a.createElement("div",null,r.a.createElement("h2",null,"Competency derived from:"),r.a.createElement("p",null," ",t.mapped_other_competency?V()(t.mapped_other_competency):"No data available"," "),0===i.length?null:r.a.createElement("div",{id:"training-resources-block"},r.a.createElement("h2",null,"Training resources associated with this competency"),r.a.createElement("ul",null,e.resourceBlock()))))))});return r.a.createElement("div",null,o.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,null,r.a.createElement("title",null,o[0].title),r.a.createElement("meta",{name:"description",content:o[0].title}),r.a.createElement("meta",{property:"og:title",content:o[0].title}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://competency.ebi.ac.uk".concat(this.props.history.location.pathname)}),r.a.createElement("meta",{property:"og:image",content:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/themes/custom/ebi_academy/images/mastheads/CH_Jigsaw.jpg"}),r.a.createElement("meta",{property:"og:description",content:"Details of a competency e.g. attributes and associated training resources"}),r.a.createElement("meta",{property:"keywords",content:"competency, competency-based training, ".concat(o[0].domain,", ").concat("ISCB"===o[0].framework?"computational biology competencies":"")})),r.a.createElement(Oe.a,null,r.a.createElement("link",{rel:"canonical",href:this.props.location.pathname}))):"",l)}}]),t}(r.a.Component),Ce=Object(z.withSnackbar)(Se),De=a(27),Ae=(a(208),a(1104));a(377);function Te(e){e.index;var t=e.framework,a=e.competency,n=(e.disable,e.version),c=e.attributeTypes,i=e.trainingResourcesExist,l=Object(Ae.a)(a.attributes,"type"),s=c.map(function(e){var t=l[e]?l[e].map(function(e){return r.a.createElement("li",{className:"vf-list__item",key:e.id},e.title)}):"";return t?r.a.createElement("div",{key:e,className:"attribute_type"},r.a.createElement("em",null,e),r.a.createElement("ul",{className:"vf-list--unordered",style:{paddingLeft:"24px"}},t)):""});return"1"===a.archived?null:r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("details",{className:"vf-details",close:!0},r.a.createElement("summary",{className:"vf-details--summary"},a.title),s,r.a.createElement("div",null,r.a.createElement(o.b,{to:"/framework/".concat(t,"/").concat(n,"/competency/details/").concat(a.id,"?scroll=true")},r.a.createElement("span",null,r.a.createElement("i",{className:"icon icon-spacer icon-common icon-info"}),i?"View training resources associated with this competency":"View more information about this competency"))))))}Te.defaultProps={parentIndex:0,index:0,disable:!0,trainingResourcesExist:!1};var Ie=Te;function Re(e){e.index;var t=e.framework,a=e.domain,n=e.disable,c=e.version,i=e.attributeTypes,o=e.trainingResourcesExist,l=a.competencies.map(function(e,a){return r.a.createElement(Ie,{key:e.id,index:a,framework:t,competency:e,disable:n,version:c,attributeTypes:i,trainingResourcesExist:o})});return r.a.createElement("div",{style:{border:"none"}},r.a.createElement("h2",{style:{marginBottom:0}}," ",a.title),l)}Re.defaultProps={domain:{title:"",competencies:[]},disable:!0,trainingResourcesExist:!1};var qe=Re,Me=a(135),Pe=a.n(Me),Fe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).coursesService=new we,a.activeRequests=new Y,a.onFilter=function(e){var t,n=a.state.courses;try{t=new RegExp(e,"i")}catch(c){t=/./}var r=n.filter(function(e){return t.test(e.title)});a.setState({filteredCourses:r,filter:e})},a.state={courses:[],filteredCourses:[],filter:"",filterType:"",loadingError:!1,activePage:1,totalItemsCount:0,noResultsFound:!1,loading:!1},a.state.framework=e.framework,a.state.frameworkId=e.frameworkId,a.state.version=e.version,a.state.totalItemsCount=0,a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"handlePageChange",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({courses:null});case 2:return e.next=4,this.setState({activePage:t});case 4:return e.next=6,this.fetchData();case 6:setTimeout(function(){window.scrollTo(0,0)},700);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,this.activeRequests.startRequest(),e.next=5,this.coursesService.getByFramework(this.state.activePage,this.state.filter,this.state.filterType,this.props.framework);case 5:t=e.sent,a=this.filterCourses(t),this.showAllTrainingResources=this.showAllTrainingResources.bind(this),this.setState({courses:a,filteredCourses:a}),a.length>0?this.setState({totalItemsCount:a[0].hitcount}):this.setState({noResultsFound:!0}),this.setState({totalItemsCount:a.length>0?a[0].hitcount:0}),this.setState({loading:!1}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),this.setState({loadingError:!0});case 17:return e.prev=17,this.activeRequests.finishRequest(),e.finish(17);case 20:case"end":return e.stop()}},e,this,[[1,14,17,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"showAllTrainingResources",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({filter:""});case 2:return e.next=4,this.setState({activePage:1});case 4:return e.next=6,this.setState({filterType:""});case 6:return e.next=8,this.fetchData().then(function(){t.setState({noResultsFound:!1})});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"searchSubmit",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.setState({activePage:0});case 3:return e.next=5,this.fetchData();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"filterCourses",value:function(e){var t=this.state.framework,a=(this.state.version,[]);return e.forEach(function(e){if("archived"!==e.archived){var n=e.competency_profile.filter(function(e){return(e.framework_label||"").toLowerCase()===t});if(0!==n.length){var r=Object(ke.a)({},e,{competencies:X(n.map(function(e){return e}))});a.push(r)}}}),a}},{key:"filter",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({filter:t.target.value});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"filterTypeHandle",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({filterType:t.target.value});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.filteredCourses,n=t.framework,c=(t.filter,t.loadingError),i=t.version;if(c)return r.a.createElement(P,null);var l=a.map(function(t,a){return r.a.createElement("tr",{key:t.slug},r.a.createElement("td",null,a+1+(e.state.activePage?15*(e.state.activePage-1):0)," "),r.a.createElement("td",null,r.a.createElement(o.b,{to:{pathname:"/training-resources/".concat(t.slug),state:{training_resource_id:t.id}}},t.title)),r.a.createElement("td",null,t.type),r.a.createElement("td",null,r.a.createElement("ul",null,t.competencies.filter(function(e,t,a){return a.findIndex(function(t){return t.competency_id===e.competency_id})===t}).map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(o.b,{to:"/framework/".concat(n,"/").concat(i,"/competency/details/").concat(e.competency_id)},e.competency_label))})," ")))});return r.a.createElement(r.a.Fragment,null,this.state.noResultsFound?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"vf-text-body vf-text-body--2"},"No results found"),r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm ",onClick:this.showAllTrainingResources},"Show all training resources")):r.a.createElement("div",null,r.a.createElement("form",{className:"vf-form | vf-search",onSubmit:function(t){return e.searchSubmit(t)}},r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-form__item | vf-search__item vf-grid__col--span-2"},r.a.createElement("label",{class:"vf-form__label vf-u-sr-only | vf-search__label",for:"search_box"},"Search training resources"),r.a.createElement("input",{type:"search",onChange:this.filter.bind(this),placeholder:"Type to search",className:"vf-form__input | vf-search__item",id:"search_box"})),r.a.createElement("div",{className:"vf-form__item vf-grid__col--span-1"},r.a.createElement("select",{ref:"type",onChange:this.filterTypeHandle.bind(this),className:"vf-form__select"},r.a.createElement("option",{value:"All"},"All types"),r.a.createElement("option",{value:"Online"},"Online"),r.a.createElement("option",{value:"Face-to-Face"},"Face-to-Face"),r.a.createElement("option",{value:"Webinar"},"Webinar"),r.a.createElement("option",{value:"Hackathon"},"Hackathon"))),r.a.createElement("div",{className:"vf-form__item vf-grid__col--span-1"},r.a.createElement("input",{type:"submit",className:"vf-search__button | vf-button vf-button--primary vf-button--sm",value:"Search"})))),this.state.loading?r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__top--200"}),r.a.createElement("span",null,"Fetching data..."),r.a.createElement("img",{alt:"progress",style:{width:"7%"},src:"/progressbar.gif"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"S. No."),r.a.createElement("th",null,"Training resource(s)"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Competencies"))),r.a.createElement("tbody",null,l)),r.a.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},r.a.createElement(Pe.a,{activePage:this.state.activePage,itemsCountPerPage:15,totalItemsCount:this.state.totalItemsCount,pageRangeDisplayed:10,onChange:function(t){return e.handlePageChange(t)},innerClass:"vf-pagination__list",itemClass:"vf-pagination__item",itemClassPrev:"vf-pagination__item--previous-page",itemClassNext:"vf-pagination__item--next-page",linkClass:"vf-pagination__link vf-pagination__label",activeClass:"vf-pagination__item--is-active",prevPageText:"Previous",nextPageText:"Next"})))))}}]),t}(n.Component),Le=(a(380),a(20)),Be=a.n(Le),Ue=a(288),Ve=(a(381),function(e){Object(g.g)();var t=e.framework,a=e.version,c=Object(n.useState)(),i=Object(F.a)(c,2),l=i[0],s=i[1],p=Object(n.useState)(),f=Object(F.a)(p,2),d=f[0],h=f[1],v=Object(n.useState)([]),b=Object(F.a)(v,2),E=b[0],y=b[1],_=x.currently_logged_in_user.is_logged_in?"&timestamp="+Date.now():"",w=x.currently_logged_in_user.username;Object(n.useEffect)(function(){!function(){var e=Object(m.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=JSON.parse(localStorage.getItem("guestProfile")),s(n||""),e.next=5,fetch("".concat(k,"/api/").concat(t,"/").concat(a,"/profiles/?_format=json&source=competencyhub&timestamp=").concat(_)).then(function(e){return e.json()}).then(function(e){h(e)});case 5:if(!w){e.next=8;break}return e.next=8,fetch("".concat(k,"/api/authorisation/").concat(w,"?_format=json"),{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(e){y(e)});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}()()},[a,t,w]);return r.a.createElement("div",null,r.a.createElement("div",{className:"introduction"},r.a.createElement("div",{className:"vf-grid vf-grid__col-2"},r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"icon icon-common icon-search-document"})," Discover and explore"," "),r.a.createElement("p",null,"Explore career profiles within this competency framework")),r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"icon icon-common icon-user-plus"})," Create your own profile"),r.a.createElement("p",null,"Create your own profile and assess yourself against the competencies")))),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"vf-grid vf-grid__col-2"},r.a.createElement("div",null,r.a.createElement("h3",null,"Career profiles")),r.a.createElement("div",null,r.a.createElement("span",{style:{float:"right"}},x.currently_logged_in_user.roles.length>0&&function(){var e=[];if(E.length>0)return E.forEach(function(t){e.push(t.toLowerCase().replace(/ /g,""))}),!!e.includes(t)}()?r.a.createElement("span",null,r.a.createElement(o.b,{className:"vf-button vf-button--primary vf-button--sm",to:"/framework/".concat(t,"/").concat(a,"/profile/create/")}," ","Create reference profile"," ",r.a.createElement("i",{className:"icon icon-common icon-user-plus"}))):r.a.createElement("span",null)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"vf-grid vf-grid__col-3"},l?r.a.createElement("div",{className:"vf-profile vf-profile--very-easy vf-profile--small vf-profile--block"},r.a.createElement("img",{alt:"",src:l.image[0]?l.image[0].url:Be.a,className:"vf-profile__image",width:"auto",height:"auto",loading:"lazy"}),r.a.createElement("div",null,r.a.createElement("h4",{className:"vf-profile__title"},r.a.createElement(o.b,{className:"vf-profile__link",to:"/framework/".concat(l.frameworkName,"/").concat(l.versionNumber,"/profile/view/guest")},l.job_title)),r.a.createElement("div",{style:{color:"#999",bottom:"-15px",position:"relative"}},r.a.createElement("span",null,r.a.createElement("hr",{className:"vf-divider | vf-u-fullbleed"})),r.a.createElement(o.b,{onClick:function(e){return function(e){e.preventDefault(),Object(Ue.confirmAlert)({customUI:function(e){var t=e.onClose;return r.a.createElement("div",{className:"react-confirm-alert-body"},r.a.createElement("h2",null,"Delete my profile"),r.a.createElement("p",null,"Are you sure you want to delete your profile? This action cannot be undone!!"),r.a.createElement("div",{className:"react-confirm-alert-button-group"},r.a.createElement("button",{onClick:t},"No"),r.a.createElement("button",{onClick:function(){localStorage.removeItem("guestProfile"),alert("Profile deleted"),window.location.reload(!1),t()}},"Yes, Delete it!")))}})}(e)},to:"#"},"Delete your profile"," ",r.a.createElement("i",{className:"icon icon-common icon-trash-alt"}))))):r.a.createElement("article",{className:"vf-profile vf-profile--very-easy vf-profile--small vf-profile--inline"},r.a.createElement("img",{alt:"",src:Be.a,className:"vf-profile__image",width:"auto",height:"auto",loading:"lazy"}),r.a.createElement(o.b,{className:"vf-button vf-button--primary vf-button--sm",to:"/framework/".concat(t,"/").concat(a,"/profile/create/guest")},"Add your profile"," ")),d?d.map(function(e,n){return x.currently_logged_in_user.is_logged_in?r.a.createElement("div",null,r.a.createElement("div",{className:"profile_badge"},r.a.createElement("p",{className:e.publishing_status},e.image[0]?r.a.createElement("img",{alt:"",src:e.image[0].url,className:"profile_img"}):r.a.createElement("img",{alt:"",src:Be.a,className:"profile_img"})),r.a.createElement("div",{className:"row action-buttons-row my-profile-card"},r.a.createElement("div",null,r.a.createElement("h4",null,e.job_title?e.job_title:"Job title"),r.a.createElement(o.b,{to:"/framework/".concat(t,"/").concat(a,"/profile/view/").concat(e.id).concat(e.url_alias)},"View profile"," ",r.a.createElement("i",{className:"icon icon-common icon-angle-right"})),r.a.createElement("p",null,"\xa0"))))):"Live"===e.publishing_status?r.a.createElement("div",{key:n},r.a.createElement("article",{className:"vf-profile vf-profile--very-easy vf-profile--small vf-profile--inline"},e.image[0]?r.a.createElement("img",{alt:"",src:e.image[0].url,className:"vf-profile__image",width:"auto",height:"auto",loading:"lazy"}):r.a.createElement("img",{alt:"",src:Be.a,className:"vf-profile__image"}),r.a.createElement("h4",{className:"vf-profile__title"},e.job_title?r.a.createElement(o.b,{className:"vf-profile__link",to:"/framework/".concat(t,"/").concat(a,"/profile/view/").concat(e.id).concat(e.url_alias)},e.job_title):"Job title"))):null}):"")))}),He=function(e){var t=e.framework,a=Object(n.useState)(),c=Object(F.a)(a,2),i=c[0],o=c[1];Object(n.useEffect)(function(){!function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/api/").concat(t,"/pathways/?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){o(e)});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[t]);var l=function(){return!!localStorage.getItem("roles")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("p",null,"Learning pathways are collections of training courses and materials to help you learn about a specific topic. Note that some of these resources are external to the EMBL-EBI Competency Hub.")),!0===l()?r.a.createElement("a",{style:{float:"right"},href:"".concat(k,"/node/add/learning_pathway")},r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm"},"Add new learning pathway")):"",r.a.createElement("div",{className:"vf-grid vf-grid__col-3"},i?i.map(function(e,t){return l()?r.a.createElement("div",null,r.a.createElement("article",{className:"vf-profile vf-profile--very-easy vf-profile--large vf-profile--block ".concat(e.publishing_status?"Live":"Draft")},e.image[0]?r.a.createElement("div",null,r.a.createElement("img",{alt:"profile",src:e.image[0].url,className:"vf-profile__image",width:"auto",height:"auto"})):r.a.createElement("img",{alt:"pathway",src:Be.a,className:"vf-profile__image",width:"auto",height:"auto"}),r.a.createElement("h3",{className:"vf-profile__title"},e.title?r.a.createElement("a",{className:"vf-profile__link",href:"".concat(e.url_alias)},e.title):"Title"))):!0===e.publishing_status?r.a.createElement("div",null,r.a.createElement("article",{className:"vf-profile vf-profile--very-easy vf-profile--large vf-profile--block"},e.image[0]?r.a.createElement("div",{className:e.publishing_status},r.a.createElement("img",{alt:"profile",src:e.image[0].url,className:"vf-profile__image",width:"auto",height:"auto"})):r.a.createElement("img",{alt:"pathway",src:Be.a,className:"vf-profile__image",width:"auto",height:"auto"}),r.a.createElement("h3",{className:"vf-profile__title"},e.title?r.a.createElement("a",{className:"vf-profile__link",href:"".concat(e.url_alias)},e.title):"Title"))):null}):""))},Je=a(289),ze=function(){var e=new j,t=Object(n.useState)(),a=Object(F.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(),l=Object(F.a)(o,2),s=l[0],p=l[1],f=Object(n.useState)(),d=Object(F.a)(f,2),h=d[0],v=d[1],b=Object(n.useState)(""),E=Object(F.a)(b,2),y=E[0],_=E[1],w=Object(g.g)().location,N=w.pathname.split("/")[2],x=w.pathname.split("/")[3];Object(n.useEffect)(function(){!function(){var t=Object(m.a)(u.a.mark(function t(){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("".concat(k,"/api/export/").concat(N,"/").concat(x,"?_format=json&filters=").concat(y,"&source=competencyhub")).then(function(e){return e.data});case 2:a=t.sent,i(a.data),p(a.headers),v(a.filters);case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[y,N,x,e]);var O=function(e){var t=e.target,a=y.split(",");if(t.checked){var n=a.indexOf(e.target.name);a.splice(n,1)}else a.push.apply(a,Object(K.a)(y).concat([e.target.name]));_(a.join())};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("p",null,"Download the information of this framework as a csv file. Choose which identifiers and reference profiles (if available) to include in the table. This option enables you to create derivative works of the competency framework."),r.a.createElement("div",{className:"vf-u-margin__top--800"}),r.a.createElement("h3",null,"Filter columns")),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__top--400"}),r.a.createElement("h4",null,"Identifiers"),r.a.createElement("form",{action:"#",className:"vf-form | vf-search"},h?h.identifiers.map(function(e){return r.a.createElement("div",{key:e,className:"vf-form__item vf-form__item--checkbox"},r.a.createElement("input",{type:"checkbox",id:e,name:e,className:"vf-form__checkbox",defaultChecked:!y.includes(e),onClick:function(e){return O(e)}}),r.a.createElement("label",{htmlFor:e,className:"vf-form__label"},e))}):"")),r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__top--400"}),r.a.createElement("h4",null,"Reference profiles"),r.a.createElement("form",{action:"#",className:"vf-form | vf-search"},r.a.createElement("div",{className:"vf-form__item",style:{columnCount:"2"}},h?h.profiles.map(function(e){return r.a.createElement("div",{className:"vf-form__item vf-form__item--checkbox"},r.a.createElement("input",{type:"checkbox",id:e,name:e,className:"vf-form__checkbox",checked:!y.includes(e),onClick:function(e){return O(e)}}),r.a.createElement("label",{for:e,className:"vf-form__label"},e))}):""))),r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__top--1600"}),r.a.createElement(Je.CSVLink,{className:"vf-button vf-button--primary vf-button--sm",filename:N+"_"+x+".csv",data:c||""},"Export"))),r.a.createElement("div",{className:"vf-u-margin__top--400"}),r.a.createElement("div",null,r.a.createElement("svg",{className:"vf-icon-sprite vf-icon-sprite--tables",display:"none"},r.a.createElement("defs",null,r.a.createElement("g",{id:"vf-table-sortable--up"},r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M17.485,5.062,12.707.284a1.031,1.031,0,0,0-1.415,0L6.515,5.062a1,1,0,0,0,.707,1.707H10.25a.25.25,0,0,1,.25.25V22.492a1.5,1.5,0,1,0,3,0V7.019a.249.249,0,0,1,.25-.25h3.028a1,1,0,0,0,.707-1.707Z"})),r.a.createElement("g",{id:"vf-table-sortable--down"},r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M17.7,17.838a1,1,0,0,0-.924-.617H13.75a.249.249,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0V16.971a.25.25,0,0,1-.25.25H7.222a1,1,0,0,0-.707,1.707l4.777,4.778a1,1,0,0,0,1.415,0l4.778-4.778A1,1,0,0,0,17.7,17.838Z"})),r.a.createElement("g",{id:"vf-table-sortable"},r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M9,19a1,1,0,0,0-.707,1.707l3,3a1,1,0,0,0,1.414,0l3-3A1,1,0,0,0,15,19H13.5a.25.25,0,0,1-.25-.25V5.249A.25.25,0,0,1,13.5,5H15a1,1,0,0,0,.707-1.707l-3-3a1,1,0,0,0-1.414,0l-3,3A1,1,0,0,0,9,5h1.5a.25.25,0,0,1,.25.25v13.5a.25.25,0,0,1-.25.25Z"})))),r.a.createElement("table",{className:"vf-table vf-table--striped"},r.a.createElement("thead",{className:"vf-table__header"},r.a.createElement("tr",{className:"vf-table__row"},s?s.map(function(e,t){return r.a.createElement("th",{key:t,className:"vf-table__heading"},e)}):r.a.createElement("th",null))),r.a.createElement("tbody",{className:"vf-table__body"},c?c.map(function(e,t){return r.a.createElement("tr",{key:t,className:"vf-table__row"},s?s.map(function(t){return r.a.createElement("td",{key:t,className:"vf-table__cell"},e[t])}):r.a.createElement("td",null))}):r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{alt:"progress",src:"/progressbar.gif"}),r.a.createElement("h4",null,"Loading data...")))))))},Ge=a(34),We=a(290),Qe=a.n(We),Ye=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("figure",{className:"vf-figure vf-figure--align vf-figure--align-inline-start"},r.a.createElement("img",{alt:"",style:{width:"125px",marginTop:"5px"},className:"vf-figure__image",src:Qe.a,width:"auto",height:"auto",loading:"lazy"})),r.a.createElement("p",null,"This competency framework is a free cultural work licensed under ",r.a.createElement("br",null)," ","a"," ",r.a.createElement("a",{className:"vf-link",href:"https://creativecommons.org/licenses/by/4.0/"},"Creative Commons Attribution 4.0 International (CC BY 4.0)"," "),"license."))},Ke=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).competencyService=new Q,a.activeRequests=new Y,a.coursesService=new we,a.state={framework:"",frameworkVersion:"",frameworkName:"",frameworkStatus:"",frameworkDescription:"",versions:[],domains:[],filter:"",filteredDomains:[],loadingError:!1,trainingResourcesExist:!1,profileCount:0,pathwayCount:0,attributeTypes:[],allResourcesFetched:!1,visibleTabs:[],selectedTabIndex:0,pathnames:a.props.history.location.pathname,pathnames_count:0},a.onFilter=function(e){var t,n=a.state.domains;try{t=new RegExp(e,"i")}catch(c){t=/./}var r=n.map(function(e){var a=e.competencies.filter(function(e){return t.test(e.title)});return 0===a.length?null:Object(ke.a)({},e,{competencies:a})});a.setState({filter:e,filteredDomains:r})},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"setCurrentTab",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],x.currently_logged_in_user.is_logged_in?(t.push("career-profiles"),t.push("learning-pathways")):(this.state.profileCount>0&&t.push("career-profiles"),this.state.pathwayCount>0&&t.push("learning-pathways")),t.push("competencies"),this.state.trainingResourcesExist&&t.push("training-resources"),t.push("export"),e.next=7,this.setState({visibleTabs:t});case 7:for(a=window.location.href,n=0,r=0;r<this.state.visibleTabs.length;r++)a.includes(this.state.visibleTabs[r])&&(console.log(this.state.visibleTabs[r]),n=r);return e.next=12,this.setState({selectedTabIndex:n});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,a=t.framework,n=t.version,this.setState({pathnames_count:this.state.pathnames.split("/").length}),window.vfTabs(),e.prev=3,this.activeRequests.startRequest(),e.t0=Promise,e.next=8,this.fetchFramework(a,n);case 8:return e.t1=e.sent,e.next=11,this.fetchVersions(a);case 11:return e.t2=e.sent,e.next=14,this.fetchProfiles();case 14:return e.t3=e.sent,e.next=17,this.fetchPathways();case 17:return e.t4=e.sent,e.next=20,this.coursesService.checkForTrainingResources(1,"","All",a).then(function(e){e>0&&r.setState({trainingResourcesExist:!0})});case 20:return e.t5=e.sent,e.t6=[e.t1,e.t2,e.t3,e.t4,e.t5],e.t7=function(){r.setState({allResourcesFetched:!0}),r.setCurrentTab()},e.next=25,e.t0.all.call(e.t0,e.t6).then(e.t7);case 25:e.next=30;break;case 27:e.prev=27,e.t8=e.catch(3),this.setState({loadingError:!0});case 30:return e.prev=30,this.activeRequests.finishRequest(),e.finish(30);case 33:case"end":return e.stop()}},e,this,[[3,27,30,33]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,c,i,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.framework,c=n.frameworkVersion,i=n.domains,o=n.loadingError,r===a.framework&&c===a.frameworkVersion){e.next=17;break}if(0!==i.length||o){e.next=15;break}return e.prev=3,this.activeRequests.startRequest(),e.next=7,this.fetchFramework(r,c);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({loadingError:!0});case 12:return e.prev=12,this.activeRequests.finishRequest(),e.finish(12);case 15:this.fetchProfiles(),this.fetchPathways();case 17:case"end":return e.stop()}},e,this,[[3,9,12,15]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"fetchProfiles",value:function(){var e=this,t=this.state,a=t.framework,n=t.frameworkVersion;fetch("".concat(k,"/api/").concat(a,"/").concat(n,"/profiles?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(t){e.setState({profileCount:t.filter(function(e){return"Live"===e.publishing_status}).length})})}},{key:"fetchPathways",value:function(){var e=this,t=this.state.framework;fetch("".concat(k,"/api/").concat(t,"/pathways?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(t){e.setState({pathwayCount:t.filter(function(e){return!0===e.publishing_status}).length})})}},{key:"fetchFramework",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,c,i,o,l,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.scroll(0,0),e.next=3,this.competencyService.getVersionedFramework(t,a);case 3:return n=e.sent,r=X(n.map(function(e){return e.domains})),c=ee(n[0].description),this.setState({frameworkName:n[0].title,frameworkDescription:c,domains:r,filteredDomains:r,frameWorkId:n[0].nid}),e.next=9,this.competencyService.getAllVersionedFrameworks();case 9:i=e.sent,(o=i.filter(function(e){return e.title.toLowerCase().replace(/ /g,"")===t})).length>0&&(l=o[0].versions.filter(function(e){return e.number===a}),this.setState({frameworkStatus:l[0].status}),s=o[0].attribute_types.map(function(e){return e.title}),this.setState({attributeTypes:s}));case 12:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"fetchVersions",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.competencyService.getAllVersionedFrameworks();case 2:a=e.sent,(n=a.filter(function(e){return e.title.toLowerCase().replace(/ /g,"")===t})).length>0&&this.setState({versions:n[0].versions.reverse()});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.framework,n=t.frameworkVersion,c=t.frameworkName,i=t.frameWorkId,l=t.frameworkStatus,s=t.frameworkDescription,u=t.filteredDomains,m=t.versions,p=t.filter,f=t.loadingError,d=t.attributeTypes;if(f)return r.a.createElement(P,null);var h=u.map(function(t){return null===t?null:r.a.createElement(qe,{key:t.nid,framework:a,domain:t,disable:!0,version:n,attributeTypes:d,trainingResourcesExist:e.state.trainingResourcesExist})}),v=function(e){e.currentTarget.children[0].click()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(je.MetaTags,null,r.a.createElement("title",null,Ge.filter(function(t){return t.title===e.state.framework})[0].desc),r.a.createElement("meta",{property:"og:title",content:Ge.filter(function(t){return t.title===e.state.framework})[0].desc}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://competency.ebi.ac.uk".concat(this.props.history.location.pathname)}),r.a.createElement("meta",{property:"og:image",content:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/themes/custom/ebi_academy/images/mastheads/CH_Jigsaw.jpg"}),r.a.createElement("meta",{property:"og:description",content:s}),r.a.createElement("meta",{name:"description",content:s}),r.a.createElement("meta",{property:"keywords",content:"training, competencies, career profiles, ".concat(Ge.filter(function(t){return t.title===e.state.framework})[0].desc).concat("ISCB"===c?", computational biology competencies":"")})),r.a.createElement(Oe.a,null,r.a.createElement("link",{rel:"canonical",href:this.props.location.pathname})),r.a.createElement("div",{className:"vf-u-margin__top--400"}),r.a.createElement("h2",null," ",Ge.filter(function(t){return t.title===e.state.framework})[0].desc," "),r.a.createElement("h3",null,c),r.a.createElement("p",null,r.a.createElement("span",{className:"vf-badge"},n),r.a.createElement("span",{className:"vf-badge vf-badge--primary"}," ",l)),r.a.createElement("p",null,s),this.state.allResourcesFetched?r.a.createElement(De.d,{className:"vf-tabs ch_tabs__list",selectedIndex:this.state.selectedTabIndex,onSelect:function(t){return e.setState({selectedTabIndex:t})}},r.a.createElement(De.b,{className:"vf-tabs__list"},localStorage.getItem("roles")?r.a.createElement(De.a,{onClick:function(e){return v(e)}},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(this.props.match.params.version,"/career-profiles"),className:"customTabLinks"},"Career profiles")):this.state.profileCount>0?r.a.createElement(De.a,{onClick:function(e){return v(e)}},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(this.props.match.params.version,"/career-profiles"),className:"customTabLinks"},"Career profiles")):"",localStorage.getItem("roles")?r.a.createElement(De.a,{onClick:function(e){return v(e)}},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(this.props.match.params.version,"/learning-pathways"),className:"customTabLinks"},"Learning pathways")):this.state.pathwayCount>0?r.a.createElement(De.a,{onClick:function(e){return v(e)}},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(this.props.match.params.version,"/learning-pathways"),className:"customTabLinks"},"Learning pathways")):"",r.a.createElement(De.a,{onClick:function(e){return v(e)}},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(this.props.match.params.version,"/competencies"),className:"customTabLinks"},"Competencies")),this.state.trainingResourcesExist?r.a.createElement(De.a,{onClick:function(e){return v(e)}},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(this.props.match.params.version,"/training-resources"),className:"customTabLinks"},"Training resources")):"",r.a.createElement(De.a,{onClick:function(e){return v(e)}},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(this.props.match.params.version,"/export"),className:"customTabLinks"},"Export"))),localStorage.getItem("roles")?r.a.createElement(De.c,null,r.a.createElement(Ve,{framework:a,version:n}),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null,r.a.createElement(J,{framework:a,versions:m})),r.a.createElement("div",null,r.a.createElement(Ye,{framework:a})))):this.state.profileCount>0?r.a.createElement(De.c,null,r.a.createElement(Ve,{framework:a,version:n}),r.a.createElement("div",{className:"vf-u-margin__top--1600"}),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null,r.a.createElement(J,{framework:a,versions:m})),r.a.createElement("div",null,r.a.createElement(Ye,{framework:a}))),r.a.createElement("div",{className:"vf-u-margin__top--1600"})):"",localStorage.getItem("roles")?r.a.createElement(De.c,null,r.a.createElement(He,{framework:a}),r.a.createElement(J,{framework:a,versions:m}),r.a.createElement("div",{className:"vf-u-margin__top--1600"})):this.state.pathwayCount>0?r.a.createElement(De.c,null,r.a.createElement(He,{framework:a}),r.a.createElement(J,{framework:a,versions:m}),r.a.createElement("div",{className:"vf-u-margin__top--1600"})):"",r.a.createElement(De.c,null,r.a.createElement("form",{action:"#",className:"vf-form | vf-search vf-search--inline"},r.a.createElement("div",{className:"vf-form__item | vf-search__item"},r.a.createElement("label",{className:"vf-form__label vf-u-sr-only | vf-search__label",htmlFor:"inlinesearchitem"},"Inline search"),r.a.createElement("input",{type:"search",placeholder:"Filter competencies",id:"inlinesearchitem",className:"vf-form__input | vf-search__input",onChange:function(t){return e.onFilter(t.target.value)},value:p}))),r.a.createElement("div",{className:"vf-u-margin__top--800"}),r.a.createElement("div",null,h),r.a.createElement("div",{className:"vf-u-margin__top--800"}),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null,r.a.createElement(J,{framework:a,versions:m})),r.a.createElement("div",null,r.a.createElement(Ye,{framework:a}))),r.a.createElement("div",{className:"vf-u-margin__top--1600"})),this.state.trainingResourcesExist?r.a.createElement(De.c,null,r.a.createElement(Fe,{framework:a,version:n,frameworkId:i})):"",r.a.createElement(De.c,null,r.a.createElement(ze,null),r.a.createElement(J,{framework:a,versions:m}),r.a.createElement("div",{className:"vf-u-margin__top--1200"}))):r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__top--200"}),r.a.createElement("span",null,"Fetching data..."),r.a.createElement("img",{alt:"progress",style:{width:"7%"},src:"/progressbar.gif"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.match.params,n=a.framework,r=a.version;return n!==t.framework||r!==t.frameworkVersion?{framework:n,frameworkVersion:r,domains:[],loadingError:!1}:null}}]),t}(n.Component),Xe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={training_resource:{},data:[],csrf:"",updateFlag:!1,path:a.props.location.pathname.split("/"),training_resource_slug:""},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"dateValidate",value:function(e,t){return new Date(e)<=new Date(t)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=localStorage.getItem("csrf_token");if(this.dateValidate(this.state.training_resource.dates,this.state.training_resource.end_date)){var n={_links:{type:{href:"".concat(w,"/rest/type/node/training_resource")}},title:[{value:this.state.training_resource.title}],field_dates:[{value:this.state.training_resource.dates?this.state.training_resource.dates:null}],field_end_date:[{value:this.state.training_resource.end_date?this.state.training_resource.end_date:null}],field_type:[{value:this.state.training_resource.type}],field_description:[{value:this.state.training_resource.description,format:"basic_html"}],field_location:[{value:this.state.training_resource.location}],field_url:[{value:this.state.training_resource.url}],field_target_audience:[{value:this.state.training_resource.target_audience,format:"basic_html"}],field_learning_outcomes:[{value:this.state.training_resource.learning_outcomes,format:"basic_html"}],field_domain_topics:[{value:this.state.training_resource.keywords}],field_organisers:[{value:this.state.training_resource.organisers,format:"basic_html"}],field_trainers:[{value:this.state.training_resource.trainers,format:"basic_html"}],type:[{target_id:"training_resource"}]};y.a.patch("".concat(k,"/node/")+this.state.training_resource.id+"?_format=hal_json",n,{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/hal+json","X-CSRF-Token":a}}).then(function(){t.redirectTo()})}else alert("Incorrect dates");e.preventDefault()}},{key:"componentDidMount",value:function(){var e=this;this.setState({training_resource_slug:this.state.path[3]});var t="".concat(k,"/rest/session/token");fetch(t).then(function(e){return e}).then(function(t){e.setState({csrf:t})}),y.a.get("".concat(k,"/api/resources/?_format=json&slug=").concat(this.state.path[3],"&timestamp=").concat(Date.now(),"&source=competencyhub")).then(function(t){e.setState({training_resource:t.data})})}},{key:"handleChange",value:function(e){console.log("TR",this.state.training_resource);var t=this.state.training_resource,a=e.target.value;t[e.target.name]=a.replace(/(<([^>]+)>)/gi,""),this.setState({fields:t})}},{key:"handleCKEditorChange",value:function(e,t){var a=this.state.training_resource;a[t]=e.editor.getData(),this.setState({fields:a})}},{key:"redirectTo",value:function(){this.props.history.push("/training-resources/"+this.state.training_resource_slug)}},{key:"buildTrainingResourceEditForm",value:function(){var e=this;return new Promise(function(t,a){y.a.get("".concat(k,"/api/resources/?_format=json&slug=").concat(e.state.path[3],"&timestamp=").concat(Date.now(),"&source=competencyhub")).then(function(e){t(e.data)})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Edit Training Resources"),this.state.training_resource.tess_id?r.a.createElement("p",null,"Tess content provider:"," ",this.state.training_resource.tess_content_provider):"",r.a.createElement("p",null,"(* fields are mandatory)"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column large-12 callout"},r.a.createElement("form",{className:"vf-form",id:"resource_edit_form",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Title *"),r.a.createElement("input",{type:"text",ref:"title",id:"title",name:"title",value:this.state.training_resource.title,onChange:function(t){return e.handleChange(t)},required:!0,placeholder:"Title",className:"vf-form__input"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Dates"),r.a.createElement("input",{type:"date",name:"dates",ref:"dates",value:this.state.training_resource.dates,onChange:function(t){return e.handleChange(t)},placeholder:"Date",className:"vf-form__input"})),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Dates"),r.a.createElement("input",{type:"date",name:"end_date",ref:"dates2",value:this.state.training_resource.end_date,onChange:function(t){return e.handleChange(t)},placeholder:"Date",className:"vf-form__input"}))),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Event type *"),r.a.createElement("select",{ref:"type",name:"type",value:this.state.training_resource.type,onChange:function(t){return e.handleChange(t)},className:"vf-form__select"},r.a.createElement("option",{value:"Online"},"Online"),r.a.createElement("option",{value:"Face-to-Face"},"Face-to-Face"),r.a.createElement("option",{value:"Webinar"},"Webinar"),r.a.createElement("option",{value:"Hackathon"},"Hackathon"))),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Description"),r.a.createElement(re.a,{content:this.state.training_resource.description,name:"description",events:{change:function(t){return e.handleCKEditorChange(t,"description")}},onChange:function(t){return e.handleCKEditorChange(t,"description")},activeClass:"p10",required:!0})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Location"),r.a.createElement("input",{type:"text",ref:"location",name:"location",value:this.state.training_resource.location,onChange:function(t){return e.handleChange(t)},placeholder:"Location",className:"vf-form__input"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"URL *"),r.a.createElement("input",{type:"text",ref:"url",name:"url",value:this.state.training_resource.url,onChange:function(t){return e.handleChange(t)},required:!0,placeholder:"URL",className:"vf-form__input"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Target audience"),r.a.createElement(re.a,{name:"target_audience",content:this.state.training_resource.target_audience,events:{change:function(t){return e.handleCKEditorChange(t,"target_audience")}},activeClass:"p10"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Learning outcomes"),r.a.createElement(re.a,{name:"learning_outcomes",content:this.state.training_resource.learning_outcomes,events:{change:function(t){return e.handleCKEditorChange(t,"learning_outcomes")}},activeClass:"p10"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Organisers"),r.a.createElement(re.a,{name:"organisers",content:this.state.training_resource.organisers,events:{change:function(t){return e.handleCKEditorChange(t,"organisers")}},activeClass:"p10"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Trainers"),r.a.createElement(re.a,{name:"trainers",content:this.state.training_resource.trainers,events:{change:function(t){return e.handleCKEditorChange(t,"trainers")}},activeClass:"p10"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Keywords"),r.a.createElement("input",{type:"text",ref:"keywords",name:"keywords",value:this.state.training_resource.keywords,onChange:function(t){return e.handleChange(t)},placeholder:"Keywords",className:"vf-form__input"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("input",{type:"submit",className:"vf-button vf-button--primary vf-button--sm",value:"Update"}))))))}}]),t}(r.a.Component),Ze=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/training-resource/edit/:training_resource_slug",component:Xe}))},$e=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).changeTitle=a.changeTitle.bind(Object(le.a)(a)),a.changeDescription=a.changeDescription.bind(Object(le.a)(a)),a.changeType=a.changeType.bind(Object(le.a)(a)),a.changeTargetAudience=a.changeTargetAudience.bind(Object(le.a)(a)),a.changeLearningOutcomes=a.changeLearningOutcomes.bind(Object(le.a)(a)),a.changeOrganisers=a.changeOrganisers.bind(Object(le.a)(a)),a.changeTrainers=a.changeTrainers.bind(Object(le.a)(a)),a.changeLocation=a.changeLocation.bind(Object(le.a)(a)),a.changeUrl=a.changeUrl.bind(Object(le.a)(a)),a.changeDates=a.changeDates.bind(Object(le.a)(a)),a.changeDates2=a.changeDates2.bind(Object(le.a)(a)),a.changeKeywords=a.changeKeywords.bind(Object(le.a)(a)),a.changeProvider=a.changeProvider.bind(Object(le.a)(a)),a.changeCategory=a.changeCategory.bind(Object(le.a)(a)),a.getAutocomplete=a.getAutocomplete.bind(Object(le.a)(a)),a.optionClick=a.optionClick.bind(Object(le.a)(a)),a.state={data:[],csrf:"",updateFlag:!1,content:"content",tess_id:"",title:"",description:"",type:"",target_audience:"",learning_outcomes:"",location:"",url:"",organisers:"",trainers:"",dates:"",dates2:"",keywords:"",tessResources:[],provider:"",providers:[],category:"",showAutocomplete:!1,autocompleteTerm:"",loading:!1},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"showLoadingStyle",value:function(){if(this.state.loading)return{background:"url(../progressbar.gif)",backgroundSize:"8%",backgroundRepeat:"no-repeat",backgroundPositionX:"right"}}},{key:"changeTitle",value:function(e){this.setState({title:e.currentTarget.value})}},{key:"changeDescription",value:function(e){var t=e.editor.getData();this.setState({description:t})}},{key:"changeType",value:function(e){this.setState({type:e.currentTarget.value})}},{key:"changeTargetAudience",value:function(e){var t=e.editor.getData();this.setState({target_audience:t})}},{key:"changeLearningOutcomes",value:function(e){var t=e.editor.getData();this.setState({learning_outcomes:t})}},{key:"changeOrganisers",value:function(e){var t=e.editor.getData();this.setState({organisers:t})}},{key:"changeTrainers",value:function(e){var t=e.editor.getData();this.setState({trainers:t})}},{key:"changeLocation",value:function(e){this.setState({location:e.currentTarget.value})}},{key:"changeUrl",value:function(e){this.setState({url:e.currentTarget.value})}},{key:"changeDates",value:function(e){this.setState({dates:e.currentTarget.value})}},{key:"changeDates2",value:function(e){this.setState({dates2:e.currentTarget.value})}},{key:"changeKeywords",value:function(e){this.setState({keywords:e.currentTarget.value})}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.updateFlag&&setTimeout(function(){a.props.history.push("/all-training-resources")},1e3)}},{key:"componentDidMount",value:function(){}},{key:"changeCategory",value:function(e){var t=this;this.setState({category:e.toLowerCase(),loading:!0}),fetch("https://tess.elixir-europe.org/content_providers?page_size=200&sort=asc",{method:"GET",headers:{accept:"application/vnd.api+json"}}).then(function(e){return e.json()}).then(function(e){t.setState({providers:e,loading:!1})})}},{key:"changeProvider",value:function(e){var t=this;this.setState({provider:e,loading:!0});var a=this.state.category.toLowerCase(),n="events"===a?"&sort=late":"";fetch("https://tess.elixir-europe.org/".concat(a,"?content_provider=").concat(e,"&page_size=5000").concat(n),{method:"GET",headers:{accept:"application/vnd.api+json"}}).then(function(e){return e.json()}).then(function(e){t.setState({tessResources:e,loading:!1})})}},{key:"getAutocomplete",value:function(e){console.log(e.currentTarget.value),this.setState({showAutocomplete:!0,autocompleteTerm:e.currentTarget.value})}},{key:"optionClick",value:function(e){var t=this.state.tessResources.data.filter(function(t){return t.id===e}),a="",n="";"events"===this.state.category&&(a=t[0].attributes.start.slice(0,10),n=t[0].attributes.end.slice(0,10)),this.setState({showAutocomplete:!1,title:t[0].attributes.title,description:t[0].attributes.description,target_audience:t[0].attributes["target-audience"].toString(),location:t[0].attributes.venue,url:t[0].attributes.url,organisers:t[0].attributes.organizer,dates:a,dates2:n,keywords:t[0].attributes.keywords.toString()})}},{key:"dateValidate",value:function(e,t){return!(new Date(e)>new Date(t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.title,n=this.state.dates,r=this.state.dates2,c="Online";this.state.type&&(c=this.state.type);var i=this.state.description,o=this.state.location,l=this.state.url,s=this.state.target_audience,u=this.state.learning_outcomes,m=this.state.keywords,p=this.state.organisers,f=this.state.trainers,d=this.state.tess_id,h=this.state.category?this.state.category.charAt(0).toUpperCase()+this.state.category.slice(1):"",v=this.state.provider,g=localStorage.getItem("csrf_token");this.dateValidate(n,r)?fetch("".concat(k,"/node?_format=hal_json"),{credentials:"include",method:"POST",cookies:"x-access-token",headers:{Accept:"application/hal+json","Content-Type":"application/hal+json","X-CSRF-Token":g,Authorization:"Basic"},body:JSON.stringify({_links:{type:{href:"".concat(w,"/rest/type/node/training_resource")}},title:[{value:a}],field_dates:[{value:n||null}],field_end_date:[{value:r||null}],field_type:[{value:c}],field_description:[{value:i,format:"basic_html"}],field_location:[{value:o}],field_url:[{value:l}],field_target_audience:[{value:s,format:"basic_html"}],field_learning_outcomes:[{value:u,format:"basic_html"}],field_domain_topics:[{value:m}],field_organisers:[{value:p,format:"basic_html"}],field_trainers:[{value:f,format:"basic_html"}],field_tess_id:[{value:d}],field_tess_category:[{value:h}],field_tess_content_provider:[{value:v}],type:[{target_id:"training_resource"}]})}).then(function(e){return e.json()}).then(function(e){t.props.history.push({pathname:"/training-resources/".concat(Ne(e._links.self.href))})}):alert("Incorrect dates")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement(o.b,{to:"/"},"Home")," /"," ",r.a.createElement(o.b,{to:"/all-training-resources"},"All training resources")," / Create resource"," "),r.a.createElement("h2",null,"Create Training Resource"),r.a.createElement("p",null,"(* fields are mandatory)"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("form",{className:"vf-form",id:"resource_create_form",onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Select category from TeSS:"),r.a.createElement("select",{style:this.showLoadingStyle(),className:"vf-form__select",ref:"provider",onChange:function(t){return e.changeCategory(t.currentTarget.value)}},r.a.createElement("option",null,"-None-"),r.a.createElement("option",null,"Events"),r.a.createElement("option",null,"Materials"))),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("div",null,r.a.createElement("strong",null,"Select provider from TeSS:"),r.a.createElement("select",{style:this.showLoadingStyle(),className:"vf-form__select",ref:"provider",onChange:function(t){return e.changeProvider(t.currentTarget.value)}},r.a.createElement("option",null,"-None-"),this.state.providers.data?this.state.providers.data.filter(function(e){return"2"!==e.id}).map(function(e,t){return r.a.createElement("option",{key:t},e.attributes.title)}):"")))),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Title *"),r.a.createElement("input",{className:"vf-form__input",type:"text",ref:"title",required:!0,placeholder:"Title",onKeyDown:function(t){return e.getAutocomplete(t)},value:this.state.title,onChange:function(t){return e.changeTitle(t)}}),!0===this.state.showAutocomplete&&this.state.provider&&this.state.category?r.a.createElement("ul",{className:"vf-list suggestions_results"},this.state.tessResources.data.filter(function(t){return t.attributes.title.toLowerCase().includes(e.state.autocompleteTerm)}).map(function(t,a){return r.a.createElement("li",{key:a,className:"vf-list__item",onClick:function(){return e.optionClick(t.id)}},r.a.createElement("p",null,t.attributes.title," ","events"===e.state.category?"-"+t.attributes.start.slice(0,4):""," "))})):""),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Start Date"),r.a.createElement("input",{type:"date",className:"vf-form__input",ref:"dates",placeholder:"Date",value:this.state.dates,onChange:function(t){return e.changeDates(t)}})),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"End Date"),r.a.createElement("input",{type:"date",className:"vf-form__input",ref:"dates2",placeholder:"Date",value:this.state.dates2,onChange:function(t){return e.changeDates2(t)}}))),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Event type *"),r.a.createElement("select",{className:"vf-form__select",onChange:function(t){return e.changeType(t)}},r.a.createElement("option",{value:"Online"},"Online"),r.a.createElement("option",{value:"Face-to-Face"},"Face-to-Face"),r.a.createElement("option",{value:"Webinar"},"Webinar"),r.a.createElement("option",{value:"Hackathon"},"Hackathon"))),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Description"),r.a.createElement(re.a,{content:this.state.description,events:{change:this.changeDescription},activeClass:"p10",required:!0})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Location"),r.a.createElement("input",{type:"text",className:"vf-form__input",ref:"location",placeholder:"Location",value:this.state.location||"",onChange:function(t){return e.changeLocation(t)}})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"URL *"),r.a.createElement("input",{type:"url",className:"vf-form__input",ref:"url",required:!0,placeholder:"URL",value:this.state.url,onChange:function(t){return e.changeUrl(t)}})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Target audience"),r.a.createElement(re.a,{content:this.state.target_audience,events:{change:this.changeTargetAudience},activeClass:"p10"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Learning outcomes"),r.a.createElement(re.a,{content:this.state.learning_outcomes,events:{change:this.changeLearningOutcomes},activeClass:"p10"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Organisers"),r.a.createElement(re.a,{content:this.state.organisers,events:{change:this.changeOrganisers},activeClass:"p10"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Trainers"),r.a.createElement(re.a,{content:this.state.trainers,events:{change:this.changeTrainers},activeClass:"p10"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("strong",null,"Keywords"),r.a.createElement("input",{type:"text",className:"vf-form__input",ref:"keywords",placeholder:"Keywords",value:this.state.keywords,onChange:function(t){return e.changeKeywords(t)}})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"vf-form__item"},r.a.createElement("input",{type:"submit",className:"vf-button vf-button--primary",value:"Submit"}))))))}}]),t}(r.a.Component),et=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/training-resource/create",component:$e}))},tt=window.$,at=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).activeRequests=new Y,a.competencyService=new Q,a.state={data:[],resourceSlug:"",framework:a.props.location.pathname.split("/")[4].replace(/ /g,""),framework_id:"",resourceID:a.props.location.pathname.split("/")[2],frameworkdetails:[],csrf:"",frameworkUUID:"",competencies:[],selectedAttributes:[],resourceDetails:"",resourcePath:a.props.location.pathname.split("/")},a.handleSelect=a.handleSelect.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"handleSelect",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.state.selectedAttributes,a=this.state.framework_id,n=[],r=0;r<t.length;r++)n.push(t[r].split("id",2));return e.prev=4,this.activeRequests.startRequest(),e.next=8,Promise.all([this.competencyService.attrmap(this.state.resourceID,n,a)]);case 8:c=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.setState({loadingError:!0});case 14:return e.prev=14,this.activeRequests.finishRequest(),this.props.history.push("/training-resources/"+Ne(c[0]._links.self.href)),e.finish(14);case 18:case"end":return e.stop()}},e,this,[[4,11,14,18]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleAllCheck",value:function(e,t,a){var n=this.state.selectedAttributes,r=document.getElementsByName(e);if(a.target.checked)for(var c=0;c<r.length;c++)r[c].checked=!0,n.push(r[c].getAttribute("data-id")),this.setState({selectedAttributes:n});else for(var i=0;i<r.length;i++)!0===r[i].checked&&(r[i].checked=!1,n.splice(n.indexOf(r[i]),1),this.setState({selectedAttributes:n}))}},{key:"handleAttributeClick",value:function(e,t,a){var n=this.state.selectedAttributes;a.target.checked?(n.push(e),this.setState({selectedAttributes:n}),document.getElementById(a.target.name).checked=!0):(n.splice(n.indexOf(e),1),this.setState({selectedAttributes:n}),tt(":checkbox[name="+a.target.name+"]").is(":checked")||(document.getElementById(a.target.name).checked=!1))}},{key:"handleListAllChecked",value:function(e){var t=[];tt(":checkbox").each(function(){tt(this).is(":checked")&&t.push(tt(this).attr("id"))}),alert(t)}},{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r,c,i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k)+"/api/resources/?_format=hal_json&id="+this.state.resourceID+"&timestamp="+Date.now()).then(function(e){return e.json()}).then(function(e){i.setState({resourceDetails:e})});case 2:return t=[],this.state.resourceDetails.competency_profile.map(function(e){return e.domains.map(function(e){return e.competencies.map(function(e){return e.attributes.map(function(e){return t.push(e.id),null}),null}),null}),null}),this.setState({selectedAttributes:t}),a="".concat(k,"/rest/session/token"),fetch(a).then(function(e){return e}).then(function(e){i.setState({csrf:e})}),n="".concat(k,"/api/version_manager?_format=json&timestamp=").concat(Date.now()),e.next=10,fetch(n).then(function(e){return e.json()}).then(function(e){i.setState({frameworkdetails:e})});case 10:return r="",this.state.frameworkdetails.map(function(e){return e.title.toLowerCase().replace(/ /g,"")===i.state.framework&&e.versions.map(function(t){return"live"===t.status&&(r=t.number,i.state.framework_id=e.nid),null}),null}),c="".concat(k)+"/api/"+this.state.framework+"/"+r+"?_format=json",e.next=15,fetch(c).then(function(e){return e.json()}).then(function(e){i.setState({data:e})});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e,t){return this.state.attributes===t.attributes}},{key:"render",value:function(){var e=this,t=this.state.frameworkdetails,a=this.state.data,n=[],c=[],i=[],o=this.state.resourceDetails,l=[],s=[];o&&o.competency_profile.map(function(e){return e.domains.map(function(e){return e.competencies.map(function(e){return s.push(e.id),e.attributes.map(function(e){return l.push(e.id),null}),null}),null}),null}),t.forEach(function(t,a){t.title.toLowerCase().replace(/ /g,"")===e.state.framework&&(t.attribute_types.forEach(function(e){n.push(e.title),i.push(r.a.createElement("option",{"data-id":e.id,value:e.uuid},e.title))}),t.domains.forEach(function(e){c.push(r.a.createElement("option",{"data-id":e.id,value:e.uuid},e.title))}))});var u=a.map(function(t){return t.domains.map(function(t,a){return r.a.createElement("tbody",null,r.a.createElement("tr",{key:t.nid},r.a.createElement("td",null,a+1)," ",r.a.createElement("td",null,r.a.createElement("strong",null," ",t.title)," ")," "),t.competencies.map(function(t,c){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,a+1,".",c+1),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",defaultChecked:-1!==s.indexOf(t.id),"data-test":t.uuid,id:t.id,onChange:e.handleAllCheck.bind(e,t.id,t.uuid)})," ",t.title,r.a.createElement("ul",{style:{marginLeft:"1em",marginBottom:"1em"}},n.map(function(a){return r.a.createElement("div",{style:{marginLeft:"1em"}},r.a.createElement("div",null," ",r.a.createElement("strong",null,r.a.createElement("em",null,a))),t.attributes.filter(function(e){return e.type===a}).map(function(a){return r.a.createElement("li",{key:a.id,style:{marginLeft:"1em"}},r.a.createElement("input",{type:"checkbox",defaultChecked:-1!==l.indexOf(a.id),name:t.id,"data-id":a.id,"data-uuid":a.uuid,id:a.id,onChange:e.handleAttributeClick.bind(e,a.id,a.uuid)})," ",r.a.createElement("span",{className:a.archived}," ",a.title))}))}))))}),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("td",null))))})});return r.a.createElement("div",null,r.a.createElement("h2",null,o.title),r.a.createElement("h4",null,"Type: ",o.type),r.a.createElement("h4",null,"URL: ",o.url),r.a.createElement("table",{className:"table"},u),r.a.createElement("div",{id:"footer-button"},r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm",onClick:this.handleSelect.bind(this)}," ","Save")))}}]),t}(r.a.Component),nt=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/training-resources/:id/map/:framework",component:at}))},rt={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};B.a.setAppElement("#root");r.a.Component;var ct=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={resource:[],frameworks:[],resourcePath:a.props.location.pathname.split("/"),showModal:!1,selectedFramework:"",updateFlag:""},a.handleOpenModal=a.handleOpenModal.bind(Object(le.a)(a)),a.handleCloseModal=a.handleCloseModal.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"getSlugFromURLBar",value:function(){return new URL(window.location.href).pathname.split("training-resources/").pop()}},{key:"handleOpenModal",value:function(e,t){this.setState({showModal:!0}),this.setState({selectedFramework:e}),t.preventDefault()}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1}),this.setState({updateFlag:!0})}},{key:"componentDidUpdate",value:function(){var e=this;this.state.updateFlag&&(this.fetchData(),setTimeout(function(){e.setState({updateFlag:!1})},1e3))}},{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=this,t="".concat(k,"/rest/session/token?source=competencyhub");fetch(t).then(function(e){return e}).then(function(t){e.setState({csrf:t})}),this.getSlugFromURLBar();var a="".concat(k,"/api/resources/?_format=json&slug=").concat(this.getSlugFromURLBar(),"&timestamp=").concat(Date.now(),"&source=competencyhub");fetch(a).then(function(e){return e.json()}).then(function(t){e.setState({resource:t})}),fetch("".concat(k,"/api/version_manager?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(t){e.setState({frameworks:t})})}},{key:"mappingBlock",value:function(){var e=this;if(x.currently_logged_in_user.roles.includes("content_manager"))return r.a.createElement("div",null,r.a.createElement("strong",null," Manage competency profile "),r.a.createElement("ul",null,this.state.frameworks.map(function(t,a){return r.a.createElement("li",{style:{display:"inline",margin:"5px"}},r.a.createElement(o.b,{to:"/training-resources/".concat(e.state.resource?e.state.resource.id:"","/map/").concat(t.title.toLowerCase().replace(/ /g,""))}," ",r.a.createElement("i",{className:"fas fa-tags"})," ",t.title," "))})))}},{key:"formatDates",value:function(e,t){var a=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date(e),r=new Date(t),c=n.getDate(),i=n.getMonth(),o=n.getFullYear();if(t){var l=r.getDate(),s=r.getMonth(),u=r.getFullYear();return o===u?i===s?c===l?c+" "+a[i]+" "+o:c+" - "+l+" "+a[i]+" "+o:c+" "+a[i]+" - "+l+" "+a[s]+" "+o:c+" "+a[i]+" "+o+" - "+l+" "+a[s]+" "+u}return c+" "+a[i]+" "+o}},{key:"archiveHandle",value:function(e,t,a){var n="";n=1!==t;var r=localStorage.getItem("csrf_token");fetch("".concat(k,"/node/")+e+"?_format=hal_json&source=competencyhub",{credentials:"include",method:"PATCH",cookies:"x-access-token",headers:{Accept:"application/hal+json","Content-Type":"application/hal+json","X-CSRF-Token":r,Authorization:"Basic"},body:JSON.stringify({_links:{type:{href:"".concat(k,"/rest/type/node/training_resource")}},field_archived:[{value:n}],type:[{target_id:"training_resource"}]})}),this.setState({updateFlag:!0}),a.preventDefault()}},{key:"render",value:function(){var e=this,t=[],a=this.state.resource,n=Array.isArray(a.competency_profile),c=r.a.createElement(r.a.Fragment,null,r.a.createElement(je.MetaTags,null,r.a.createElement("title",null,a.title),r.a.createElement("meta",{property:"og:title",content:a.title}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://competency.ebi.ac.uk".concat(this.props.history.location.pathname)}),r.a.createElement("meta",{property:"og:image",content:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/themes/custom/ebi_academy/images/mastheads/CH_Jigsaw.jpg"}),r.a.createElement("meta",{property:"og:description",content:"The training resources pages include information about specific training events or materials that are relevant to develop specific competencies, which are linked to from the training resources page."}),r.a.createElement("meta",{name:"description",content:"The training resources pages include information about specific training events or materials that are relevant to develop specific competencies, which are linked to from the training resources page."}),r.a.createElement("meta",{property:"keywords",content:"training, learning, competencies, competency-based training, learning outcomes"})),r.a.createElement(Oe.a,null,r.a.createElement("link",{rel:"canonical",href:this.props.location.pathname})),r.a.createElement("h1",null,a.title),r.a.createElement("div",{className:"vf-grid  vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("h2",null,"Overview"),a.description?V()(a.description):"",a.url?r.a.createElement("p",null,r.a.createElement("a",{href:a.url,target:"_blank"},r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm"},"Go to resource"))):"",a.target_audience?V()("<h3>Target Audience</h3>"+a.target_audience):"",a.learning_outcomes?V()("<h3>Learning Outcomes</h3>"+a.learning_outcomes):"",a.organisers?V()("<h3>Organisers</h3>"+a.organisers):"",r.a.createElement("div",null,r.a.createElement("h2",null,"Associated competencies"),r.a.createElement("p",null,"This resource provides learning to support the development of the following competencies"),r.a.createElement("div",null,n?a.competency_profile.map(function(a,n){return r.a.createElement("div",{className:"embl-grid",key:n},e.state.frameworks.map(function(e){return e.nid===a.id&&(e.attribute_types.map(function(e){return-1===t.indexOf(e.title)&&t.push(e.title),null}),e.versions.find(function(e){return"live"===e.status})),null}),r.a.createElement("div",null,r.a.createElement("h3",null,a.title)),r.a.createElement("div",null,a.domains.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h3",null,e.title),r.a.createElement("ul",{className:"vf-list vf-list--unordered"},e.competencies.map(function(e,t){return r.a.createElement("li",{className:"vf-list__item",key:t},r.a.createElement("span",{className:"archived"===e.archived?"archived":""},r.a.createElement("p",null,r.a.createElement("a",{className:"vf-link",href:"/framework/".concat(a.title.toLowerCase().replace(/\s+/g,""),"/").concat(a.version,"/competency/details/").concat(e.id)}," ",e.title," "))))})))})))}):r.a.createElement("tr",null,r.a.createElement("td",null))))),r.a.createElement("div",{className:"vf-grid__col--span-1"},x.currently_logged_in_user.is_logged_in?r.a.createElement("div",{className:"float-right"},r.a.createElement("div",null,r.a.createElement(o.b,{to:"/training-resource/edit/"+this.state.resourcePath[2]},r.a.createElement("i",{className:"fas fa-edit"})," Edit this resource"," ")),"archived"===a.archived?r.a.createElement("a",{style:{cursor:"pointer"},onClick:this.archiveHandle.bind(this,a.id,1)}," ",r.a.createElement("i",{className:"fas fa-toggle-on"})," ",r.a.createElement("span",null,"Resource is archived")," "):r.a.createElement("a",{style:{cursor:"pointer"},onClick:this.archiveHandle.bind(this,a.id,0)}," ",r.a.createElement("i",{className:"fas fa-toggle-off"})," ",r.a.createElement("span",null,"Archive this resource"))):"",r.a.createElement("p",null),r.a.createElement("p",null,a.trainers?V()("<h3>Trainers</h3>"+a.trainers):""),a.dates?r.a.createElement("span",null,r.a.createElement("strong",null,"Dates:")," ",this.formatDates(a.dates,a.end_date)):"",a.location?r.a.createElement("p",null,r.a.createElement("strong",null,"Location:")," ",a.location):"",a.type?r.a.createElement("p",null,r.a.createElement("strong",null,"Type:")," ",a.type):"",a.keywords?r.a.createElement("p",null,r.a.createElement("strong",null,"Keywords:")," ",a.keywords):"",a.tess_content_provider?r.a.createElement("p",null,r.a.createElement("strong",null,"TeSS content provider:")," ",a.tess_content_provider):"")));return r.a.createElement("div",null,r.a.createElement("div",null,c,this.mappingBlock()),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement(B.a,{isOpen:this.state.showModal,className:"Modal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example"},r.a.createElement("div",null,r.a.createElement("h2",{style:{"text-align":"center"}},"Manage competency profile for"," ",this.state.selectedFramework.toUpperCase()," ",r.a.createElement("i",{className:"fas fa-window-close float-right","data-close":!0,onClick:this.handleCloseModal})," ")),r.a.createElement("table",null,r.a.createElement(nt,{selectedCompetencies:[],selectedAttributes:[],selectedFramework:this.state.selectedFramework,resourceID:this.state.resourcePath[2],handleCloseModal:this.handleCloseModal})))))}}]),t}(r.a.Component),it=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/training-resources/:id",component:ct}))},ot=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={resources:[],filterType:"",filterMapping:"",userid:"",activePage:0,totalItemsCount:0,filter:""},a.archiveHandle=a.archiveHandle.bind(Object(le.a)(a)),a.handlePageChange=a.handlePageChange.bind(Object(le.a)(a)),a.searchSubmit=a.searchSubmit.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"handlePageChange",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({resources:null});case 2:return e.next=4,this.setState({activePage:t});case 4:return e.next=6,this.fetchData();case 6:setTimeout(function(){window.scrollTo(0,0)},700);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"searchSubmit",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.setState({resources:null});case 3:return e.next=5,this.setState({activePage:1});case 5:return e.next=7,this.setState({totalItemsCount:0});case 7:return e.next=9,this.fetchData();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.updateFlag&&(this.fetchData(),setTimeout(function(){a.setState({updateFlag:!1})},1e3))}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(k,"/rest/session/token"),fetch(t).then(function(e){return e}).then(function(e){r.setState({csrf:e})}),a="".concat(k,"/api/resources?_format=json&page=").concat(this.state.activePage,"&title=").concat(this.state.filter,"&type=").concat(this.state.filterType),e.next=5,fetch(a).then(function(e){return e.json()}).then(function(e){r.setState({resources:e})});case 5:this.state.resources[0]&&(n=this.state.resources[0].hitcount,this.setState({totalItemsCount:n}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"filter",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({filter:t.target.value});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"filterTypeHandle",value:function(e){this.setState({filterType:e.target.value})}},{key:"filterMappingHandle",value:function(e){this.state.filterMapping?this.setState({filterMapping:0}):this.setState({filterMapping:1})}},{key:"archiveHandle",value:function(e,t,a){var n="";n=1!==t;var r=localStorage.getItem("csrf_token");fetch("".concat(k,"/node/")+e+"?_format=hal_json",{credentials:"include",method:"PATCH",cookies:"x-access-token",headers:{Accept:"application/hal+json","Content-Type":"application/hal+json","X-CSRF-Token":r,Authorization:"Basic"},body:JSON.stringify({_links:{type:{href:"".concat(w,"/rest/type/node/training_resource")}},field_archived:[{value:n}],type:[{target_id:"training_resource"}]})}),this.setState({updateFlag:!0}),a.preventDefault()}},{key:"formatDates",value:function(e,t){var a=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date(e),r=new Date(t),c=n.getDate(),i=n.getMonth(),o=n.getFullYear();if(t){var l=r.getDate(),s=r.getMonth(),u=r.getFullYear();return o===u?i===s?c===l?c+" "+a[i]+" "+o:c+" - "+l+" "+a[i]+" "+o:c+" "+a[i]+" - "+l+" "+a[s]+" "+o:c+" "+a[i]+" "+o+" - "+l+" "+a[s]+" "+u}return c+" "+a[i]+" "+o}},{key:"render",value:function(){var e=this,t=this.state.resources,a="";return t&&(a=t.map(function(t,a){return r.a.createElement("tr",{className:"vf-table__row",key:a},r.a.createElement("td",{className:"vf-table__cell"},a+1," "),r.a.createElement("td",{className:"vf-table__cell"},r.a.createElement("div",{style:{maxWidth:"500px"}},r.a.createElement(o.b,{to:{pathname:"/training-resources/".concat(t.slug),state:{training_resource_id:t.id}}},t.title))),r.a.createElement("td",{className:"vf-table__cell"},t.dates?e.formatDates(t.dates,t.end_date):""),r.a.createElement("td",{className:"vf-table__cell"},t.type),r.a.createElement("td",{className:"vf-table__cell"},r.a.createElement("a",{href:t.url,target:"_blank"},"Resource URL")),r.a.createElement("td",{className:"vf-table__cell"},"archived"===t.archived?r.a.createElement("a",{style:{cursor:"pointer"},onClick:e.archiveHandle.bind(e,t.id,1)}," ",r.a.createElement("i",{className:"fas fa-toggle-on"})," ",r.a.createElement("span",null,"Archived")," "):r.a.createElement("a",{style:{cursor:"pointer"},onClick:e.archiveHandle.bind(e,t.id,0)}," ",r.a.createElement("i",{className:"fas fa-toggle-off"}))),r.a.createElement("td",{className:"vf-table__cell"},x.currently_logged_in_user.id==t.author?r.a.createElement(o.b,{to:"/training-resource/edit/".concat(t.slug)},r.a.createElement("i",{className:"fas fa-edit"})," "):""))})),r.a.createElement("div",null,r.a.createElement("h3",null,"Training Resources"),r.a.createElement("form",{className:"vf-form | vf-search",onSubmit:function(t){return e.searchSubmit(t)}},r.a.createElement("div",{className:"vf-grid vf-grid__col-6"},r.a.createElement("div",{className:"vf-form__item | vf-search__item vf-grid__col--span-2"},r.a.createElement("label",{class:"vf-form__label vf-u-sr-only | vf-search__label",for:"search_box"},"Search training resources"),r.a.createElement("input",{type:"search",onChange:this.filter.bind(this),placeholder:"Type to search",className:"vf-form__input | vf-search__item",id:"search_box"})),r.a.createElement("div",{className:"vf-form__item vf-grid__col--span-1"},r.a.createElement("select",{ref:"type",onChange:this.filterTypeHandle.bind(this),className:"vf-form__select"},r.a.createElement("option",{value:"All"},"All"),r.a.createElement("option",{value:"Online"},"Online"),r.a.createElement("option",{value:"Face-to-Face"},"Face-to-Face"),r.a.createElement("option",{value:"Webinar"},"Webinar"),r.a.createElement("option",{value:"Hackathon"},"Hackathon"))),r.a.createElement("div",{className:"vf-form__item vf-grid__col--span-1"},r.a.createElement("input",{type:"submit",className:"vf-search__button | vf-button vf-button--primary vf-button--sm",value:"Search"})),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement(o.b,{className:"vf-button vf-button--primary vf-button--sm",to:"/training-resource/create"},r.a.createElement("i",{className:"fas fa-plus-circle"}," ")," Add training resource"," ")))),r.a.createElement("div",{className:"vf-grid vf-grid__col-6"},r.a.createElement("div",{className:"vf-form__item vf-grid__col--span-3"},r.a.createElement("h5",null,"Total: ",this.state.totalItemsCount)),r.a.createElement("div",{className:"vf-form__item vf-grid__col--span-3",style:{paddingTop:"30px"}},r.a.createElement("input",{type:"checkbox",id:"checkboxMapping",checked:this.state.filterMapping,onChange:this.filterMappingHandle.bind(this),className:"vf-form__checkbox"}),r.a.createElement("label",{for:"checkboxMapping",className:"vf-form__label"}," ","Show resources with deprecated mapping"," "))),r.a.createElement("table",{className:"vf-table vf-table--striped"},r.a.createElement("thead",{className:"vf-table__header"},r.a.createElement("tr",{className:"vf-table__row"},r.a.createElement("th",{className:"vf-table__heading"},"S. No."),r.a.createElement("th",{className:"vf-table__heading"},"Title"),r.a.createElement("th",{className:"vf-table__heading"},"Date(s)"),r.a.createElement("th",{className:"vf-table__heading"},"Type"),r.a.createElement("th",{className:"vf-table__heading"},"URL"),r.a.createElement("th",{className:"vf-table__heading"},"Archive"),r.a.createElement("th",{className:"vf-table__heading"},"Edit"))),t?t.length>0?r.a.createElement("tbody",{className:"vf-table__body"},a):r.a.createElement("h5",null,"No results found"):r.a.createElement("center",null,r.a.createElement("img",{alt:"progress",src:"/progressbar.gif"}),r.a.createElement("h4",null,"Loading resources"))),r.a.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},r.a.createElement(Pe.a,{activePage:this.state.activePage,itemsCountPerPage:15,totalItemsCount:this.state.totalItemsCount,pageRangeDisplayed:10,onChange:function(t){return e.handlePageChange(t)},innerClass:"vf-pagination__list",itemClass:"vf-pagination__item",itemClassPrev:"vf-pagination__item--previous-page",itemClassNext:"vf-pagination__item--next-page",linkClass:"vf-pagination__link vf-pagination__label",activeClass:"vf-pagination__item--is-active",prevPageText:"Previous",nextPageText:"Next"})))}}]),t}(r.a.Component),lt=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/all-training-resources",component:ot}))},st=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={resources:[],filterType:""},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Training Resources"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column large-4 callout"},r.a.createElement(o.b,{className:"button float-right",to:"/all-training-resources"},r.a.createElement("i",{className:"fas fa-list"}," ")," View published training resources"," ")),r.a.createElement("div",{className:"column large-4 callout"},r.a.createElement(o.b,{className:"button float-right",to:"#"},r.a.createElement("i",{className:"fas fa-list"}," ")," View unpublished training resources"," ")),r.a.createElement("div",{className:"column large-4 callout"},r.a.createElement(o.b,{className:"button float-right",to:"#"},r.a.createElement("i",{className:"fas fa-tasks"}," ")," Manage training resources"," "))))}}]),t}(r.a.Component),ut=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/training-resources-home",component:st}))},mt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={data:[],roles:"",user:""},a.handlePasswordChange=a.handlePasswordChange.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"handlePasswordChange",value:function(e){var t=this.refs.old.value,a=this.refs.new1.value,n=localStorage.getItem("userid");fetch("".concat(k,"/user/")+n+"?_format=json",{credentials:"include",method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":localStorage.getItem("csrf_token")},body:JSON.stringify({pass:[{existing:t,value:a}]})}).then(function(e){return e}).then(function(e){return setTimeout(function(){alert("Password changed successfully"),window.location.reload()},1e3)}),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Change password:"),r.a.createElement("form",{className:"vf-form",id:"passChange"},r.a.createElement("input",{className:"vf-form__input",type:"password",ref:"old",placeholder:"Old password"}),r.a.createElement("input",{className:"vf-form__input",type:"password",ref:"new1",placeholder:"New password"}),r.a.createElement("input",{className:"vf-form__input",type:"password",placeholder:"Confirm new password"}),r.a.createElement("input",{type:"button",className:"vf-button vf-button--sm vf-button--primary",onClick:this.handlePasswordChange.bind(this),value:"Submit"})))}}]),t}(r.a.Component),pt=function(){var e=Object(n.useState)(),t=Object(F.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(),o=Object(F.a)(i,2),l=o[0],s=o[1],p=Object(n.useState)(),f=Object(F.a)(p,2),d=f[0],h=f[1],v=localStorage.getItem("userid");if(Object(n.useEffect)(function(){(function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/user/").concat(v,"?_format=json"),{credentials:"include",method:"GET",headers:{"Content-Type":"application/json","X-CSRF-Token":localStorage.getItem("csrf_token")}}).then(function(e){return e.json()}).then(function(e){return c(e)});case 2:return e.next=4,fetch("".concat(k,"/api/version_manager/?_format=json")).then(function(e){return e.json()}).then(function(e){return s(e)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[v]),!d&&a&&l){var g=[];l.map(function(e){return a.field_frameworks.map(function(t){return t.target_id===e.nid&&g.push(e.title),null}),null}),g.length>0&&h(g.join())}return r.a.createElement("div",null,r.a.createElement("h2",null,"My profile"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-3"},"\xa0"),r.a.createElement("div",{className:"column medium-6"},a?r.a.createElement("table",{className:"responsive-table userprofile-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"Username:")),r.a.createElement("td",null,a.name[0].value)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"Email:")),r.a.createElement("td",null,a.mail[0].value)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"Frameworks:")),r.a.createElement("td",null,d||"NA")))):"Loading profile"),r.a.createElement("div",{className:"column medium-3"})))},ft=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/user/view",component:pt}))},dt=function(){return Object(n.useEffect)(function(){window.scrollTo(0,0)},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,null,r.a.createElement("title",null,"About competency hub"),r.a.createElement("meta",{property:"og:title",content:"About competency hub"}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://competency.ebi.ac.uk/about"}),r.a.createElement("meta",{property:"og:image",content:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/themes/custom/ebi_academy/images/mastheads/CH_Jigsaw.jpg"}),r.a.createElement("meta",{property:"og:description",content:"The Competency Hub is a repository of competency frameworks that define the abilities required by professionals in a specific field and relate them to training resources and career profiles"}),r.a.createElement("meta",{name:"description",content:"The Competency Hub is a repository of competency frameworks that define the abilities required by professionals in a specific field and relate them to training resources and career profiles"}),r.a.createElement("meta",{property:"keywords",content:"competency, life sciences, career development, computational biology, bioinformatics"})),r.a.createElement(Oe.a,null,r.a.createElement("link",{rel:"canonical",href:"https://www.competency.ebi.ac.uk/about"}))),r.a.createElement("h2",null,"About the Competency Hub"),r.a.createElement("h3",null,"Competency"),r.a.createElement("p",null,"A competency is an observable ability of any professional. A competency can be defined as a combination of knowledge, skills and attitudes. It is observable, so its acquisition can be validated objectively."),r.a.createElement("h3",null,"Competency framework"),r.a.createElement("p",null,"A competency framework defines a core set of competencies required by professionals working in a specific field."),r.a.createElement("p",null,"A competency framework can specify which competencies are especially relevant for professionals in different roles or at different career stages."),r.a.createElement("h3",null,"Competency Hub"),r.a.createElement("p",{className:"lead"},"The Competency Hub is a repository of competency frameworks that define the abilities required by professionals in a specific field and relate them to training resources and career profiles, so that you can:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Assess your competency abilities against a professional standard and check example career profiles"),r.a.createElement("li",null,"Find training resources to develop specific competencies and progress in your career"),r.a.createElement("li",null,"Design training courses and programmes that help learners develop specific competencies")),r.a.createElement("h3",null,"Career profiles"),r.a.createElement("p",null,"In this section, you will find a series of career profiles, which are example descriptions of professional roles."),r.a.createElement("p",null,"Each profile shows:"),r.a.createElement("ul",null,r.a.createElement("li",null,"The level at which each competency is required to fulfil that role"),r.a.createElement("li",null,"Qualifications and background"),r.a.createElement("li",null,"Activities of the role")),r.a.createElement("p",null,"You can create your own profile by assessing yourself against the list of competencies, and then compare your profile to the existing ones. This allows you to see which competencies you need to develop further to perform that role."),r.a.createElement("p",null,"The profile that you create is saved on your own browser."),r.a.createElement("p",null,"Not all the competency frameworks on the site contain career profiles."),r.a.createElement("h3",null,"Find training resources"),r.a.createElement("p",null,"Training resources are linked to the competencies that they support trainees to gain. You can find this information on:"),r.a.createElement("ul",null,r.a.createElement("li",null,"The page for each training resource, which shows a list of related competencies"),r.a.createElement("li",null,"The page for each competency, which shows a list of related training resources")),r.a.createElement("p",null,"Not all the competency frameworks on the site contain training resources."),r.a.createElement("h3",null,"Develop courses"),r.a.createElement("p",null,r.a.createElement(o.b,{to:"/develop-your-courses"},"Develop your courses")," using the Competency Hub to design competency-based courses and course programmes."),r.a.createElement("h3",null,"Additional documentation"),r.a.createElement("p",null,"The following are documents that explain how some of the competency frameworks on this site have been developed and used:"," "),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://zenodo.org/record/5418103#.YhiW3ZPP30o"},"Guidelines for developing and updating short courses and course programs using the ISCB competency framework")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005772"},"The development and application of bioinformatics core competencies to improve bioinformatics training and education")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://zenodo.org/record/4623713#.YiCrSxPP30o"},"Professionalising data stewardship in the Netherlands. Competences, training and education. Dutch roadmap towards national implementation of FAIR data stewardship")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://zenodo.org/record/264231#.YiCtoxPP30o"},"BioExcel Deliverable 4.2 - Competency framework, mapping to current training & initial training plan")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://zenodo.org/record/4301475#.YiCtzxPP30o"},"BioExcel-2 Deliverable D4.2 - Training Plan"))))};var ht=function(e){var t=e.desc,a=e.sub_text,n=e.card_link;return r.a.createElement("article",{className:"vf-card vf-card--brand vf-card--bordered"},r.a.createElement("div",{className:"vf-card__content | vf-stack vf-stack--400"},r.a.createElement("h3",{className:"vf-card__heading"},r.a.createElement("a",{className:"vf-card__link",href:n}," ",t," ",r.a.createElement("svg",{"aria-hidden":"true",className:"vf-card__heading__icon | vf-icon vf-icon-arrow--inline-end",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12S18.627 0 12 0C5.376.008.008 5.376 0 12zm13.707-5.209l4.5 4.5a1 1 0 010 1.414l-4.5 4.5a1 1 0 01-1.414-1.414l2.366-2.367a.25.25 0 00-.177-.424H6a1 1 0 010-2h8.482a.25.25 0 00.177-.427l-2.366-2.368a1 1 0 011.414-1.414z",fill:"currentColor","fill-rule":"nonzero"})))),a?V()(a):""))};var vt=function(e){var t=e.frameworkDetails;return r.a.createElement("section",{className:"vf-card-container vf-card-container__col-3",style:{margin:"0"}},r.a.createElement("div",{className:"vf-card-container__inner"},t.map(function(e){return r.a.createElement(ht,{desc:e.desc,sub_text:e.sub_text,card_link:e.card_link})})))},gt=a(291),bt=a.n(gt),Et=a(292),yt=a.n(Et),_t=a(293),kt=a.n(_t),wt=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__top--1600"}),r.a.createElement("hr",{class:"vf-divider"}),r.a.createElement("div",{className:"vf-u-margin__top--1600"}),r.a.createElement("div",null,r.a.createElement("div",{className:"vf-grid"},r.a.createElement("p",null,"The Competency Hub's web infrastructure is developed by the",r.a.createElement("a",{className:"vf-link",href:"http://www.ebi.ac.uk/training"}," ","EMBL-EBI Training Team")," ","with support from the"," ",r.a.createElement("a",{className:"vf-link",href:"https://bioexcel.eu/"},"BioExcel")," ","and"," ",r.a.createElement("a",{href:"https://permedcoe.eu/",className:"vf-link"},"PerMedCoE Centres of Excellence"),". BioExcel and PerMedCoE are funded by the"," ",r.a.createElement("a",{className:"vf-link",href:"https://ec.europa.eu/programmes/horizon2020/en"}," ","European Union Horizon 2020 programme")," ","under grant agreements 823830, 675728, 951773. Both projects are part of"," ",r.a.createElement("a",{className:"vf-link",href:"https://www.hpccoe.eu/"}," ","the EU HPC CoE Initiative"),"."),r.a.createElement("figure",{className:"vf-figure",style:{margin:"10px"}},r.a.createElement("img",{className:"vf-figure__image",src:bt.a,loading:"lazy",width:"120px",height:"auto",alt:""})),r.a.createElement("figure",{className:"vf-figure",style:{margin:"10px"}},r.a.createElement("img",{className:"vf-figure__image",src:yt.a,loading:"lazy",width:"170px",height:"auto",alt:""})),r.a.createElement("figure",{className:"vf-figure",style:{margin:"10px"}},r.a.createElement("img",{className:"vf-figure__image",src:kt.a,loading:"lazy",width:"180px",height:"auto",style:{backgroundColor:"#fff",padding:"7px"},alt:""}))),r.a.createElement("p",null,r.a.createElement("span",null,r.a.createElement("a",{className:"vf-link",href:"https://www.ebi.ac.uk/data-protection/privacy-notice/competency-hub"},"Privacy notice for the Competency Hub")))),r.a.createElement("div",{className:"vf-u-margin__top--200"}),r.a.createElement("p",null,"Contact us at competency [at] ebi.ac.uk if you have any questions, comments or suggestions."),r.a.createElement("div",{className:"vf-u-margin__top--1600"}))},Nt=new j,jt="/user/login?_format=json";function xt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(m.a)(u.a.mark(function e(t,a){var n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:t,pass:a},e.prev=1,e.next=4,Nt.post(jt,n);case 4:return r=e.sent,c=r.data,localStorage.setItem("roles",c.current_user.roles),localStorage.setItem("csrf_token",c.csrf_token),localStorage.setItem("logout_token",c.logout_token),localStorage.setItem("user",c.current_user.name),localStorage.setItem("userid",c.current_user.uid),e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(1),St(),alert("Login failed. Please try again and make sure you are using the correct username and password.");case 18:case"end":return e.stop()}},e,null,[[1,14]])}))).apply(this,arguments)}function St(){var e=localStorage.getItem("logout_token");y.a.get("".concat("https://cms.competency.ebi.ac.uk","/user/logout?_format=json&token=").concat(e,"&timestamp=").concat(Date.now()),{withCredentials:!0}).then(function(){localStorage.removeItem("roles"),localStorage.removeItem("csrf_token"),localStorage.removeItem("logout_token"),localStorage.removeItem("userid"),localStorage.removeItem("user")})}var Ct=function(e){var t=e.framework;return r.a.createElement("div",{style:{textAlign:"-webkit-center"}},r.a.createElement("a",{href:t.link?t.link:"#"},r.a.createElement("figure",{className:"vf-figure"},r.a.createElement("img",{className:"vf-figure__image",src:t.src,alt:t.alt,loading:"lazy",width:"auto",height:"auto"}))))},Dt=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={frameworks:[]},a.onLogin=function(e,t){a.handleLogin(e,t)},a.onLogout=function(){a.props.onLogout()},a.handleLogin=function(){var e=Object(m.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xt(t,a);case 3:document.location.reload(),e.next=17;break;case 6:if(e.prev=6,e.t0=e.catch(0),window.console.error(e.t0),!e.t0.response){e.next=17;break}e.t1=e.t0.response.status,e.next=400===e.t1?13:15;break;case 13:return window.alert(e.t0.response.data.message),e.abrupt("return");case 15:window.alert("Sorry, there was an unknown login problem, please try again.");case 16:window.alert("Sorry, there was an unknown login problem, please try again.");case 17:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(je.MetaTags,null,r.a.createElement("title",null,"Competency hub"),r.a.createElement("meta",{property:"og:title",content:"Competency hub"}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://competemcy.ebi.ac.uk"}),r.a.createElement("meta",{property:"og:image",content:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/themes/custom/ebi_academy/images/mastheads/CH_Jigsaw.jpg"}),r.a.createElement("meta",{property:"og:description",content:"The Competency Hub is a repository of competency frameworks that define the abilities required by professionals in a specific area of life sciences and relate them to training resources and career profiles"}),r.a.createElement("meta",{name:"description",content:"The Competency Hub is a repository of competency frameworks that define the abilities required by professionals in a specific area of life sciences and relate them to training resources and career profiles"}),r.a.createElement("meta",{property:"keywords",content:"competency, life sciences, career development, computational biology, bioinformatics"})),r.a.createElement(Oe.a,null,r.a.createElement("link",{rel:"canonical",href:this.props.location.pathname})),r.a.createElement("section",{className:"vf-u-fullbleed vf-u-background-color-ui--grey--light vf-u-padding__top--800"},r.a.createElement("h2",null,"Who is the Competency Hub for?"),r.a.createElement(vt,{frameworkDetails:Ge}),r.a.createElement("div",{className:"vf-u-padding__top--800"})),r.a.createElement("div",{className:"vf-u-margin__top--1200"}),r.a.createElement("div",null,r.a.createElement("h2",null,"Do more with the Competency Hub"),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(o.b,{to:"/develop-your-courses"},"Develop your courses")),r.a.createElement("p",null,"Use competency frameworks and career profiles to design your training.")),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(o.b,{to:"/documentation"},"Review API Documentation")),r.a.createElement("p",null,"Learn how to list frameworks and query framework data with our API.")),r.a.createElement("div",null,x.currently_logged_in_user.is_logged_in?r.a.createElement("div",null,r.a.createElement("h3",null,"You are logged-in"),r.a.createElement("p",null,"You can manage frameworks and competencies.")):r.a.createElement(D,{onSubmit:this.onLogin})))),r.a.createElement("div",{className:"vf-u-margin__top--1200"}),r.a.createElement("h2",null,"In association with"),r.a.createElement("div",{className:"vf-grid vf-grid__col-3"},Ge.map(function(e){return r.a.createElement(Ct,{framework:e})})),r.a.createElement("div",{className:"vf-u-margin__top--800"}),r.a.createElement(wt,null))}}]),t}(n.Component),At=Object(z.withSnackbar)(Dt),Tt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).activeRequests=new Y,a.competencyService=new Q,a.state={data:[],path:a.props.location.pathname.split("/"),competency:"",competencyUUID:"",competencyTitle:"",frameworkList:[],domainID:"",domainUuid:"",csrf:"",mapping:""},a.editDomain=a.editDomain.bind(Object(le.a)(a)),a.handleChange=a.handleChange.bind(Object(le.a)(a)),a.onTextChange=a.onTextChange.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.path[4],a="".concat(k,"/node/")+t+"/?_format=json",fetch(a).then(function(e){return e.json()}).then(function(e){r.setState({competency:e},r.setMappingText)}),n="".concat(k,"/api/version_manager/?_format=json&timestamp=").concat(Date.now()),fetch(n).then(function(e){return e.json()}).then(function(e){r.setState({frameworkList:e})});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setMappingText",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.competency).field_map_other_competency.length>0&&this.setState({mapping:t.field_map_other_competency[0].value});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"editDomain",value:function(e){var t=this.state.path[4],a=this.state.domainID,n=this.state.domainUuid,r=this.state.mapping;a||(a=this.state.competency.field_domain[0].target_id,n=this.state.competency.field_domain[0].target_uuid),this.competencyService.changeDomain(t,a,n,r),this.props.history.push("/framework/"+this.state.path[2]+"/manage/competencies"),e.preventDefault()}},{key:"onTextChange",value:function(e){this.setState({mapping:e.target.value})}},{key:"handleChange",value:function(e){var t=e.target.options[e.target.selectedIndex].dataset;this.setState({domainID:t.id,domainUuid:t.uuid})}},{key:"render",value:function(){var e=this,t="",a="",n="",c=this.state.competency,i=this.state.frameworkList,o=[],l=[];(i.length>0&&(console.log(this.state.frameworkList),i.map(function(t){return t.title.toLowerCase()===e.state.path[2]&&t.domains.map(function(e){return o.push(r.a.createElement("option",{key:e.id,"data-id":e.id,"data-uuid":e.uuid,value:e.id},e.title)),l.push({key:e.id,value:e.title}),null}),null})),c)&&(t=c.title[0].value,a=c.field_domain[0].target_id,l.length>0&&(n=l.find(function(e){return e.key===a}).value));return r.a.createElement("div",null,r.a.createElement("h2",null,"Change domain"),r.a.createElement("table",{className:"table hover stack"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h4",null,"Domain:")),r.a.createElement("td",null,r.a.createElement("h4",null,n))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h4",null,"Competency:")),r.a.createElement("td",null,r.a.createElement("h4",null,t))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("p",{className:"lead"},"Select the domain from the following list to change:"),r.a.createElement("form",{id:"changeDomainForm",onSubmit:this.editDomain.bind(this)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column large-11"},r.a.createElement("select",{value:this.state.domainID?this.state.domainID:a,onChange:this.handleChange},o),r.a.createElement("label",null,"Maps to competency/attribute from other framework",r.a.createElement("input",{type:"text",placeholder:"Framework (version), competency or attribute",name:"mapping",value:this.state.mapping,onChange:this.onTextChange.bind(this)})),r.a.createElement("input",{type:"submit",className:"button",value:"Save"})),r.a.createElement("div",{className:"column large-1"}))))))))}}]),t}(r.a.Component),It=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/competency/:id/settings",component:Tt}))},Rt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).activeRequests=new Y,a.competencyService=new Q,a.state={data:[],path:a.props.location.pathname.split("/"),attributeID:a.props.location.pathname.split("/")[6],frameworkName:a.props.location.pathname.split("/")[2],frameworkList:[],attributeType:"",attribute:"",competencyID:a.props.location.pathname.split("/")[4],competencyUUID:"",competencyTitle:"",attributeTypeID:"",attributeTypeUUID:"",frameworkData:[]},a.changeSettings=a.changeSettings.bind(Object(le.a)(a)),a.handleCompetencyChange=a.handleCompetencyChange.bind(Object(le.a)(a)),a.handleTypeChange=a.handleTypeChange.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.attributeID,a="".concat(k,"/node/")+t+"/?_format=json&timestamp=".concat(Date.now()),fetch(a).then(function(e){return e.json()}).then(function(e){r.setState({attribute:e})}),fetch("".concat(k,"/api/version_manager?_format=json")).then(function(e){return e.json()}).then(function(e){r.setState({frameworkList:e})}),e.next=6,this.competencyService.getVersionedDraftFramework(this.state.frameworkName);case 6:n=e.sent,this.setState({frameworkData:n});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"changeSettings",value:function(e){var t=this.state.attributeID,a=this.state.competencyID?this.state.competencyID:this.state.attribute.field_competency[0].target_id,n=this.state.competencyUUID?this.state.competencyUUID:this.state.attribute.field_competency[0].target_uuid,r=this.state.attributeTypeID?this.state.attributeTypeID:this.state.attribute.field_attribute_type[0].target_id,c=this.state.attributeTypeUUID?this.state.attributeTypeUUID:this.state.attribute.field_attribute_type[0].target_uuid;this.competencyService.changeAttributeSettings(t,a,n,r,c),this.props.history.push("/framework/"+this.state.path[2]+"/manage/competencies/"+this.props.location.pathname.split("/")[4]+"/manage-attributes"),e.preventDefault()}},{key:"handleCompetencyChange",value:function(e){var t=e.target.options[e.target.selectedIndex].dataset;this.setState({competencyID:t.id,competencyUUID:t.uuid})}},{key:"handleTypeChange",value:function(e){var t=e.target.options[e.target.selectedIndex].dataset;this.setState({attributeTypeID:t.id,attributeTypeUUID:t.uuid})}},{key:"render",value:function(){var e=this,t="",a="",n="",c="",i="",o=this.state.attribute,l=this.state.frameworkData,s=this.state.frameworkList,u=[],m=[],p=[],f=[];if(s&&s.map(function(t){return t.title.toLowerCase()===e.state.frameworkName&&t.attribute_types.map(function(e){return p.push(r.a.createElement("option",{key:e.id,"data-id":e.id,"data-uuid":e.uuid,value:e.id},e.title)),f.push({key:e.id,value:e.title}),null}),null}),l&&l.map(function(e){return e.domains.map(function(e){return e.competencies.map(function(e){return 0===e.archived&&(u.push(r.a.createElement("option",{key:e.id,"data-id":e.id,"data-uuid":e.uuid,value:e.id},e.title)),m.push({key:e.id,value:e.title})),null}),null}),null}),o){if(t=o.title[0].value,a=o.field_competency[0].target_id,c=o.field_attribute_type[0].target_id,m.length>0)n=m.find(function(e){return e.key===a}).value;if(f.length>0)i=f.find(function(e){return e.key===c}).value}return r.a.createElement("div",null,r.a.createElement("h2",null,"Change attribute settings"),r.a.createElement("h3",null,"Attribute: ",t),r.a.createElement("table",{className:"table hover stack"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Competency:"),r.a.createElement("td",null,n),r.a.createElement("td",{rowSpan:2},r.a.createElement("form",{id:"changeDomainForm",onSubmit:this.changeSettings.bind(this)},r.a.createElement("label",null,"Change competency:"),r.a.createElement("select",{value:this.state.competencyID?this.state.competencyID:a,onChange:this.handleCompetencyChange},u),r.a.createElement("label",null,"Change attribute type:"),r.a.createElement("select",{value:this.state.attributeTypeID?this.state.attributeTypeID:c,onChange:this.handleTypeChange},p),r.a.createElement("input",{type:"submit",className:"button",value:"Save"})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Attribute type:"),r.a.createElement("td",null,i)))))}}]),t}(r.a.Component),qt=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/competency/:cid/attribute/:aid/settings",component:Rt}))},Mt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).activeRequests=new Y,a.competencyService=new Q,a.state={resourceID:a.props.location.pathname.split("/")[2],attributeID:a.props.location.pathname.split("/")[4],resourceDetails:[],csrf:""},a.demap=a.demap.bind(Object(le.a)(a)),a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"demap",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 1034,a=[20,21],e.next=4,this.competencyService.demap(1034,a);case 4:e.sent;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(k,"/node/ ").concat(this.state.resourceID,"?_format=hal_json")).then(function(e){return e.json()}).then(function(t){e.setState({resourceDetails:t})});var t="".concat(k,"/rest/session/token");fetch(t).then(function(e){return e}).then(function(t){e.setState({csrf:t})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Are you sure you want to remove this mapping? This action cannot be undone!"),r.a.createElement("button",{className:"button",onClick:this.demap.bind(this)},"Yes"))}}]),t}(r.a.Component),Pt=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/training-resources/:resource/demap/:attribute",component:Mt}))},Ft=a(52),Lt=a.n(Ft),Bt=a(53),Ut=a.n(Bt),Vt=k.replace("https","http"),Ht=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"createProfile",value:function(e){var t=e.title,a=e.frameworkId,n=e.frameworkUuid,r=e.versionID,c=e.age,i=e.currentRole,o=e.gender,l=e.jobTitle,s=e.qualification,u=e.additionalInfo,m=e.fileid;return{_links:Object(S.a)({type:{href:"".concat(Vt,"/rest/type/node/profile")}},"".concat(Vt,"/rest/relation/node/profile/field_competency_framework"),{href:"".concat(Vt,"/node/").concat(a,"?_format=hal_json")}),title:[{value:t}],field_versions:[{target_id:r}],field_age:[{value:c}],field_current_role:[{value:i,format:"basic_html"}],field_gender:[{value:o}],field_job_title:[{value:l}],field_qualification_background:[{value:s}],field_additional_information:[{value:u}],field_image:[{target_id:m,description:"persona picture"}],field_publishing_status:[{value:"Draft"}],type:[{target_id:"profile"}],_embedded:Object(S.a)({},"".concat(Vt,"/rest/relation/node/profile/field_competency_framework"),[{_links:{self:{href:"".concat(Vt,"/node/").concat(a,"?_format=hal_json")},type:{href:"".concat(Vt,"/rest/type/node/competency_framework")}},uuid:[{value:n}],lang:"en"}])}}},{key:"editProfile",value:function(e,t,a,n,r,c,i,o,l,s){return{_links:{self:{href:"".concat(Vt,"/node/").concat(e,"?_format=json")},type:{href:"".concat(Vt,"/rest/type/node/profile")}},title:[{value:t}],field_age:[{value:a}],field_current_role:[{value:n,format:"basic_html"}],field_gender:[{value:r}],field_job_title:[{value:c}],field_qualification_background:[{value:i,format:"basic_html"}],field_additional_information:[{value:o,format:"basic_html"}],field_image:[{target_id:s||null}],field_publishing_status:[{value:l}],type:[{target_id:"profile"}]}}},{key:"mapProfile",value:function(e,t){var a=[];return t.forEach(function(e){a.push({competency:e.competency,expertise:e.expertise,attributes:e.attributes.join()})}),{type:[{target_id:"article"}],field_item:[{value:e}],field_profile_mapping:a}}}]),e}(),Jt=a(136),zt=a.n(Jt),Gt=a(186),Wt=a.n(Gt),Qt=function(){function e(){if(Object(p.a)(this,e),this.http=new j,e.instance)return this.instance;e.instance=this}return Object(f.a)(e,[{key:"createProfile",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("/node?_format=hal_json",Ht.createProfile(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"editProfile",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r,c,i,o,l,s,m){var p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/node/".concat(t,"?_format=hal_json"),Ht.editProfile(t,a,n,r,c,i,o,l,s,m));case 2:return p=e.sent,e.abrupt("return",p.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,c,i,o,l,s,u){return e.apply(this,arguments)}}()},{key:"mapProfile",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.patch("/api/permedcoe/2.0/profiles?_format=json",Ht.mapProfile(t,a),"json");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"createGuestProfile",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r,c,i,o,l,s,m,p){var f,d,h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:f=[],(d=JSON.parse(localStorage.getItem("guestProfile")))&&d.profile_mapping&&(f=d.profile_mapping),(h={frameworkName:t,frameworkId:a,versionNumber:n,title:r,age:c,current_role:i,gender:o,job_title:l,qualification_background:s,additional_information:m,image:p}).profile_mapping=f,localStorage.setItem("guestProfile",JSON.stringify(h)),console.log("Profile service called for Guest user");case 7:case"end":return e.stop()}},e)}));return function(t,a,n,r,c,i,o,l,s,u,m){return e.apply(this,arguments)}}()},{key:"mapProfileGuest",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=JSON.parse(localStorage.getItem("guestProfile"))).profile_mapping=t,localStorage.setItem("guestProfile",JSON.stringify(a));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"mapDownloadProfile",value:function(e){localStorage.setItem("ProfileDownloadData",JSON.stringify(e))}},{key:"downloadProfile",value:function(e){var t=new zt.a("p","pt","a4");t.setFont("helvetica");var a,n=Wt()().format("MMMM D, Y"),r=Wt()().format("hh:mm:ss"),c=t.internal.pageSize.getWidth(),i=t.internal.pageSize.getHeight(),o=t.internal.pageSize.getWidth()-20,l=5*(.07383*c)+4*(.01036727272*c),s=c-l-20,u=180/((e.selectedFile?e.selectedFileData[0].width:180)/(e.selectedFile?e.selectedFileData[0].height:150)),m=30;if(t.setFontType("normal"),t.setFontSize(22),t.text(20,30,"EMBL-EBI Competency Profile"),e.frameworkLogoData){var p=100/((e.frameworkLogoData[0]?e.frameworkLogoData[0].width:100)/(e.frameworkLogoData[0]?e.frameworkLogoData[0].height:30)),f=e.frameworkLogoData[0].src;t.addImage(f,"PNG",o-100,5,100,p,"","SLOW")}if(m+=50,t.setFontSize(18),t.text(20,m,e.title+" - "+e.jobTitle),e.selectedFile){var d="image/jpeg"===e.selectedFile.type?"JPEG":"PNG",h=e.selectedFileData[0].src;t.addImage(h,d,20,m+30,180,u,"","SLOW")}if(e.gender||e.age){var v=e.gender?e.age?e.gender+", ":e.gender:"",g=e.age?e.age+" years":"";t.setFontSize(12),t.text(20,u+m+60,v+g)}if(m+=40,e.qualification){t.setFontSize(16),t.text(l,m,"Qualifications & background"),m+=20,t.setFontSize(12);var b=t.splitTextToSize(e.qualification,s);a=t.getTextDimensions(b),t.fromHTML(e.qualification,l,m,{width:s}),m+=30}if(e.currentRole){t.setFontSize(16),t.text(l,a.h+m,"Activities and current role"),m+=20,t.setFontSize(12);var E=t.splitTextToSize(e.currentRole,s);m=a.h+m,t.text(l,m,E)}t.setFontSize(9),t.text(20,i-20,"Profile created on "+n+" at "+r);var y=e.jobTitle.split(" ").join("_");t.save(y.toLowerCase()+".pdf")}}]),e}(),Yt=function(e){var t=new Qt,a=Object(n.useState)(""),c=Object(F.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)(""),s=Object(F.a)(l,2),p=s[0],f=s[1],d=Object(n.useState)(""),h=Object(F.a)(d,2),v=h[0],g=h[1],b=Object(n.useState)(""),E=Object(F.a)(b,2),y=E[0],_=E[1],w=Object(n.useState)(),N=Object(F.a)(w,2),O=N[0],S=N[1],C=Object(n.useState)([]),D=Object(F.a)(C,2),A=D[0],T=D[1],I=Object(n.useState)(),R=Object(F.a)(I,2),q=R[0],M=R[1],P=Object(n.useState)(),L=Object(F.a)(P,2),B=L[0],U=L[1],V=Object(n.useState)(),H=Object(F.a)(V,2),J=H[0],z=H[1],G=Object(n.useState)(""),W=Object(F.a)(G,2),Q=W[0],Y=W[1],K=Object(n.useState)(""),X=Object(F.a)(K,2),Z=X[0],$=X[1],ee=Object(n.useState)(""),te=Object(F.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(),ce=Object(F.a)(re,2),ie=ce[0],oe=ce[1],le=e.location.pathname.split("/")[2],se=e.location.pathname.split("/")[3],ue=Object(n.useState)(),me=Object(F.a)(ue,2),pe=me[0],fe=me[1],de=Object(n.useState)(),he=Object(F.a)(de,2),ve=he[0],ge=he[1],be=new j;Object(n.useEffect)(function(){var e=function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r,c,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=be.get("".concat(k,"/api/").concat(le,"/").concat(se,"?_format=json&timestamp=").concat(Date.now())).then(function(e){return e.data}),a=be.get("".concat(k,"/api/version_manager?_format=json&timestamp=").concat(Date.now())).then(function(e){return e.data}),e.next=5,Promise.all([t,a]);case 5:n=e.sent,r=Object(F.a)(n,2),c=r[0],i=r[1],oe(c),ge(i.filter(function(e){return e.title.toLowerCase()===le})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}();!function(){var e=JSON.parse(localStorage.getItem("ProfileDownloadData"));fe(e),e&&(o(e.title),Y(e.jobTitle),f(e.age),_(e.gender),$(e.qualification),g(e.currentRole),ne(e.additionalInfo),e.selectedFileData[0]&&(T(e.selectedFileData),M(e.selectedFileData[0].src)))}(),e()},[O,le,se,be]);var Ee=function(){var a=Object(m.a)(u.a.mark(function a(n){var r,c,o,l,s,m,f,d,h;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),r=ie[0].nid,c=ie[0].title,o=ie[0].uuid,console.log(ve),l=ve[0].versions.find(function(e){return"live"===e.status}),s=l.id,m=null,!(!i||!Q||i.length<2||Q.length<3||J||B)){a.next=11;break}a.next=25;break;case 11:if(0!==x.currently_logged_in_user.roles.length){a.next=16;break}f=JSON.parse(localStorage.getItem("ProfileDownloadData")),t.mapDownloadProfile({title:i,frameworkId:r,frameworkName:c,frameworkUuid:o,age:p,currentRole:v,gender:y,jobTitle:Q,qualification:Z,additionalInfo:ae,selectedFile:O,selectedFileData:A,mapping:f?f.mapping:[],mappingAttributes:f?f.mappingAttributes:[]}),a.next=25;break;case 16:if(!x.currently_logged_in_user.roles.includes("framework_manager")){a.next=25;break}if(!O){a.next=21;break}return d=localStorage.getItem("csrf_token"),a.next=21,fetch(k+"/file/upload/node/profile/field_image?_format=hal_json",{credentials:"include",method:"POST",cookies:"x-access-token",headers:{accept:"application/octet-stream","Content-Type":"application/octet-stream","X-CSRF-Token":d,"Content-Disposition":'file; filename="persona_picture.png"'},body:O}).then(function(e){return e.json()}).then(function(e){m=e.fid[0].value});case 21:return a.next=23,t.createProfile({title:i,frameworkId:r,frameworkUuid:o,versionID:s,age:p,currentRole:v,gender:y,jobTitle:Q,qualification:Z,additionalInfo:ae,fileid:m});case 23:h=a.sent,e.history.push("/framework/".concat(c.toLowerCase(),"/").concat(se,"/profile/map/").concat(h.nid[0].value));case 25:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}();var ye=function(){var e="a reference";return 0===x.currently_logged_in_user.roles.length&&(e="your"),e}(),_e="small callout alert",ke="small callout alert",we="Name is required and must be at least 2 characters long",Ne="Job Title is required and must be at least 3 characters long";return i&&i.length>1&&(we="",_e=""),Q&&Q.length>2&&(Ne="",ke=""),r.a.createElement("div",null,r.a.createElement("h2",null,"Create ",ye," profile"),r.a.createElement("form",{className:"vf-form",id:"profile_create_form",onSubmit:Ee},r.a.createElement("div",{className:"vf-grid vf-grid__col-6"},r.a.createElement("div",{className:"vf-grid__col--span-2"},r.a.createElement("span",null,r.a.createElement("strong",null,"Name"),r.a.createElement("input",{type:"text",id:"title",placeholder:"Name",onChange:function(e){return o(e.target.value)},defaultValue:pe?pe.title:i,className:"vf-form__input"}),r.a.createElement("div",{className:_e},r.a.createElement("i",null,we))),r.a.createElement("span",null,r.a.createElement("strong",null,"Image"),r.a.createElement("input",{type:"file",id:"fileupload",onChange:function(e){if(e.target.files&&0!==e.target.files.length){e.target.files[0].size>2097152?U(1):U(void 0),"image/jpeg"!==e.target.files[0].type&&"image/png"!==e.target.files[0].type?z(1):z(void 0);var t=new FileReader;t.addEventListener("load",function(){M(t.result);var e=new Image;e.src=t.result,e.addEventListener("load",function(){e.width=this.width,e.height=this.height,T([{src:this.src,width:this.width,height:this.height}])})},!1),e.target.files&&t.readAsDataURL(e.target.files[0]),S(e.target.files[0])}else S(void 0)}})),r.a.createElement("span",null,r.a.createElement("img",{alt:"",id:"imgpreview_image",width:"100px",src:q,height:"100px",style:{border:"1px solid #ccc",padding:"5px",width:"30%"}}),q?r.a.createElement("div",null,r.a.createElement("button",{className:"vf-button vf-button--secondary vf-button--sm",href:"#",onClick:function(e){return function(e){e.preventDefault(),S(void 0),M(void 0),z(void 0),U(void 0),document.getElementById("fileupload").value=""}(e)}},"Clear image x")):"",B?r.a.createElement("div",{className:"small callout alert"},r.a.createElement("em",null," Image size should not be more than 2 MB ")," "):"",J?r.a.createElement("div",{className:"small callout alert"},r.a.createElement("em",null," Only JPG or PNG images are allowed ")," "):""),r.a.createElement("span",null,r.a.createElement("strong",null,"Age (in years)"),r.a.createElement("input",{type:"number",id:"age",placeholder:"Age",width:4,onChange:function(e){return f(e.target.value)},defaultValue:pe?pe.age:p,className:"vf-form__input"})),r.a.createElement("span",null,r.a.createElement("strong",null,"Gender"),r.a.createElement("select",{onChange:function(e){return _(e.target.value)},defaultValue:pe?pe.gender:y,className:"vf-form__input"},r.a.createElement("option",{value:"None"},"None"),r.a.createElement("option",{value:"Male"},"Male"),r.a.createElement("option",{value:"Female"},"Female"),r.a.createElement("option",{value:"Nonbinary"},"Nonbinary"),r.a.createElement("option",{value:"Prefernottosay"},"Prefer not to say")))),r.a.createElement("div",{className:"vf-grid__col--span-4"},r.a.createElement("span",null,r.a.createElement("strong",null,"Job title"),r.a.createElement("input",{type:"text",id:"jobTitle",placeholder:"Job title",onChange:function(e){return Y(e.target.value)},defaultValue:pe?pe.jobTitle:Q,className:"vf-form__input"}),r.a.createElement("div",{className:ke},r.a.createElement("i",null,Ne))),r.a.createElement("span",null,r.a.createElement("strong",null,"Qualification and background"),r.a.createElement(Lt.a,{editor:Ut.a,data:Z,onInit:function(e){},onChange:function(e,t){var a=t.getData();$(a)},className:"vf-form__input"})),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",null,"Activities of current role"),r.a.createElement(Lt.a,{editor:Ut.a,data:v,onInit:function(e){},onChange:function(e,t){var a=t.getData();g(a)},className:"vf-form__input"})),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",null,"Additional information"),r.a.createElement(Lt.a,{editor:Ut.a,data:ae,onInit:function(e){},onChange:function(e,t){var a=t.getData();ne(a)},className:"vf-form__input"})),r.a.createElement("br",null))),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement(function(){var e="Map Competencies";return x.currently_logged_in_user.roles.length>0&&(e="Map Competencies"),r.a.createElement("input",{type:"submit",className:"vf-button vf-button--sm vf-button--primary",value:e})},null)),r.a.createElement("div",null))))},Kt=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profile/create",component:Yt}))},Xt=function(e){var t=e.modalOpen;return r.a.createElement("div",null,r.a.createElement(B.a,{isOpen:t,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"70%",backgroundColor:"#f1f1f1"}}},r.a.createElement("button",{style:{float:"right"},onClick:function(t){e.closeModal()}},r.a.createElement("i",{className:"icon icon-common icon-window-close"})),r.a.createElement("h2",null,"Help"),r.a.createElement("h4",null,"Create/edit your profile"),r.a.createElement("p",{className:"lead"},"Fill the Create/Edit Profile form in order to create your own user profile. The profile will be saved in your browser so that you can print it or compare it with other profiles."),r.a.createElement("h4",null,"Map competencies to your profile"),r.a.createElement("p",{className:"lead"},"In the second step, select your level of expertise in each competency and choose the knowledge, skills and attitudes that are applicable to you."),r.a.createElement("h4",null,"Compare your profile"),r.a.createElement("p",{className:"lead"},"Compare the profile that you created with one of the reference profiles in the site."),r.a.createElement("h4",null,"Download your profile"),r.a.createElement("p",{className:"lead"},"Click the print button and download the profile")))},Zt=function(e){var t=Object(g.g)(),a=new Qt,c=Object(n.useState)(""),i=Object(F.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(""),p=Object(F.a)(s,2),f=p[0],d=p[1],h=Object(n.useState)(""),v=Object(F.a)(h,2),b=v[0],E=v[1],y=Object(n.useState)(""),_=Object(F.a)(y,2),w=_[0],N=_[1],O=Object(n.useState)(),S=Object(F.a)(O,2),C=S[0],D=S[1],A=Object(n.useState)([]),T=Object(F.a)(A,2),I=T[0],R=T[1],q=Object(n.useState)(),M=Object(F.a)(q,2),P=M[0],L=M[1],B=Object(n.useState)(),U=Object(F.a)(B,2),V=U[0],H=U[1],J=Object(n.useState)(),z=Object(F.a)(J,2),G=z[0],W=z[1],Q=Object(n.useState)(""),Y=Object(F.a)(Q,2),K=Y[0],X=Y[1],Z=Object(n.useState)(""),$=Object(F.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(""),ne=Object(F.a)(ae,2),re=ne[0],ce=ne[1],ie=Object(n.useState)(),oe=Object(F.a)(ie,2),le=oe[0],se=oe[1],ue=e.location.pathname.split("/")[2],me=e.location.pathname.split("/")[3],pe=Object(n.useState)(),fe=Object(F.a)(pe,2),de=fe[0],he=fe[1],ve=Object(n.useState)(!1),ge=Object(F.a)(ve,2),be=ge[0],Ee=ge[1],ye=new j,_e=JSON.parse(localStorage.getItem("guestProfile"));Object(n.useEffect)(function(){var e=function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:he(_e),l(_e.title),X(_e.job_title),d(parseInt(_e.age)),N(_e.gender),te(_e.qualification_background),E(_e.current_role),ce(_e.additional_information),_e.image[0]&&(R(_e.image),L(_e.image[0].url));case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=ye.get("".concat(k,"/api/").concat(ue,"/").concat(me,"?_format=json&timestamp=").concat(Date.now())).then(function(e){return e.data}),a=ye.get("".concat(k,"/api/version_manager?_format=json&timestamp=").concat(Date.now())).then(function(e){return e.data}),e.next=5,Promise.all([t,a]);case 5:n=e.sent,r=Object(F.a)(n,1),c=r[0],se(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(){return e.apply(this,arguments)}}();_e&&!de&&e(),le||t()},[C,ue,me,ye,_e,le,de]);var ke=function(){var e=Object(m.a)(u.a.mark(function e(n){var r,c,i,l,s,m,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=le[0].nid,c=me,!(!o||!K||o.length<2||K.length<3||G||V)){e.next=7;break}return e.abrupt("return",0);case 7:0===x.currently_logged_in_user.roles.length&&(i=b||"",l=K||"",s=ee||"",m=re||"",p=I||"",a.createGuestProfile(ue,r,c,o,f,i,w,l,s,m,p),t.push("/framework/".concat(ue,"/").concat(me,"/profile/map/guest/")));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var we=function(){var e="a reference";return 0===x.currently_logged_in_user.roles.length&&(e="your"),e}(),Ne="small callout alert",je="small callout alert",xe="Name is required and must be at least 2 characters long",Oe="Job Title is required and must be at least 3 characters long";o&&o.length>1&&(xe="",Ne=""),K&&K.length>2&&(Oe="",je="");return r.a.createElement("div",null,r.a.createElement("h2",null,"Create / Edit ",we," profile"),r.a.createElement("div",{className:"callout warning"},r.a.createElement("i",{className:"icon icon-common icon-exclamation-triangle"})," Your profile will be saved in your browser.",r.a.createElement("button",{className:"vf-button vf-button--secondary vf-button--sm",onClick:function(e){return function(e){e.preventDefault(),Ee(!0)}(e)}},"Get help"),r.a.createElement(Xt,{modalOpen:be,closeModal:function(){Ee(!1)}})),r.a.createElement("form",{className:"vf-form",id:"profile_create_form",onSubmit:ke},r.a.createElement("div",{className:"vf-grid vf-grid__col-6"},r.a.createElement("div",{className:"vf-grid__col--span-2"},r.a.createElement("span",null,r.a.createElement("strong",null,"Name"),r.a.createElement("input",{type:"text",id:"title",placeholder:"Name",onChange:function(e){return l(e.target.value)},defaultValue:de?de.title:"",className:"vf-form__input"}),r.a.createElement("div",{className:Ne},r.a.createElement("i",null,xe))),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("span",null,r.a.createElement("strong",null,"Image"),r.a.createElement("input",{type:"file",id:"fileupload",onChange:function(e){if(e.target.files&&0!==e.target.files.length){e.target.files[0].size>2097152?H(1):H(void 0),"image/jpeg"!==e.target.files[0].type&&"image/png"!==e.target.files[0].type?W(1):W(void 0);var t=new FileReader;t.addEventListener("load",function(){L(t.result);var e=new Image;e.src=t.result,e.addEventListener("load",function(){e.width=this.width,e.height=this.height,R([{url:this.src}])})},!1),e.target.files&&t.readAsDataURL(e.target.files[0]),D(e.target.files[0])}else D(void 0)}})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("span",null,r.a.createElement("img",{alt:"",id:"imgpreview_image",width:"100px",src:P,height:"100px",style:{border:"1px solid #ccc",padding:"5px",width:"30%"}}),P?r.a.createElement("div",null,r.a.createElement("button",{className:"vf-button vf-button--secondary vf-button--sm",href:"#",onClick:function(e){return function(e){e.preventDefault(),D(void 0),L(void 0),W(void 0),H(void 0),R(void 0),document.getElementById("fileupload").value=""}(e)}},"Clear image x")):"",r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),V?r.a.createElement("div",{className:"small callout alert"},r.a.createElement("em",null," Image size should not be more than 2 MB ")," "):"",G?r.a.createElement("div",{className:"small callout alert"},r.a.createElement("em",null," Only JPG or PNG images are allowed ")," "):""),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("span",null,r.a.createElement("strong",null,"Age (in years)"),r.a.createElement("input",{type:"number",id:"age",placeholder:"Age",width:4,onChange:function(e){return d(e.target.value)},defaultValue:de?de.age:"",className:"vf-form__input"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("span",null,r.a.createElement("strong",null,"Gender"),r.a.createElement("select",{onChange:function(e){return N(e.target.value)},value:w||"-None-",className:"vf-form__select"},r.a.createElement("option",{value:"None"},"None"),r.a.createElement("option",{value:"Male"},"Male"),r.a.createElement("option",{value:"Female"},"Female"),r.a.createElement("option",{value:"Nonbinary"},"Nonbinary"),r.a.createElement("option",{value:"Prefernottosay"},"Prefer not to say")))),r.a.createElement("div",{className:"vf-grid__col--span-4"},r.a.createElement("span",null,r.a.createElement("strong",null,"Job title"),r.a.createElement("input",{type:"text",id:"jobTitle",placeholder:"Job title",onChange:function(e){return X(e.target.value)},defaultValue:de?de.job_title:"",className:"vf-form__input"}),r.a.createElement("div",{className:je},r.a.createElement("i",null,Oe))),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("span",null,r.a.createElement("strong",null,"Qualification and background"),r.a.createElement(Lt.a,{editor:Ut.a,data:_e?_e.qualification_background:"",onInit:function(e){},onChange:function(e,t){var a=t.getData();te(a)},className:"vf-form__input"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("span",null,r.a.createElement("strong",null,"Activities of current role"),r.a.createElement(Lt.a,{editor:Ut.a,data:_e?_e.current_role:"",onInit:function(e){},onChange:function(e,t){var a=t.getData();E(a)},className:"vf-form__input"})),r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("span",null,r.a.createElement("strong",null,"Additional information"),r.a.createElement(Lt.a,{editor:Ut.a,data:_e?_e.additional_information:"",onInit:function(e){},onChange:function(e,t){var a=t.getData();ce(a)},className:"vf-form__input"})))),r.a.createElement(function(){var e="Save and continue";return 0===x.currently_logged_in_user.roles.length&&(e="Map Competencies"),r.a.createElement("input",{type:"submit",className:"vf-button vf-button--primary vf-button--sm",value:e})},null)))},$t=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profile/create/guest",component:Zt}))},ea=a(62),ta={content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px",width:"500px",height:"250px",margin:"auto"},overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"}},aa=function(e){var t=e.includeGuestProfile,a=Object(n.useState)(!1),c=Object(F.a)(a,2),i=c[0],o=c[1],l=e.profile,s=e.profiles;return r.a.createElement("div",null,e.linkVariant?r.a.createElement("button",{className:"vf-button vf-button--link",onClick:function(){o(!0)}},"Compare another profile"):r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm",onClick:function(){o(!0)}},"Compare profile"),l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(B.a,{isOpen:i,contentLabel:"Example Modal",className:"Modal",overlayClassName:"Overlay",style:ta,onRequestClose:function(){o(!1)}},r.a.createElement("h2",null,"Compare profile"," ",r.a.createElement("span",{style:{float:"right",cursor:"pointer",fontWeight:"normal"},onClick:function(){o(!1)}},"X")),r.a.createElement("p",null,"Select a profile to compare"," ",r.a.createElement("strong",null,l.job_title," with:")),r.a.createElement("form",null,r.a.createElement("select",{className:"vf-form__select",id:"vf-form__select",onChange:function(t){e.setSelectedProfileId(t.target.value)}},r.a.createElement("option",{value:"0"},"Select role"),localStorage.getItem("guestProfile")&&t?r.a.createElement("option",{value:"guest"},JSON.parse(localStorage.getItem("guestProfile")).job_title):"",s?s.map(function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:e.id},e.job_title))}):""),r.a.createElement("span",{style:{color:"red"}},e.comparisonError)),r.a.createElement("div",{className:"vf-u-margin__top--200"}),r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm",onClick:function(t){o(!1),e.redirectToCompare(t)}},"Compare")))):"")},na=function(e){var t=Object(g.g)(),a=e.location.pathname.split("/")[2],c=e.location.pathname.split("/")[3],i=e.location.pathname.split("/")[6],l=Object(n.useState)(),s=Object(F.a)(l,2),p=s[0],f=s[1],d=Object(n.useState)(),h=Object(F.a)(d,2),v=h[0],b=h[1],E=Object(n.useState)(),y=Object(F.a)(E,2),_=y[0],w=y[1],N=Object(n.useState)(),j=Object(F.a)(N,2),O=j[0],S=j[1],C=Object(n.useState)(),D=Object(F.a)(C,2),A=D[0],T=D[1],I=Object(n.useState)(!1),R=Object(F.a)(I,2),q=R[0],M=(R[1],Object(n.useState)(null)),P=Object(F.a)(M,2),L=P[0],B=P[1],U=Object(n.useState)([]),H=Object(F.a)(U,2),J=H[0],z=H[1],G=x.currently_logged_in_user.is_logged_in?"&timestamp="+Date.now():"",W="",Q=[],Y=[],K="",X=[],Z=x.currently_logged_in_user.roles,$=x.currently_logged_in_user.username,ee="";Object(n.useEffect)(function(){(function(){var t=Object(m.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"/profiles/?_format=json&source=competencyhub&timestamp=").concat(G)).then(function(e){return e.json()}).then(function(t){var a=t.filter(function(t){return t.id!==e.match.params.id&&"Live"===t.publishing_status});b(a)});case 2:return t.next=4,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"/profiles?_format=json&id=").concat(i,"&source=competencyhub&timestamp=").concat(G)).then(function(e){return e.json()}).then(function(e){f(e)});case 4:return t.next=6,fetch("".concat(k,"/api/version_manager?_format=json&source=competencyhub&").concat(G)).then(function(e){return e.json()}).then(function(e){T(e)});case 6:return t.next=8,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"?_format=json&source=competencyhub&timestamp=").concat(G)).then(function(e){return e.json()}).then(function(e){S(e)});case 8:if(!$){t.next=11;break}return t.next=11,fetch("".concat(k,"/api/authorisation/").concat($,"?_format=json"),{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(e){z(e)});case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()},[i,c,a,$,q]);var te=function(e){if(X){var t=X.find(function(t){return t.competency===e});if(!t)return"";if(A)return A.find(function(e){return e.title.toLowerCase()===a}).expertise_levels.find(function(e){return e.id===t.expertise})}},ae=function(e){var t=A.find(function(e){return e.title.toLowerCase()===a}).expertise_levels.length;return e?100/((t-1)/e.rating_level):0};return r.a.createElement("div",{key:"unique"},(A&&(A.map(function(e,t){return e.title.toLowerCase()===a&&(K=e.title,e.expertise_levels.map(function(e,t){return Q.push(r.a.createElement("li",{key:t,className:"vf-list__item",style:{textAlign:"center"}},r.a.createElement("div",{"data-tip":e.description?e.description:"NA","data-html":!0,"data-type":"info","data-multiline":!0},r.a.createElement("span",{className:"vf-badge vf-badge--tertiary"}," ",e.rating_level," ")," ",r.a.createElement("span",null," ",e.title)),r.a.createElement(ea.a,{className:"tooltip-custom",style:{color:"fff"}})))})),null}),A.map(function(e){return e.title.toLowerCase()===a&&e.attribute_types.map(function(e){return Y[e.id]=e.title}),null})),p&&(X=p.profile_mapping,document.getElementById("bc_location").innerText=p.title+" - "+p.job_title),void(O&&(W=O.map(function(e,t){return e.domains.map(function(e,a){return r.a.createElement(r.a.Fragment,{key:t+a},r.a.createElement("div",{key:a},r.a.createElement("div",null,r.a.createElement("div",{class:"vf-u-padding__top--800"}),r.a.createElement("h4",null,e.title)," ",r.a.createElement("span",{style:{visibility:"hidden"}},ee+=e.title+","))),r.a.createElement("div",null,r.a.createElement("div",null,e.competencies.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("details",{className:"vf-details",close:!0},r.a.createElement("summary",{className:"vf-details--summary"},e.title),Y.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("div",null),r.a.createElement("ul",{className:"vf-list"},r.a.createElement("div",null,r.a.createElement("strong",null," ",t," ")),e.attributes.filter(function(e){return e.type===t}).map(function(e,t){return r.a.createElement("li",{key:t,className:"vf-list__item"},r.a.createElement("span",{style:{marginRight:"20px"}},function(e){if(X)return X.find(function(t){return t.attributes.find(function(t){return t===e})})}(e.id)?r.a.createElement("i",{className:"icon icon-common icon-check"}):"-"),r.a.createElement("span",null,e.title))})))}))),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("div",{className:"fillerbg"},r.a.createElement("div",{className:"fillerRight",style:{width:ae(te(e.id))+"%",display:"flow-root"}},r.a.createElement("span",{style:{float:0===ae(te(e.id))?"none":"right"},className:"rating_level_number"},te(e.id)?te(e.id).rating_level:0))))))}))))})})))),p?r.a.createElement(r.a.Fragment,null,r.a.createElement(je.MetaTags,null,r.a.createElement("title",null,"".concat(p.title," - ").concat(p.job_title)),r.a.createElement("meta",{property:"og:title",content:"".concat(p.title," - ").concat(p.job_title)}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://competency.ebi.ac.uk".concat(e.history.location.pathname)}),r.a.createElement("meta",{property:"og:image",content:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/themes/custom/ebi_academy/images/mastheads/CH_Jigsaw.jpg"}),r.a.createElement("meta",{property:"og:description",content:"Career profiles describe the background and activities of a specific professional role and list the competencies that a person in that role should have and at which level they are required"}),r.a.createElement("meta",{name:"description",content:"Career profiles describe the background and activities of a specific professional role and list the competencies that a person in that role should have and at which level they are required"}),r.a.createElement("meta",{property:"keywords",content:"career profile, career development, ".concat(ee)})),r.a.createElement(Oe.a,null,r.a.createElement("link",{rel:"canonical",href:e.location.pathname})),r.a.createElement("div",{key:i,id:"profile"},r.a.createElement("div",{style:{float:"right"}},Z.includes("framework_manager")&&J.length>0&&J.includes(K)?r.a.createElement("ul",null,r.a.createElement("li",{className:"profile_navigation"},r.a.createElement(o.b,{className:"vf-button vf-button--primary vf-button--sm",to:"/framework/".concat(a,"/").concat(c,"/profile/edit/").concat(i)},"Edit overview",r.a.createElement("i",{className:"icon icon-common icon-pencil-alt"}))),r.a.createElement("li",{className:"profile_navigation"},r.a.createElement(o.b,{className:"vf-button vf-button--primary vf-button--sm",to:"/framework/".concat(a,"/").concat(c,"/profile/map/").concat(i)},"Map competencies"," ",r.a.createElement("i",{className:"icon icon-common icon-cog"})," "))):r.a.createElement(aa,{profiles:v,profile:p,includeGuestProfile:!0,comparisonError:L,setSelectedProfileId:function(e){w(e)},redirectToCompare:function(){_?t.push("/framework/".concat(a,"/").concat(c,"/profiles/compare/").concat(p.id,"/").concat(_)):B("Select a role to compare")}})),r.a.createElement("h1",{style:{marginTop:"1em",marginBottom:"1em"},"data-profileid":"1"},p.title," - ",p.job_title),r.a.createElement("div",{className:p.publishing_status+" embl-grid"},r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("img",{alt:"",style:{display:"block",maxWidth:"200px"},src:p.image[0]?p.image[0].url:"",width:"auto",height:"auto",loading:"lazy"})),r.a.createElement("p",null),r.a.createElement("p",{style:{textAlign:"center"}},"None"!==p.gender?r.a.createElement("div",null,r.a.createElement("p",null,p.gender&&"Prefernottosay"===p.gender?r.a.createElement("p",null," Gender: Prefer not to say "):""),r.a.createElement("p",null,p.gender&&"Prefernottosay"!==p.gender?r.a.createElement("p",null," Gender: ",p.gender," "):"")):"",p.age?p.age+" years":"")),r.a.createElement("div",null,r.a.createElement("h2",null,"Qualification and background"),r.a.createElement("div",null,p.qualification_background?V()(p.qualification_background):""),r.a.createElement("h2",null,"Activities of current role"),r.a.createElement("div",null,p.current_role?V()(p.current_role):""),r.a.createElement("div",null,p.additional_information?V()(p.additional_information):""))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-3"}," ",r.a.createElement("h3",{style:{marginTop:"25px"}},K," ",c," / Competencies")),r.a.createElement("div",{className:"column medium-9 "})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-12"},r.a.createElement("ul",{className:"vf-list legend-inline",style:{float:"right"}},Q))),r.a.createElement("hr",null),W)):"Loading profile",r.a.createElement("form",{onSubmit:function(e){window.print()}},r.a.createElement("div",{className:"submit_fixed"},r.a.createElement("button",{className:"vf-button vf-button--secondary",type:"submit"},"Print ",r.a.createElement("i",{className:"icon icon-common icon-print"})),r.a.createElement("p",{style:{paddingTop:"30px"}},"[Please enable background graphics in the print preview in order to get better print output]"))))},ra=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profile/view/:id/:alias",component:na}))},ca=(a(392),function(e){Object(g.g)();var t=e.frameworkName,a=e.frameworkVersion,n=(e.isGuestProfile,e.profile1),c=e.profile2,i=e.framework,o=e.frameworkInfo,l="",s=[],u=[],m=[],p="",f=[],d=[],h=[],v=[],b="",E=[],y=function(e,a){var n=("profile1"===a?f:d).find(function(t){return t.competency===e});if(!n)return null;if(o){var r=o.find(function(e){return e.title.toLowerCase()===t}),c=r.expertise_levels.find(function(e){return e.id===n.expertise});return b=r.expertise_levels.length,c}},_=function(e,t){var a="";if(a="profile1"===t?n.profile_mapping:c.profile_mapping)return!!a.find(function(t){return t.attributes.find(function(t){return t===e})})};n&&(v[0]={key:n.id,label:n.title}),c&&(v[1]={key:c.id,label:c.title});return r.a.createElement("div",{id:""},function(){o&&(o.map(function(e){return e.title.toLowerCase()===t&&(p=e.title,e.expertise_levels.map(function(e,t){return h[t]=e.id})),null}),o.map(function(e){return e.title.toLowerCase()===t&&e.attribute_types.map(function(e){return m[e.id]=e.title}),null}));var e=0;s.map(function(t,a){return u.push("<li class='legend'>  <div class='legend_number'> "+e+"</div>"+t+"</li>"),e++,null}),n&&(f=n.profile_mapping),c&&(d=c.profile_mapping),o&&o.map(function(e){return e.title===t&&(e.expertise_levels.map(function(e,t){return h[t]=e.id,null}),b=e.expertise_levels.length),null}),i&&(l=i.map(function(e,t){return e.domains.map(function(e,t){return e.competencies.map(function(e,t){var a=y(e.id,"profile1"),n=y(e.id,"profile2");a&&n?E.push(a.rating_level<n.rating_level?e.id:null):a||n?!a&&n&&E.push(e.id):E.push(null);var c=a?100/((b-1)/a.rating_level):0,i=100-c;i=100===i?88:i;var o=n?100/((b-1)/n.rating_level):0,l=0===o?"none":"right";return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"vf-grid vf-grid__col-5"},r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("span",{className:"competency_title"}," ",e.title.length>150?e.title.split(" ").splice(0,18).join(" ")+" ..":e.title)),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("div",{className:"fillerbg"},r.a.createElement("div",{className:"fillerLeft",style:{width:c+"%",marginLeft:i+"%"}},r.a.createElement("span",{style:{position:"relative"},className:"rating_level_number"},a?a.rating_level:0)))),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("div",{className:"fillerbg"},r.a.createElement("div",{className:"fillerRight",style:{width:o+"%",display:"flow-root"}},r.a.createElement("span",{style:{float:l},className:"rating_level_number"},n?n.rating_level:0))))),r.a.createElement("div",{className:"profile_collapsible"},r.a.createElement(fe.a,{trigger:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("span",{className:"icon icon-common icon-angle-right icon-custom"})),triggerWhenOpen:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("span",{className:"icon icon-common icon-angle-down icon-custom"}))},m.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("p",{style:{paddingLeft:"20px",marginTop:"10px"}},r.a.createElement("strong",null," ",t," ")),r.a.createElement("div",{className:"vf-grid vf-grid__col-5"},e.attributes.filter(function(e){return e.type===t}).map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("span",{className:"vf-grid__col--span-3",style:{paddingLeft:"20px"}},e.title),r.a.createElement("div",{className:"vf-grid__col--span-1"},_(e.id,"profile1")?r.a.createElement("i",{className:"icon icon-common icon-check"}):"-"),r.a.createElement("div",{className:"vf-grid__col--span-1"},_(e.id,"profile2")?r.a.createElement("i",{className:"icon icon-common icon-check"}):"-"))})))}))))})})}))}(),r.a.createElement("p",null,"\xa0 "),r.a.createElement("div",{className:"vf-grid vf-grid__col-5"},r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("h3",null,p," ",a," / Competencies")),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("h3",null,n.job_title)),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("h3",null,c.job_title))),r.a.createElement("hr",null),r.a.createElement("div",{className:"vf-grid vf-grid__col-5"},r.a.createElement("div",{className:"vf-grid__col--span-3"}),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("span",null,"High")," ",r.a.createElement("span",{style:{float:"right"}}," Low")),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("span",null,"Low")," ",r.a.createElement("span",{style:{float:"right"}}," High"))),r.a.createElement("div",null,l),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null),r.a.createElement("div",{style:{textAling:"center"},className:"submit_fixed"},r.a.createElement("button",{href:"#",className:"vf-button vf-button--secondary",onClick:function(e){return function(e){e.preventDefault(),window.print()}(e)}},"Print ",r.a.createElement("i",{className:"icon icon-common icon-print"})),r.a.createElement("p",{style:{paddingTop:"30px"}},"[Please enable background graphics in the print preview in order to get better print output]")),r.a.createElement("div",null)))}),ia=function(e){var t=Object(g.g)(),a=e.location.pathname.split("/")[2],c=e.location.pathname.split("/")[3],i=e.location.pathname.split("/")[6],l=e.location.pathname.split("/")[7],s=[],p=Object(n.useState)(),f=Object(F.a)(p,2),d=f[0],h=f[1],v=Object(n.useState)(),b=Object(F.a)(v,2),E=b[0],y=b[1],_=Object(n.useState)(),w=Object(F.a)(_,2),N=w[0],j=w[1],x=Object(n.useState)(),O=Object(F.a)(x,2),S=O[0],C=O[1],D=Object(n.useState)(null),A=Object(F.a)(D,2),T=A[0],I=A[1],R=Object(n.useState)(),q=Object(F.a)(R,2),M=q[0],P=q[1],L=Object(n.useState)(),B=Object(F.a)(L,2),U=B[0],V=B[1],H=Object(n.useState)(),J=Object(F.a)(H,2),z=J[0],G=J[1],W=Object(n.useState)(),Q=Object(F.a)(W,2),Y=Q[0],K=Q[1],X=Object(n.useState)(),Z=Object(F.a)(X,2),$=Z[0],ee=Z[1];return Object(n.useEffect)(function(){(function(){var t=Object(m.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"guest"!==i){t.next=8;break}return t.next=4,h(JSON.parse(localStorage.getItem("guestProfile")));case 4:V(1),K("/framework/".concat(a,"/").concat(c,"/profile/view/guest")),t.next=11;break;case 8:return K("/framework/".concat(a,"/").concat(c,"/profile/view/").concat(i,"/alias")),t.next=11,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"/profiles?_format=json&id=").concat(i,"&source=competencyhub")).then(function(e){return e.json()}).then(function(e){h(e)});case 11:if("guest"!==l){t.next=18;break}return t.next=14,y(JSON.parse(localStorage.getItem("guestProfile")));case 14:V(1),ee("/framework/".concat(a,"/").concat(c,"/profile/view/guest")),t.next=21;break;case 18:return ee("/framework/".concat(a,"/").concat(c,"/profile/view/").concat(l,"/alias")),t.next=21,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"/profiles?_format=json&id=").concat(l,"&source=competencyhub")).then(function(e){return e.json()}).then(function(e){y(e)});case 21:return t.next=23,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"/profiles/?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(t){var a=t.filter(function(t){return t.id!==e.match.params.profile1&&"Live"===t.publishing_status});j(a)});case 23:return t.next=25,fetch("".concat(k,"/api/version_manager?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){G(e)});case 25:return t.next=27,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){P(e)});case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(0),console.log(t.t0);case 32:case"end":return t.stop()}},t,null,[[0,29]])}));return function(){return t.apply(this,arguments)}})()()},[a,c,i,l]),z&&z.forEach(function(e,t){e.title.toLowerCase()===a&&e.expertise_levels.map(function(e,t){return s.push(r.a.createElement("li",{key:t,className:"vf-list__item",style:{textAlign:"center"}},r.a.createElement("div",{"data-tip":e.description?e.description:"NA","data-html":!0,"data-type":"info","data-multiline":!0},r.a.createElement("span",{className:"vf-badge vf-badge--tertiary"}," ",e.rating_level," ")," ",r.a.createElement("span",null," ",e.title)),r.a.createElement(ea.a,{className:"tooltip-custom"})))})}),r.a.createElement("div",null,r.a.createElement("h1",null,"Compare career profiles"),r.a.createElement("span",{className:"lead"},"Compare profile with other reference profiles to help you make career choices based on your competency"),r.a.createElement("div",{className:"vf-grid"},r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__bottom--1200"}),d?r.a.createElement("div",{className:"vf-profile"},r.a.createElement("img",{alt:"profile1",src:d.image[0]?d.image[0].url:Be.a,width:"120px",className:"vf-profile__image"}),r.a.createElement(o.b,{to:Y||"#"},r.a.createElement("h2",null,d.job_title))):"loading profiles"),r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__bottom--1200"}),E?r.a.createElement("div",{className:"vf-profile"},r.a.createElement("img",{alt:"profile2",src:E.image[0]?E.image[0].url:Be.a,width:"120px",className:"vf-profile__image"}),r.a.createElement(o.b,{to:$},r.a.createElement("h2",null,E.job_title)),r.a.createElement(aa,{profiles:N,profile:d,comparisonError:T,linkVariant:!0,setSelectedProfileId:function(e){C(e)},redirectToCompare:function(){d.id||(d.id="guest"),S?t.push("/framework/".concat(a,"/").concat(c,"/profiles/compare/").concat(d.id,"/").concat(S)):I("Select a role to compare")}})):"loading profiles"),r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",{className:"vf-u-margin__bottom--600"}),r.a.createElement("div",{className:"legend-inline-wrapper"},r.a.createElement("strong",null,"Rating levels ")," ",r.a.createElement("ul",{className:"vf-list legend-inline"},s))),r.a.createElement("p",null),d&&E?r.a.createElement(ca,{frameworkName:a,frameworkVersion:c,profile1Id:i,profile2Id:l,profile1:d,profile2:E,framework:M,frameworkInfo:z,isGuestProfile:U}):"")},oa=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profiles/compare/:profile1/:profile2",component:ia}))},la=window.$,sa=function(e){var t=Object(n.useState)(),a=Object(F.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(),l=Object(F.a)(o,2),s=l[0],p=l[1],f=Object(n.useState)(),d=Object(F.a)(f,2),h=d[0],v=d[1],g=Object(n.useState)(),b=Object(F.a)(g,2),E=b[0],y=b[1],_=e.location.pathname.split("/")[2],w=e.location.pathname.split("/")[3],N="",x=[],O="",S=[],C="",D=[],A=[],T=[],I=new j;Object(n.useEffect)(function(){var e=JSON.parse(localStorage.getItem("ProfileDownloadData"));e&&(i(e),function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r,c,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=I.get("".concat(k,"/api/version_manager?_format=json")).then(function(e){return e.data}),a=I.get("".concat(k,"/api/").concat(_,"/").concat(w,"?_format=json")).then(function(e){return e.data}),e.next=5,Promise.all([t,a]);case 5:n=e.sent,r=Object(F.a)(n,2),c=r[0],i=r[1],P(c,i[0].nid),y(c),p(i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(){return e.apply(this,arguments)}}()())},[w,_,I]);var R=function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=JSON.parse(localStorage.getItem("ProfileDownloadData")),L(a);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=JSON.parse(localStorage.getItem("ProfileDownloadData")),a=t.mappingAttributes;t.mappingAttributes=a,localStorage.setItem("ProfileDownloadData",JSON.stringify(t))},M=function(e){var t=JSON.parse(localStorage.getItem("ProfileDownloadData")),a=t.mappingAttributes;t.mappingAttributes=a,localStorage.setItem("ProfileDownloadData",JSON.stringify(t))};E&&(E.map(function(e){return e.title.toLowerCase()===_&&(C=e.title,e.expertise_levels.map(function(e){return x[e.rating_level]=e.title})),null}),x.map(function(e,t){return T.push(r.a.createElement("li",{style:{textAlign:"center"}},r.a.createElement("span",{className:"badge secondary"}," ",t," ")," ",r.a.createElement("span",null," ",e))),null}));var P=function(e,t){var a=e.filter(function(e){return e.nid===t})[0].expertise_levels;v(a)},L=function(e){var t=new zt.a("p","pt","a4");t.setFont("helvetica");t.internal.pageSize.getWidth();var a=490,n=document.getElementById("profile"),r=e.jobTitle.split(" ").join("_");t.fromHTML(n,20,30,{width:a,elementHandlers:{"#editor":function(e,t){return!0}}},function(e){t.save(r.toLowerCase()+".pdf")})},B=function(e,t){return{__html:t?"<h3>"+e+"</h3>"+t:""}};return r.a.createElement("div",null,function(){if(E&&(E.map(function(e){return e.title.toLowerCase()===_&&(C=e.title,e.expertise_levels.map(function(e){return x[e.id]=e.title,"Not applicable"===e.title?O=e.id:""})),null}),E.map(function(e){return e.title.toLowerCase()===_&&e.attribute_types.map(function(e){return S[e.id]=e.title}),null})),c){D=c.mapping;var e=JSON.parse(localStorage.getItem("ProfileDownloadData"));A=e.mappingAttributes}s&&(N=s.map(function(e,t){return e.domains.map(function(e,a){return r.a.createElement("ul",null,r.a.createElement("li",{key:t,className:"domain_list"},r.a.createElement("div",{className:"row callout"},r.a.createElement("div",{className:"column medium-9"},r.a.createElement("h4",{className:"domain_title"}," ",e.title)),r.a.createElement("div",{className:"column medium-3"},r.a.createElement("h4",null,"Levels of expertise"))),r.a.createElement("ul",null,e.competencies.map(function(e,t){return r.a.createElement("li",{key:t,className:"competency_list"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-9"},r.a.createElement(fe.a,{trigger:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("h5",null,r.a.createElement("span",{className:"icon icon-common icon-angle-down icon-custom"},r.a.createElement("p",{className:"show-for-sr"},"show more")),e.title)),triggerWhenOpen:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("h5",null,r.a.createElement("span",{className:"icon icon-common icon-angle-up icon-custom"},r.a.createElement("p",{className:"show-for-sr"},"show less")),e.title))},r.a.createElement("ul",null,S.map(function(t,a){return r.a.createElement("li",{key:a,className:"attribute_type"},t,r.a.createElement("ul",null,e.attributes.filter(function(e){return e.type===t}).map(function(t,a){return r.a.createElement("li",{key:a,className:"attribute_title"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-1"},r.a.createElement("input",{onChange:function(e){return function(e){var t=JSON.parse(localStorage.getItem("ProfileDownloadData")),a=e.target.getAttribute("data-competency"),n=e.target.getAttribute("id"),r=t.mappingAttributes,c=r;if(r.find(function(e){return e.attribute_id===n})){var i=r.findIndex(function(e){return e.attribute_id===n});r.splice(i,1),t.mappingAttributes=r,localStorage.setItem("ProfileDownloadData",JSON.stringify(t))}else c.push({attribute_id:n,competency_id:a}),t.mappingAttributes=c,la("input:checkbox[id="+n+"]").prop("checked",!0),localStorage.setItem("ProfileDownloadData",JSON.stringify(t))}(e)},type:"checkbox",id:t.id,"data-competency":e.id,checked:!!A.find(function(e){return e.attribute_id===t.id})})),r.a.createElement("div",{className:"column medium-11"},r.a.createElement("label",{className:A.find(function(e){return e.attribute_id===t.id})?"attribute_label checked":"attribute_label",htmlFor:t.id}," ",t.title))))})))})))),r.a.createElement("div",{className:"column medium-3"},r.a.createElement("select",{onChange:function(e){return function(e){var t=JSON.parse(localStorage.getItem("ProfileDownloadData")),a=e.target[e.target.selectedIndex].getAttribute("data-competency"),n=e.target[e.target.selectedIndex].getAttribute("data-expertise"),r=e.target[e.target.selectedIndex].text;if(n===O)la("input:checkbox[data-competency="+a+"]").prop("checked",!1),la("input:checkbox[data-competency="+a+"]").prop("disabled",!0),M(a);else{var c=t.mapping;if(c.find(function(e){return e.competency_id===a})){if(c.expertise_id!==n){var i=c.findIndex(function(e){return e.competency_id===a});c.splice(i,1,{competency_id:a,expertise_id:n,expertise:r})}t.mapping=c,localStorage.setItem("ProfileDownloadData",JSON.stringify(t))}else{var o=t.mapping;o.push({competency_id:a,expertise_id:n,expertise:r}),t.mapping=o,localStorage.setItem("ProfileDownloadData",JSON.stringify(t))}la("input:checkbox[data-competency="+a+"]").prop("checked",!0),la("input:checkbox[data-competency="+a+"]").prop("disabled",!1),q(a)}}(e)},defaultValue:D.find(function(t){return t.competency_id===e.id})?D.find(function(t){return t.competency_id===e.id}).expertise_id:O},h.map(function(t,a){return r.a.createElement("option",{key:a,value:t.id,"data-expertise":t.id,"data-competency":e.id},t.title)})))))}))))})}))}(),c?r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Add competencies to your profile "),r.a.createElement("div",{id:"profile",className:"column medium-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-12"},r.a.createElement("h3",null,c.title.charAt(0).toUpperCase()+c.title.slice(1)," ","- ",c.jobTitle))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-3 text-center"},c.selectedFileData[0]?r.a.createElement("img",{src:c.selectedFileData[0].src?c.selectedFileData[0].src:Be.a,width:"250px",alt:""}):"",r.a.createElement("div",{className:"text-center"},r.a.createElement("br",null),c.gender,", ",c.age," years")),r.a.createElement("div",{className:"column medium-9"},r.a.createElement("div",{className:"form_intro",dangerouslySetInnerHTML:B("Qualifications and background",c.qualification)}),r.a.createElement("div",{className:"form_intro",dangerouslySetInnerHTML:B("Activities and current role",c.currentRole)}),r.a.createElement("div",{className:"form_intro",dangerouslySetInnerHTML:B("Additional information",c.additionalInfo)}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-12"},r.a.createElement("br",null),r.a.createElement("h3",null,"Your competencies"),r.a.createElement("p",null,"The form below is listing competencies from"," ",C," competency framework. A competency is an observable ability of any professional, integrating multiple components such as knowledge, skills and behaviours. A competency profile lists and defines all the competencies that an individual might need to fulfil a particular role, or that define specific user groups."),r.a.createElement("p",null,"You may assign a level expertise against each competency. The levels of expertise are:"),r.a.createElement("div",{className:"legend-inline-wrapper"},r.a.createElement("strong",null,"Rating levels ")," ",r.a.createElement("ul",{className:"legend-inline"},T)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-12"},r.a.createElement("div",{className:"competency_section"},r.a.createElement("form",{onSubmit:function(e){return R(e)}},N,r.a.createElement("div",{className:"submit_fixed"},r.a.createElement("button",{className:"button",type:"submit"},"Print ",r.a.createElement("i",{className:"icon icon-common icon-print"}))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-3"}),r.a.createElement("div",{className:"column medium-6 form_intro"}),r.a.createElement("div",{className:"column medium-3"}))))):"Loading")},ua=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profile/map/download",component:sa}))},ma=function(e){var t=Object(g.g)(),a=e.location.pathname.split("/")[2],c=e.location.pathname.split("/")[3],i=Object(n.useState)(),l=Object(F.a)(i,2),s=l[0],p=l[1],f=Object(n.useState)(),d=Object(F.a)(f,2),h=d[0],v=d[1],b=Object(n.useState)(),E=Object(F.a)(b,2),y=E[0],_=E[1],w=Object(n.useState)(null),N=Object(F.a)(w,2),j=N[0],x=N[1],O=Object(n.useState)(),S=Object(F.a)(O,2),C=S[0],D=S[1],A=Object(n.useState)(),T=Object(F.a)(A,2),I=T[0],R=T[1],q="",M=[],P=[],L="",B=[];Object(n.useEffect)(function(){(function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(JSON.parse(localStorage.getItem("guestProfile")));case 2:return e.next=4,fetch("".concat(k,"/api/version_manager?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){R(e)});case 4:return e.next=6,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){D(e)});case 6:return e.next=8,fetch("".concat(k,"/api/").concat(a,"/").concat(c,"/profiles/?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){v(e)});case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[a,c]);var U=function(e){if(B){var t=B.find(function(t){return t.competency===e});if(!t)return"";if(I)return I.find(function(e){return e.title.toLowerCase()===a}).expertise_levels.find(function(e){return e.id===t.expertise})}},H=function(e){var t=I.find(function(e){return e.title.toLowerCase()===a}).expertise_levels.length;return e?100/((t-1)/e.rating_level):0};return r.a.createElement("div",null,(I&&(I.map(function(e){return e.title.toLowerCase()===a&&(L=e.title,e.expertise_levels.map(function(e,t){return M.push(r.a.createElement("li",{key:e.rating_level,className:"vf-list__item",style:{textAlign:"center"}},r.a.createElement("div",{"data-tip":e.description?e.description:"NA","data-html":!0,"data-type":"info","data-multiline":!0},r.a.createElement("span",{className:"vf-badge vf-badge--tertiary"}," ",e.rating_level," ")," ",r.a.createElement("span",null," ",e.title)),r.a.createElement(ea.a,{className:"tooltip-custom"})))})),null}),I.map(function(e){return e.title.toLowerCase()===a&&e.attribute_types.map(function(e){return P[e.id]=e.title}),null})),s&&(B=s.profile_mapping,document.getElementById("bc_location").innerText=s.title+" - "+s.job_title),void(C&&(q=C.map(function(e){return e.domains.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"row callout"},r.a.createElement("div",{className:"column medium-12 "},r.a.createElement("h5",null,e.title)," ")),e.competencies.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("span",{className:"competency_title"}," ",e.title.length>150?e.title.split(" ").splice(0,18).join(" ")+" ..":e.title)),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("div",{className:"fillerbg"},r.a.createElement("div",{className:"fillerRight",style:{width:H(U(e.id))+"%",display:"flow-root"}},r.a.createElement("span",{style:{float:0===H(U(e.id))?"none":"right"},className:"rating_level_number"},U(e.id)?U(e.id).rating_level:0))))),r.a.createElement("div",{className:"profile_collapsible"},r.a.createElement(fe.a,{trigger:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("i",{className:"icon icon-common icon-angle-right icon-custom"})),triggerWhenOpen:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("i",{className:"icon icon-common icon-angle-down icon-custom"}))},P.map(function(t,a){return r.a.createElement("div",{key:a,className:"accordion-item is-active","data-accordion-item":!0},r.a.createElement("div",{className:"vf-grid vf-grid__col-4 attribute_align_type"},r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("strong",null," ",t," ")),r.a.createElement("div",{className:"vf-grid__col--span-1"})),e.attributes.filter(function(e){return e.type===t}).map(function(e,t){return r.a.createElement("div",{key:t,className:"vf-grid vf-grid__col-4 attribute_align"},r.a.createElement("div",{className:"vf-grid__col--span-3"},e.title),r.a.createElement("div",{className:"vf-grid__col--span-1"},function(e){if(B)return B.find(function(t){return t.attributes.find(function(t){return t===e})})}(e.id)?r.a.createElement("i",{className:"icon icon-common icon-check"}):"-"))}))}))))}))})})))),s?r.a.createElement("div",{id:"profile"},r.a.createElement("h1",{style:{marginTop:"1em",marginBottom:"1em"}},s.title," - ",s.job_title),r.a.createElement("div",{style:{float:"right"}},r.a.createElement(aa,{profiles:h,profile:s,comparisonError:j,setSelectedProfileId:function(e){_(e)},redirectToCompare:function(e){y?t.push("/framework/".concat(a,"/").concat(c,"/profiles/compare/guest/").concat(y)):x("Select a role to compare")}}),r.a.createElement("ul",null,r.a.createElement("li",{className:"profile_navigation"},r.a.createElement(o.b,{className:"vf-link",to:"/framework/".concat(a,"/").concat(c,"/profile/create/guest")},"Edit profile"," ",r.a.createElement("i",{className:"icon icon-common icon-pencil-alt"}))))),r.a.createElement("div",{className:s.publishing_status+" vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("center",null,r.a.createElement("img",{alt:"",style:{display:"block",maxWidth:"150px"},src:s.image[0]?s.image[0].url:Be.a})),r.a.createElement("p",null),r.a.createElement("div",{style:{textAlign:"center"}},"None"!==s.gender?r.a.createElement("div",null,s.gender&&"Prefernottosay"===s.gender?r.a.createElement("p",null," Gender: Prefer not to say "):"",s.gender&&"Prefernottosay"!==s.gender?r.a.createElement("span",null," Gender: ",s.gender," "):""):"",s.age?r.a.createElement("p",null," Age: ",s.age+" years"," "):"")),r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("h3",null,"Qualification and background"),s.qualification_background?V()(s.qualification_background):"",r.a.createElement("h3",null,"Activities of current role"),s.current_role?V()(s.current_role):"",s.additional_information?V()(s.additional_information):""),r.a.createElement("p",null)),r.a.createElement("div",{class:"vf-banner vf-banner--alert vf-banner--info"},r.a.createElement("div",{class:"vf-banner__content"},r.a.createElement("p",{class:"vf-banner__text"},"This profile has been created in"," ",Ge.filter(function(e){return e.title==a})[0].desc," ","(",L,") framework."))),r.a.createElement("p",null),r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("h5",{style:{marginTop:"25px"}},L," ",c," / Competencies")),r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("ul",{className:"vf-list legend-inline",style:{float:"right"}},M))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-12"})),r.a.createElement("hr",null),q):"Loading profile",r.a.createElement("form",{onSubmit:function(e){window.print()}},r.a.createElement("div",{className:"submit_fixed"},r.a.createElement("button",{className:"vf-button vf-button--secondary",type:"submit"},"Print ",r.a.createElement("i",{className:"icon icon-common icon-print"})),r.a.createElement("p",{style:{paddingTop:"30px"}},"[Please enable background graphics in the print preview in order to get better print output]"))))},pa=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profile/view/guest",component:ma}))},fa=(window.$,function(e){var t=new Qt,a=Object(n.useState)(),c=Object(F.a)(a,2),i=c[0],l=c[1],s=Object(n.useState)(),p=Object(F.a)(s,2),f=p[0],d=p[1],h=Object(n.useState)(),v=Object(F.a)(h,2),g=v[0],b=v[1],E=Object(n.useState)(),y=Object(F.a)(E,2),_=y[0],w=y[1],N=e.location.pathname.split("/")[2],j=e.location.pathname.split("/")[3],x="",O=[],S=[],C="",D=[],A="";Object(n.useEffect)(function(){_||function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=JSON.parse(localStorage.getItem("guestProfile")))&&(l(t),w(t.profile_mapping?t.profile_mapping:[])),e.next=4,fetch("".concat(k,"/api/version_manager?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){b(e)});case 4:return console.log(k),e.next=7,fetch("".concat(k,"/api/").concat(N,"/").concat(j,"?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){d(e)});case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[N,j,_]);var T=function(){var a=Object(m.a)(u.a.mark(function a(n){var r;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.next=3,t.mapProfileGuest(_);case 3:r=a.sent,console.log(r),e.history.push("/framework/".concat(N,"/").concat(j,"/profile/view/guest"));case 6:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",null,(g&&(g.forEach(function(e){e.title.toLowerCase()===N&&(A=e.title,e.expertise_levels.map(function(e,t){return O[e.id]=e.title,"Not applicable"===e.title&&(C=e.id),S.push(r.a.createElement("li",{key:t,className:"vf-list__item",style:{textAlign:"center"}},r.a.createElement("div",{"data-tip":e.description?e.description:"NA","data-html":!0,"data-type":"info","data-multiline":!0},r.a.createElement("span",{className:"vf-badge vf-badge--tertiary"}," ",e.rating_level," ")," ",r.a.createElement("span",null," ",e.title)),r.a.createElement(ea.a,{className:"tooltip-custom"})))}))}),g.map(function(e){return e.title.toLowerCase()===N&&e.attribute_types.map(function(e){return D[e.id]=e.title}),null})),void(f&&(x=f.map(function(e){return e.domains.map(function(e,t){return r.a.createElement("ul",{key:"ul".concat(t)},r.a.createElement("li",{key:t,className:"domain_list"},r.a.createElement("div",{className:"row callout"},r.a.createElement("div",{className:"column medium-9"},r.a.createElement("h5",{className:"domain_title"}," ",e.title))),r.a.createElement("ul",null,e.competencies.map(function(e,t){return r.a.createElement("li",{key:t,className:"competency_list"},r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement(fe.a,{trigger:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("span",{className:"icon icon-common icon-angle-right icon-custom"}," "),r.a.createElement("span",null,e.title)),triggerWhenOpen:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("span",{className:"icon icon-common icon-angle-down icon-custom"}," "),r.a.createElement("span",null,e.title))},r.a.createElement("ul",null,D.map(function(t,a){return r.a.createElement("li",{key:a,className:"attribute_type"},t,r.a.createElement("ul",null,e.attributes.filter(function(e){return e.type===t}).map(function(t,a){return r.a.createElement("li",{key:a,className:"attribute_title"},r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("input",{type:"checkbox",id:t.id,onChange:function(e){return function(e){var t=e.target.checked,a=e.target.dataset.competency,n=_;if(n){if(!0===t)e.target.checked=!0,n.find(function(e){return e.competency===a}).attributes.push(e.target.id);else{var r=n.find(function(e){return e.competency===a});r.attributes.splice(r.attributes.indexOf(e.target.id),1)}w(n)}console.log(_)}(e)},defaultChecked:!!_&&!!_.find(function(e){return e.attributes.find(function(e){return e===t.id})}),disabled:!_||!_.find(function(t){return t.competency===e.id}),"data-competency":e.id})),r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("label",{className:"attribute_label",htmlFor:t.id}," ",t.title))))})))})))),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("select",{onChange:function(e){return function(e){var t=e.target[e.target.selectedIndex].getAttribute("data-competency"),a=e.target[e.target.selectedIndex].getAttribute("data-expertise"),n=_,r=[],c=document.querySelectorAll('[data-competency="'+t+'"]');if(console.log(c),a===C)c.forEach(function(e,t,a){e.checked=!1,e.disabled=!0}),console.log(n),n=n.filter(function(e){return e.competency!==t}),console.log(n);else if(n)if(n.find(function(e){return e.competency===t})){var i=n.find(function(e){return e.competency===t});i.expertise=a,c.forEach(function(e,t,a){r.push(e.id),e.checked=!0,e.disabled=!1}),i.attributes=r}else c.forEach(function(e,t,a){r.push(e.id),e.checked=!0,e.disabled=!1}),n.push({competency:t,expertise:a,attributes:r});w(n)}(e)},defaultValue:_&&_.find(function(t){return t.competency===e.id})?_.find(function(t){return t.competency===e.id}).expertise:C,className:"vf-form__select"},O.map(function(t,a){return r.a.createElement("option",{key:a,value:a,"data-expertise":a,"data-competency":e.id},t)})))))}))))})})))),i?r.a.createElement("div",{key:"div123"},r.a.createElement("div",{key:"div567",className:"row"},r.a.createElement("div",{className:"vf-u-margin__top--400"}),r.a.createElement("h2",null," Competency mapping"),r.a.createElement("h3",null,Ge.filter(function(e){return e.title===N})[0].desc," (",A," ",j,") - ",i.job_title," "),r.a.createElement("div",{key:"div350",className:"column medium-12"},r.a.createElement("div",{className:"vf-grid vf-grid__col-5"},r.a.createElement("div",{className:"vf-grid__col--span-4"}),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement(o.b,{to:"/framework/".concat(N,"/").concat(j,"/profile/view/guest")},r.a.createElement("i",{className:"icon icon-common icon-angle-left"})," Profile overview"),r.a.createElement("p",null))),r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("img",{src:i.image[0]?i.image[0].url:Be.a,width:"150px",alt:""})),r.a.createElement("div",{className:"vf-grid__col--span-3 form_intro"},r.a.createElement("p",null,"Select your level of expertise in each competency from the dropdown menu. Choose the knowledge, skills and attitudes that are applicable to you by clicking on each competency to view them."))),r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-1"}," ",r.a.createElement("h5",{style:{marginTop:"25px"}},A," ",j," / Competencies")),r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("ul",{className:"vf-list legend-inline",style:{float:"right"}},S))),r.a.createElement("hr",null),r.a.createElement("div",{className:"competency_section"},r.a.createElement("form",{key:i.id,onSubmit:function(e){return T(e)}},x,r.a.createElement("div",{className:"submit_fixed"},r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm",type:"submit"},"Save ",r.a.createElement("i",{className:"icon icon-common icon-save"})))))))):"Loading")}),da=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profile/map/guest",component:fa}))},ha=function(e){var t=e.location.pathname.split("/")[2],a=e.location.pathname.split("/")[3],c=e.location.pathname.split("/")[6],i=new Qt,l=Object(n.useState)(),s=Object(F.a)(l,2),p=s[0],f=s[1],d=Object(n.useState)(),h=Object(F.a)(d,2),v=h[0],g=h[1],b=Object(n.useState)(),E=Object(F.a)(b,2),y=E[0],_=E[1],w=Object(n.useState)(),N=Object(F.a)(w,2),j=N[0],O=N[1],S=Object(n.useState)(),C=Object(F.a)(S,2),D=C[0],A=C[1],T=Object(n.useState)(),I=Object(F.a)(T,2),R=I[0],q=I[1],M=Object(n.useState)(),P=Object(F.a)(M,2),L=P[0],B=P[1],U=Object(n.useState)(),V=Object(F.a)(U,2),H=V[0],J=V[1],z=Object(n.useState)(),G=Object(F.a)(z,2),W=G[0],Q=G[1],Y=Object(n.useState)(),K=Object(F.a)(Y,2),X=K[0],Z=K[1],$=Object(n.useState)(),ee=Object(F.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(),re=Object(F.a)(ne,2),ce=re[0],ie=re[1],oe=Object(n.useState)(),le=Object(F.a)(oe,2),se=le[0],ue=le[1],me=Object(n.useState)([]),pe=Object(F.a)(me,2),fe=pe[0],de=pe[1],he=x.currently_logged_in_user.username;Object(n.useEffect)(function(){(function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/node/").concat(c,"?_format=json")).then(function(e){return e.json()}).then(function(e){f(e.title[0].value),B(e.field_image[0]?e.field_image[0].url:""),q(e.field_image[0]?e.field_image[0].target_id:""),Z(e.field_job_title[0]?e.field_job_title[0].value:""),g(e.field_age[0]?e.field_age[0].value:""),O(e.field_gender[0]?e.field_gender[0].value:"None"),_(e.field_current_role[0]?e.field_current_role[0].value:""),ae(e.field_qualification_background[0]?e.field_qualification_background[0].value:""),ie(e.field_additional_information[0]?e.field_additional_information[0].value:""),ue(e.field_publishing_status[0]?e.field_publishing_status[0].value:"")});case 2:return e.next=4,fetch("".concat(k,"/api/authorisation/").concat(he,"?_format=json"),{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(e){de(e)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[c,he]);var ve=function(){var n=Object(m.a)(u.a.mark(function n(r){var o,l,s;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),!(!p||!X||p.length<2||X.length<3||W||H)){n.next=4;break}n.next=14;break;case 4:if(o=localStorage.getItem("csrf_token"),l=R,!D){n.next=10;break}return console.log(D),n.next=10,fetch(k+"/file/upload/node/profile/field_image?_format=json",{credentials:"include",method:"POST",cookies:"x-access-token",headers:{accept:"application/octet-stream","Content-Type":"application/octet-stream","X-CSRF-Token":o,"Content-Disposition":'file; filename="persona_picture.png"'},body:D}).then(function(e){return e.json()}).then(function(e){console.log(e),l=e.fid[0].value});case 10:return n.next=12,i.editProfile(c,p,v,y,j,X,te,ce,se,l);case 12:(s=n.sent).nid[0].value&&e.history.push("/framework/".concat(t,"/").concat(a,"/profile/map/").concat(s.nid[0].value));case 14:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();var ge=function(){var e="a reference";return 0===x.currently_logged_in_user.roles.length&&(e="your"),e}(),be="small callout alert",Ee="small callout alert",ye="Name is required and must be at least 2 characters long",_e="Job Title is required and must be at least 3 characters long";p&&p.length>1&&(ye="",be=""),X&&X.length>2&&(_e="",Ee="");return r.a.createElement("div",null,function(){var e=[];return fe.map(function(t){return e.push(t.toLowerCase()),null}),!!e.includes(t)}()?r.a.createElement("div",null,r.a.createElement(o.b,{to:"/framework/".concat(t,"/").concat(a,"/profile/view/").concat(c,"/alias")}," ","View"," "),r.a.createElement("h2",null,"Create ",ge," profile"),r.a.createElement("form",{className:"form",id:"profile_create_form",onSubmit:ve},r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("span",null,r.a.createElement("strong",null,"Name"),r.a.createElement("input",{type:"text",id:"title",placeholder:"Name",value:p,onChange:function(e){return f(e.target.value)},className:"vf-form__input"}),r.a.createElement("div",{className:be},r.a.createElement("i",null,ye))),r.a.createElement("span",null,r.a.createElement("strong",null,"Image"),r.a.createElement("input",{type:"file",id:"fileupload",onChange:function(e){if(e.target.files&&0!==e.target.files.length){var t=URL.createObjectURL(e.target.files[0]);e.target.files[0].size>2097152?J(1):J(void 0),"image/jpeg"!==e.target.files[0].type&&"image/png"!==e.target.files[0].type?Q(1):Q(void 0),console.log(e.target.files[0]),B(t),A(e.target.files[0])}else A(void 0)}})),r.a.createElement("span",null,r.a.createElement("img",{alt:"",id:"imgpreview_image",width:"100px",src:L,height:"100px",style:{border:"1px solid #ccc",padding:"5px",width:"30%"}}),L?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault(),B(void 0),q(void 0),Q(void 0),J(void 0),document.getElementById("fileupload").value=""}(e)}},"Clear image x")):"",H?r.a.createElement("div",{className:"small callout alert"},r.a.createElement("em",null," Image size should not be more than 2 MB ")," "):"",W?r.a.createElement("div",{className:"small callout alert"},r.a.createElement("em",null," Only JPG or PNG images are allowed ")," "):""),r.a.createElement("span",null,r.a.createElement("strong",null,"Age (in years)"),r.a.createElement("input",{type:"number",id:"age",placeholder:"Age",width:4,value:v,onChange:function(e){return g(e.target.value)},className:"vf-form__input"})),r.a.createElement("span",null,r.a.createElement("strong",null,"Gender"),r.a.createElement("select",{value:j,defaultValue:"-None-",onChange:function(e){return O(e.target.value)},className:"vf-form__select"},r.a.createElement("option",{value:"None"},"None"),r.a.createElement("option",{value:"Male"},"Male"),r.a.createElement("option",{value:"Female"},"Female"),r.a.createElement("option",{value:"Nonbinary"},"Nonbinary"),r.a.createElement("option",{value:"Prefernottosay"},"Prefer not to say")))),r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("span",null,r.a.createElement("strong",null,"Job title"),r.a.createElement("input",{type:"text",id:"jobTitle",placeholder:"Job title",value:X,onChange:function(e){return Z(e.target.value)},className:"vf-form__input"}),r.a.createElement("div",{className:Ee},r.a.createElement("i",null,_e))),r.a.createElement("span",null,r.a.createElement("strong",null,"Qualification and background"),r.a.createElement(Lt.a,{editor:Ut.a,data:te,onInit:function(e){},onChange:function(e,t){var a=t.getData();ae(a)},className:"vf-form__input"})),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",null,"Activities of current role"),r.a.createElement(Lt.a,{editor:Ut.a,data:y,onInit:function(e){},onChange:function(e,t){var a=t.getData();_(a)},className:"vf-form__input"})),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",null,"Additional information"),r.a.createElement(Lt.a,{editor:Ut.a,data:ce,onInit:function(e){},onChange:function(e,t){var a=t.getData();ie(a)},className:"vf-form__input"})),r.a.createElement("span",null,r.a.createElement("strong",null,"Publishing status"),r.a.createElement("select",{value:se,defaultValue:"-None-",onChange:function(e){return ue(e.target.value)},className:"vf-form__select"},r.a.createElement("option",{value:"Draft"},"Draft"),r.a.createElement("option",{value:"Live"},"Live"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column large-4"},r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"column large-8"})),r.a.createElement("p",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-2"}),r.a.createElement("div",{className:"column medium-3"},r.a.createElement(function(){var e="Map competencies";return 0===x.currently_logged_in_user.roles.length&&(e="Download"),r.a.createElement("input",{type:"submit",className:"vf-button vf-button--primary vf-button--sm",value:e})},null)),r.a.createElement("div",{className:"column medium-7"})))):"")},va=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profile/edit/:id",component:ha}))},ga=(window.$,function(e){var t=new Qt,a=Object(n.useState)(),c=Object(F.a)(a,2),i=c[0],l=c[1],s=Object(n.useState)(),p=Object(F.a)(s,2),f=p[0],d=p[1],h=Object(n.useState)(),v=Object(F.a)(h,2),g=v[0],b=v[1],E=Object(n.useState)(),y=Object(F.a)(E,2),_=y[0],w=y[1],N=e.location.pathname.split("/")[2],j=e.location.pathname.split("/")[3],x=e.location.pathname.split("/")[6],O="",S=[],C=[],D="",A=[],T="";Object(n.useEffect)(function(){(function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/api/").concat(N,"/").concat(j,"/profiles?_format=json&id=").concat(x,"&source=competencyhub&timestamp=").concat(Date.now())).then(function(e){return e.json()}).then(function(e){l(e)});case 2:return e.next=4,fetch("".concat(k,"/api/version_manager?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){b(e)});case 4:return e.next=6,fetch("".concat(k,"/api/").concat(N,"/").concat(j,"?_format=json&source=competencyhub")).then(function(e){return e.json()}).then(function(e){d(e)});case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[x,N,j,_]);var I=function(){var a=Object(m.a)(u.a.mark(function a(n){return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.next=3,t.mapProfile(x,_);case 3:a.sent,e.history.push("/framework/".concat(N,"/").concat(j,"/profile/view/").concat(x,"/alias"));case 5:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",null,(g&&(g.map(function(e){return e.title.toLowerCase()===N&&(T=e.title,e.expertise_levels.map(function(e){return S[e.id]=e.title,"Not applicable"===e.title&&(D=e.id),C.push(r.a.createElement("li",{className:"vf-list__item",style:{textAlign:"center"}},r.a.createElement("div",{"data-tip":e.description?e.description:"NA","data-html":!0,"data-type":"info","data-multiline":!0},r.a.createElement("span",{className:"vf-badge vf-badge--tertiary"}," ",e.rating_level," ")," ",r.a.createElement("span",null," ",e.title)),r.a.createElement(ea.a,{className:"tooltip-custom"})))})),null}),g.map(function(e){return e.title.toLowerCase()===N&&e.attribute_types.map(function(e){return A[e.id]=e.title}),null})),i&&(_||w(i.profile_mapping)),void(f&&(O=f.map(function(e){return e.domains.map(function(e,t){return r.a.createElement("ul",null,r.a.createElement("li",{className:"domain_list"},r.a.createElement("div",{className:"row callout"},r.a.createElement("div",{className:"column medium-9"},r.a.createElement("h5",{className:"domain_title"}," ",e.title))),r.a.createElement("ul",null,e.competencies.map(function(e,t){return r.a.createElement("li",{className:"competency_list"},r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement(fe.a,{trigger:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("span",{className:"icon icon-common icon-angle-right icon-custom"}," "),r.a.createElement("span",null,e.title)),triggerWhenOpen:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("span",{className:"icon icon-common icon-angle-down icon-custom"}," "),r.a.createElement("span",null,e.title))},r.a.createElement("ul",null,A.map(function(t){return r.a.createElement("li",{className:"attribute_type"},t,r.a.createElement("ul",null,e.attributes.filter(function(e){return e.type===t}).map(function(t){return r.a.createElement("li",{className:"attribute_title"},r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("input",{type:"checkbox",id:t.id,onChange:function(e){return function(e){var t=e.target.checked,a=e.target.dataset.competency,n=_;if(n){if(!0===t)e.target.checked=!0,n.find(function(e){return e.competency===a}).attributes.push(e.target.id);else{var r=n.find(function(e){return e.competency===a});r.attributes.splice(r.attributes.indexOf(e.target.id),1)}w(n)}}(e)},defaultChecked:!!_.find(function(e){return e.attributes.find(function(e){return e===t.id})}),disabled:!_.find(function(t){return t.competency===e.id}),"data-competency":e.id})),r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("label",{className:"attribute_label",for:t.id}," ",t.title))))})))})))),r.a.createElement("div",{className:"vf-grid__col--span-1"},r.a.createElement("select",{className:"vf-form__select",onChange:function(e){return function(e){var t=e.target[e.target.selectedIndex].getAttribute("data-competency");console.log("competency_id: "+t);var a=e.target[e.target.selectedIndex].getAttribute("data-expertise"),n=_,r=[],c=document.querySelectorAll('[data-competency="'+t+'"]');if(console.log(c),a===D)c.each(function(e,t,a){t.checked=!1,t.disabled=!0}),console.log(n),n=n.filter(function(e){return e.competency!==t});else if(n)if(n.find(function(e){return e.competency===t})){var i=n.find(function(e){return e.competency===t});i.expertise=a,c.each(function(e,t,a){r.push(t.id),t.checked=!0,t.disabled=!1}),i.attributes=r}else c.each(function(e,t,a){r.push(t.id),t.checked=!0,t.disabled=!1}),n.push({competency:t,expertise:a,attributes:r});w(n)}(e)},defaultValue:_.find(function(t){return t.competency===e.id})?_.find(function(t){return t.competency===e.id}).expertise:D},S.map(function(t,a){return r.a.createElement("option",{value:a,"data-expertise":a,"data-competency":e.id},t)})))))}))))})})))),i?r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"vf-u-margin__top--400"}),r.a.createElement("h2",null," Competency mapping"),r.a.createElement("h3",null,Ge.filter(function(e){return e.title===N})[0].desc," (",T," ",j,") - ",i.job_title," "),r.a.createElement("div",{className:"column medium-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-10"}),r.a.createElement("div",{className:"column medium-2"},r.a.createElement(o.b,{to:"/framework/".concat(N,"/").concat(j,"/profile/view/").concat(x,"/alias")},r.a.createElement("i",{className:"icon icon-common icon-angle-left"})," Profile overview"),r.a.createElement("p",null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column medium-3"},r.a.createElement("img",{alt:"",src:i.image[0]?i.image[0].url:Be.a,width:"150px"})),r.a.createElement("div",{className:"column medium-9 form_intro"},r.a.createElement("p",null,"Select the level of expertise in each competency from the dropdown menu. Choose the knowledge, skills and attitudes that are applicable to you by clicking on each competency to view them"))),r.a.createElement("div",{className:"vf-grid vf-grid__col-4"},r.a.createElement("div",{className:"vf-grid__col--span-1"}," ",r.a.createElement("h5",{style:{marginTop:"25px"}},T," ",j," / Competencies")),r.a.createElement("div",{className:"vf-grid__col--span-3"},r.a.createElement("ul",{className:"vf-list legend-inline",style:{float:"right"}},C))),r.a.createElement("hr",null),r.a.createElement("div",{className:"competency_section"},r.a.createElement("form",{onSubmit:function(e){return I(e)}},O,r.a.createElement("div",{className:"submit_fixed"},r.a.createElement("button",{className:"vf-button vf-button--primary vf-button--sm",type:"submit"},"Save ",r.a.createElement("i",{className:"icon icon-common icon-save"})))))))):"Loading")}),ba=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profile/map/:id",component:ga}))},Ea=function(e){var t=e.location.pathname.split("/")[2],a=e.location.pathname.split("/")[3],c=e.location.pathname.split("/")[6],i=Object(n.useState)(),o=Object(F.a)(i,2),l=o[0],s=o[1],p=Object(n.useState)(),f=Object(F.a)(p,2),d=f[0],h=f[1],v=Object(g.h)(),b=Object(n.useState)(),E=Object(F.a)(b,2),y=E[0],_=E[1],w=v.state.profileJobTitle,N=v.state.includeSummary,j="",x=[];Object(n.useEffect)(function(){(function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/api/version_manager?_format=json")).then(function(e){return e.json()}).then(function(e){h(e)});case 2:return e.next=4,fetch("".concat(k,"/api/").concat(t,"/").concat(a,"?_format=json")).then(function(e){return e.json()}).then(function(e){s(e)});case 4:return e.next=6,fetch("".concat(k,"/api/profile_summary/").concat(t,"/").concat(a,"?_format=json")).then(function(e){return e.json()}).then(function(e){_(e)});case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[c,a,t]),y&&console.log(y);return r.a.createElement("div",null,(d&&d.map(function(e){return e.title.toLowerCase()===t&&e.attribute_types.map(function(e){return x[e.id]=e.title}),null}),void(l&&(j=l.map(function(e){return e.domains.map(function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"row callout"},r.a.createElement("div",{className:"column medium-8 "},r.a.createElement("h5",null,e.title)," "),r.a.createElement("div",{className:"column medium-4 "},r.a.createElement("h5",null,"Learning Resources"))),e.competencies.map(function(e){return-1!==N.indexOf(e.id)?r.a.createElement("div",null,r.a.createElement("div",{id:e.id,className:"row"},r.a.createElement("div",{className:"column medium-8"},r.a.createElement("span",{className:"competency_title"},r.a.createElement("div",null,r.a.createElement(fe.a,{trigger:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("i",{className:"icon icon-common icon-angle-right icon-custom"})," ",e.title),triggerWhenOpen:r.a.createElement("div",{className:"open-close-title"},r.a.createElement("i",{className:"icon icon-common icon-angle-down icon-custom"})," ",e.title)},x.map(function(t){return r.a.createElement("div",{className:"accordion-item is-active","data-accordion-item":!0},r.a.createElement("div",{className:"row attribute_align_type"},r.a.createElement("div",{className:"column medium-8"},r.a.createElement("strong",null," ",t," ")),r.a.createElement("div",{className:"column medium-4"})),e.attributes.filter(function(e){return e.type===t}).map(function(e){return r.a.createElement("div",{className:"row attribute_align"},r.a.createElement("div",{className:"column medium-8"},e.title))}))}))))),r.a.createElement("div",{className:"column medium-4"},r.a.createElement("ul",null,function(e){if(y)return y.map(function(t){return t.id===e?t.resources.map(function(e){return r.a.createElement("li",null,r.a.createElement("a",{href:e.resourceLink,rel:"noopener noreferrer",target:"_blank"}," ",e.resourceName," "))}):null})}(e.id))))):""}))})})))),r.a.createElement("h2",null,"Summary of learning resources"),r.a.createElement("p",{className:"lead"},"Based on the comparison of your profile, the following are the suggested learning resources to help develop your career, if you want to become"," ",w),j)},ya=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/framework/:framework/:version/profiles/compare/guest/summary",component:Ea}))},_a=a(294),ka=(a(1081),a(305)),wa=function(){return Object(n.useEffect)(function(){window.scrollTo(0,0),console.log("scrolled")},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{color:"#000"}},"API Documentation"),r.a.createElement("h3",null,"Our API documenation is based on Open API specifications 2.0."),r.a.createElement(_a.a,{spec:ka}))},Na=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).onLogin=function(e,t){xt(e,t)},a.onLogout=function(){St()},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.roles,a=e.user;return r.a.createElement("div",null,a&&t?r.a.createElement("h2",null,"You are logged in"):r.a.createElement(D,{onSubmit:this.onLogin}))}}]),t}(n.Component),ja=function(e){var t=Object(n.useState)(),a=Object(F.a)(t,2),c=a[0],i=a[1],l=localStorage.getItem("user"),s=localStorage.getItem("csrf_token");return Object(n.useEffect)(function(){fetch("".concat(k,"/api/authorisation/").concat(l,"?_format=json"),{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(e){i(e)})},[l,s]),r.a.createElement("div",{className:"vf-activity"},r.a.createElement("h2",null,"Manage frameworks"),r.a.createElement("ul",{className:"vf-activity__list | vf-list"},c?c.map(function(e){return r.a.createElement("li",{className:"vf-activity__item",key:e},r.a.createElement(o.b,{to:"/framework/".concat(e.toLowerCase().replace(/\s+/g,""),"/manage/data")},e))}):r.a.createElement("li",{style:{color:"#000"}},"No Framework assigned to this user.")))},xa=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/manage-frameworks",component:ja}))},Oa=(window.$,function(){var e=Object(g.h)().pathname,t=e.split("/"),a=t[2],n=t[3],c=function(e){return"bioexcel"===e?"BioExcel":"corbel"===e?"CORBEL":"iscb"===e?"ISCB":"permedcoe"===e?"PerMedCoE":"ritrain"===e?"RItrain":"cineca"===e?"CINECA":"nhs"===e?"NHS":"datasteward"===e?"Data steward":"arise"===e?"ARISE":void 0};return""===t[0]&&""===t[1]?r.a.createElement("span",null):r.a.createElement("nav",{className:"vf-breadcrumbs","aria-label":"Breadcrumb"},r.a.createElement("ul",{className:"vf-breadcrumbs__list | vf-list vf-list--inline"},r.a.createElement("li",{className:"vf-breadcrumbs__item"},r.a.createElement(o.b,{to:"/"},"Competency Hub")),e.includes("compare")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item"},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(n)},c(a)," ",n)),r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location"},"Compare career profiles")):e.includes("profile")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item"},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(n)},c(a)," ",n)),r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location",id:"bc_location"})):e.includes("competency")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item"},r.a.createElement(o.b,{to:"/framework/".concat(a,"/").concat(n)},c(a)," ",n)),r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location"},"Competency details")):e.includes("framework")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location"},c(a)," ",n)):e.includes("all-training-resources")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location"},"Manage training resources")):e.includes("resource")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location"},"Training resource")):e.includes("documentation")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location"},"API documentation")):e.includes("about")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location"},"About")):e.includes("design-your-training")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"vf-breadcrumbs__item","aria-current":"location"},"Design your training")):void 0))}),Sa=function(){return Object(n.useEffect)(function(){window.scrollTo(0,0),console.log("scrolled")},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Develop your courses"),r.a.createElement("p",null,"Competencies can be used to develop training or other learning interventions, by asking what competencies the learners need to gain."," "),r.a.createElement("p",null,"The Competency Hub can help you at different stages of the process of designing your training:"," "),r.a.createElement("h3",null,"Define your audience:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Find the competency framework appropriate for your audience on our home page"),r.a.createElement("li",null,"If career profiles are available, check the roles of your audience and the levels at which competencies are expected for those roles")),r.a.createElement("h3",null,"Define the competencies to cover:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Find the competencies that you need to focus on"),r.a.createElement("li",null,"Find knowledge, skills or attitudes within the competencies that your learners need to achieve"),r.a.createElement("li",null,"Use career profiles to decide the level of competence to be achieved in the course, depending on the audience and their goal")),r.a.createElement("h3",null,"Develop content to cover the selected competencies"),r.a.createElement("h3",null,"Assessment:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Check that the target competencies at the specified level have been achieved"," ")),r.a.createElement("div",{className:"vf-u-padding__top--400"},r.a.createElement("p",null,"EMBL-EBI provides"," ",r.a.createElement("a",{href:"https://www.ebi.ac.uk/training/trainer-support"},"additional support for trainers")," ","with openly accessible resources and opportunities for skills development."),r.a.createElement("p",null,"The"," ",r.a.createElement("a",{href:"https://zenodo.org/record/5418103#.YhiW3ZPP30o"},"ISCB guidelines")," ","provide information on how the ISCB competency framework can be used to develop courses and courses programmes")))},Ca=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isActive:!1,roles:localStorage.getItem("roles")||"",user:{is_logged_in:!1,roles:[]}},a.activeRequests=new Y,a.handleActiveRequests=function(e){a.setState({isActive:e})},a.detectUserChangesFromOtherTabs=function(e){var t=e.key,n=e.newValue;"user"===t&&(n?a.setState({user:localStorage.getItem("user"),roles:localStorage.getItem("roles")}):a.setState({user:"",roles:""}))},a.handleLogin=function(){var e=Object(m.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xt(t,n);case 3:a.setState({user:localStorage.getItem("user"),roles:localStorage.getItem("roles")}),document.location.reload(),e.next=18;break;case 7:if(e.prev=7,e.t0=e.catch(0),window.console.error(e.t0),!e.t0.response){e.next=18;break}e.t1=e.t0.response.status,e.next=400===e.t1?14:16;break;case 14:return window.alert(e.t0.response.data.message),e.abrupt("return");case 16:window.alert("Sorry, there was an unknown login problem, please try again.");case 17:window.alert("Sorry, there was an unknown login problem, please try again.");case 18:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleLogout=function(){a.setState({user:"",roles:""}),St(),document.location.reload()},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.getLoggedInUser().then(function(t){e.setState({user:t})}),this.setState({isActive:this.activeRequests.isActive}),this.subcription=this.activeRequests.addEventListener(this.handleActiveRequests),window.addEventListener("storage",this.detectUserChangesFromOtherTabs)}},{key:"componentWillUnmount",value:function(){this.subcription&&this.activeRequests.removeEventListener(this.subcription),window.removeEventListener("storage",this.detectUserChangesFromOtherTabs)}},{key:"render",value:function(){var e=this.state,t=e.isActive,a=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.SnackbarProvider,{maxSnack:1,anchorOrigin:{vertical:"bottom",horizontal:"center"},preventDuplicate:!0},r.a.createElement(Oa,null),r.a.createElement(g.d,null,r.a.createElement(A,{roles:a.roles,user:a.username,isActive:t,onLogin:this.handleLogin,onLogout:this.handleLogout})),r.a.createElement("section",{id:"main-content-area",className:"row",role:"main"},r.a.createElement("div",null,r.a.createElement(g.d,null,r.a.createElement(Da,{condition:a.roles.includes("content_manager"),path:"/all-training-resources",component:lt}),r.a.createElement(Da,{condition:a.roles.includes("content_manager"),path:"/training-resource/edit/:slug",component:Ze}),r.a.createElement(Da,{condition:a.roles.includes("content_manager"),path:"/training-resource/create",component:et}),r.a.createElement(Da,{condition:a.roles.includes("framework_manager"),path:"/framework/:framework/competency/:cid/attribute/:aid/settings",component:qt}),r.a.createElement(Da,{condition:a.roles.includes("framework_manager"),path:"/framework/:framework/manage/competencies/:cid/manage-attributes",component:ae}),r.a.createElement(Da,{condition:a.roles.includes("framework_manager"),path:"/framework/:framework/manage/competencies/:domainId?",component:oe}),r.a.createElement(Da,{condition:a.roles.includes("framework_manager"),path:"/framework/:framework/manage/data/:domainId?",component:_e}),r.a.createElement(g.b,{path:"/framework/:framework/:version/competency/details/:cid",component:Ce}),r.a.createElement(Da,{condition:a.roles.includes("framework_manager"),path:"/framework/:framework/competency/:id/settings",component:It}),r.a.createElement(g.b,{path:"/framework/:framework/:version/profile/create/guest",component:$t}),r.a.createElement(Da,{condition:a.roles.includes("framework_manager"),path:"/framework/:framework/:version/profile/create",component:Kt}),r.a.createElement(g.b,{path:"/framework/:framework/:version/profile/view/guest",component:pa}),r.a.createElement(g.b,{path:"/framework/:framework/:version/profile/map/guest",component:da}),r.a.createElement(g.b,{path:"/framework/:framework/:version/profile/view/:id/:alias",component:ra}),r.a.createElement(g.b,{path:"/framework/:framework/:version/profiles/compare/guest/summary",component:ya}),r.a.createElement(g.b,{path:"/framework/:framework/:version/profiles/compare/:profile1/:profile2",component:oa}),r.a.createElement(g.b,{path:"/framework/:framework/:version/profile/map/download",component:ua}),r.a.createElement(Da,{condition:a.roles.includes("framework_manager"),path:"/framework/:framework/:version/profile/edit/:id",component:va}),r.a.createElement(Da,{condition:a.roles.includes("framework_manager"),path:"/framework/:framework/:version/profile/map/:id",component:ba}),r.a.createElement(g.b,{path:"/framework/:framework/:version",component:Ke}),r.a.createElement(Da,{condition:a.roles.includes("content_manager"),path:"/training-resources/:id/map/:framework",component:nt}),r.a.createElement(Da,{condition:a.roles.includes("content_manager"),path:"/training-resources/:resource/demap/:attribute",component:Pt}),r.a.createElement(g.b,{path:"/training-resources/:slug",component:it}),r.a.createElement(Da,{condition:a.roles.includes("content_manager"),path:"/training-resources-home",component:ut}),r.a.createElement(Da,{condition:a.is_logged_in,path:"/user/change/password",component:mt}),r.a.createElement(Da,{condition:a.is_logged_in,path:"/user/view",component:ft}),r.a.createElement(Da,{condition:a.is_logged_in,path:"/manage-frameworks",component:xa}),r.a.createElement(g.b,{path:"/documentation",component:wa}),r.a.createElement(g.b,{path:"/develop-your-courses",component:Sa}),r.a.createElement(g.b,{path:"/about",component:dt}),r.a.createElement(g.b,{path:"/login",component:Na}),r.a.createElement(g.b,{path:"/",component:At}))))))}}]),t}(n.Component),Da=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,a=e.condition,n=Object(l.a)(e,["component","condition"]);return r.a.createElement(g.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(g.a,{to:"/"})}}))}}]),t}(n.Component),Aa=document.getElementById("root");i.a.render(r.a.createElement(o.a,{basename:""},r.a.createElement(Ca,null)),Aa),B.a.setAppElement(Aa)},20:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAeFBMVEX///8AAAClpaX8/Pz39/e3t7fZ2dm9vb3T09Pl5eXw8PBfX1/h4eFtbW1qamqbm5vMzMyCgoJ4eHgaGhqKioplZWWrq6sPDw/FxcUwMDDs7OySkpJ/f38UFBQhISFLS0s8PDxPT09XV1c2NjY4ODinp6dEREQpKSmYua94AAAGb0lEQVR4nO2d6XbiMAyFMUsIW8O+lhZoB97/DYc0MIQkkEiWkNzx97uL70kiy9pcq3k8Ho/H4/F4PB6Px+PxwOiug+Gy3V4uw063Ib0YaoL5+25r0qzeomFTellEBNHePGA1Wjr/MDvT7SN5F2ZD6TXaMPwskffD9o/0OrG0V1X0/bBx8ZMcnirri4mk1wul2wPpO/MRSq8ZxByqL2YsverqNMAPMGHSl155RfplG8RjWtJrr0QLrc+48aZGNgKNOUivv5SRnUBjdsr9uLGtwPO20ZUW8QwCgWeTqtjBsX5FEz7Uvqiofb6IT2klDxhSCdS6aazpBBqj8kD1QanQBNJy8hBZmStbaT05CD/ChHdpRVkW1AqNsvPihlyg+ZDWdEeHXqAxdWlVaWYcCo0i763PItBspHXdeONRaNT4p6TeTBo1ns2US6Eac8ol0BglOY0ln8KBtLaEAZ9CI60tgVGgjteU3OdOM5JWF8NmSWNUWNMdp0KjILTYZBVoltL6arWAV6EC39QqEVPOTFofy9k3zUpaH+9+HyN/vtgzK5Q3phNmhR1pgaw+W4x8yI1bofyGyK2wLS2QXaF8eYZXaMvvf0vlLQ19SuYe+d3ii1mh/I6PrNKrjLzXRlJC8wR5z7vOK/BLWh9rPDhGQUyYJTl6Q0P9N+92oSEkzGtM5Q0Ns6k5SquLYUpxJygIJtZ44xg6ir8YExdKar9CPoVTaW0XYB1OEOTd7oQ/XALV1Ao3uBTKn36vMNmak7SuG0w5RPkQzQ2WBJSCtFMKDoUanO4bDHnSnrSmDJW6tkHIB2juIa9PnEsrykHWEpSgsQ+R9iSsqAL6BqV7quPUlIXwU5RPOBVDVjykIcBWDFHsVF1DUIo2hUAFZVBPIJD4Jq2hBOt6Wp3to2kszY1eI3NjbbMvat0mMqCbhBauDDfB+qgKMmkZ+q1o8HncnVa52HvniBCYC1q0j6fv47E3nYcS+ZnMFLbcWQf8GN+zKoL0IK3Tiye7rTe51vRV1ldugGI3h+wX2MhX5g5eFtYID4WLzDV/NCsHGXu5o0Sx5zB5ybG4X6wv/v+54p5mVCUvNc5Z0ObDrtsF/3by9LmM899KWDKJYNbO/87TsNaRN5cRliXti+Lw4aPRkN/TZcFRfv3gp//B6fZUmAE1Kw4/dNqbt1Q47ms2agXFP1khaX5gM6vVyp+eW4Nm8+ny+pXK5CZMkcaqztgn/kupan0Xa0Jd/wC0jgxwGiFVHQxPEVahB9fYgA1625KHG8GD5g4gD6QDTkHuiAViju6TqOKDbLQwWQ/aYEAXsYKYY1R64uu2sGNDSN2bPXIRZyajom39QhBhjllXCA2qbbHFbjwPMsavcfYB9pZ/lq7oDfuOZjj1xqNNVN9MxwOi7miyowZ3sToeol2Ruc7ZBqLwOHdHhQ0kWTjmZm07SFLF3G0/dhA0Dal+hMbs7RXylVbSYP0lKjakCdbmdC+toBTLPZG5I4YCy8AU63gdGhZ2CnVvFQlWGwZjGT4dVqUb79Krr4SNQvw9Dq/E4jVlnpBEhUXfieVNDq/CoqafvvCXB3SQna1ThBp01E29T3oFXcThgENzAauQd14gJcgPkXleICXID9EJly0B6bgxz4OgZIdTyD1NjxJcZp971hwluGiN9KohoEyNI253Asr5Vh4ovQcV+2YeTEoMRqHenFoRmNKMb+lFg0BUiDtzdEpA9H0TpbZfBeJSGoe80hjEdkHSpPU6EJ3fDvndMYjKE3cO+D8grhjgnhZIDfx04daGj9ny3QnSJMBDNS6dDmPgJ0TpFUOBtwxJrxgKeOKSY24pwjF1KFiaAI5jsN0WxwX4FjoHykzuARed/H6FrDM7OQDPAfUK1QE+AnuF6vj9CsHf4e/fLRwLJmL6Z6RXDAU+zdWFytI08BPww9EJSoHHaRyLJk7AAv+DmLdj2wWmYj83gkY1mGIMN2q8ryAE8t7VTA2u7Et61RBwxewOFWMgR3875Jpiy6BLBiDpAd365EzcG3+HAvEEay5s2p330ouvhE2PpRPGxu6SCAeqamyvhFJfg2k/ElT5KYpirrJq/zQ3jhJFR2+fJdmAGqV9CSfCscNLjZE34nv11BXyDcin7jXrmp5jfqorCeG7jkKpWYtxanJQH4iOc9n2NkP+odCNTtie11/OvDXsa7shyePxeDwej8fj8Vz4C1b2gkr4izi5AAAAAElFTkSuQmCC"},290:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IB2cksfwAAAW5QTFRF////////////////7+/v39/f1tXV09bS0tXS0tXR0dTR0dTQ0NTQ0NPPz9PPztLOztHNzdHNzdHMz8/PzdDMzNDMzNDLzM/Ly8/Ly8/Ky87Kys3Jyc3Jyc3IyMzIyMzHx8vHxsrGxsrFxcnFxcnExMnExMjDw8jDxMfDw8fCwsfCwcXAwMXAwMW/wMS/v8S+v8O+vsO+vsK9vcK9vcK8v7+/vMG8vMG7vMC8u8C7u8C6ur+6ur+5ub65ub64uL23t7y2tru1tbq0tLqztLmzs7iysrixsrexsbewsbawsLavsLWvr7Wur7SusLOvrrStrrOtr7KvrbOsrLKrr6+vq7Gqn6OenqCdn5+flpmWk5iTkZSRkZORj4+PiYyJhIaEhIWEgoWCgICAfX98fH98eXx5cHJvcHBwYGBgXV5dUFFQUFBQQ0RDQEBAPj8+NTY1MjMxMDAwKSkpKCkoICAgGxsbEBAQDg4ODQ4NAAAAlzoSDQAAAAN0Uk5TAAoO5yEBUwAAAvhJREFUeNq1lutX2kAQxWmXFDVGYy1EIjQ2VZDiu1CsRQQURYvV+qSKj6II8rANYOT+9z0JqIASo9Y5ydkP2f2d2Ts7d2N4jRcJgwEIBwO+SbdTFGw8ZzZz1n5BdLgnfLPBcCT6fW1jY3P78QEYEA76PWMu0W5lGbrNZGrrYNg+u+ga9fgVcmxtY/NJZAOCfs+IY4Bn6eN8RdlEJX9Ed1uFIfdnfzC8uBJbv5tyqqhMLKa0wQHPiEOwMInLW4Eu9xmzfdDtmQ0uLK3cSXmvBBTS6QJQ2tMC+8YcgpnOApAzSa83mZEBZIff2odGfYFQJNqc8s4VchQhhFA5XO1pgCddAxaFKyeNpBpxGSgNmwXXxMxcWE25fkkJGUIIoExESQPsFnkmC0gUuQmjBGQZq+j2BEKR5dUGLVLIvbkGkxxSrcHO92wCkIyENJL3u+2O8Zng/FJsvR5cRF0GFIqtwaKVvoTcSxrCKOOS7hPdXwLhxUYtUFC+Z6AKQgpoDRZ6joEkaYo4cMQKril/KLLcCE4TVYmqFmkNsK0rD9lIiDdXKCSrwwEhREae6Ve0WIiuPg3M0xVlW171BBe21CGjbLbSYR0c/To3H409TQquHTggREKZ8pbjEiRqqxxXtWjjRLdvLrzUAK4Vr5qwZvEsJsCrzExWF9Tk9gIm84e74BRyRN9xeyS4vkHSmg1yK4Wxt5yUIClDayn0t3SteLWq3RQvjQrN31O87e2dEiBl0tJDJmTrykImN8dtq6AOpIw8Y3OMf2s+bvptU+hJqFrc1yCfpmZDkWYX0mv0H9WWpvS2tH6w8z27e58JJVi7c2ImuNBkQvrBOOWZc0CqsyFKtU3+97OuaQBnXGe90RuTMvCHtpziuWCcmDvPm64m+t2vlmuq/YHqqwnGCcfs1l+mCcbSmgtSe8iDGQNnPEsnrq//fZrltXS4tk3oAOPvT2tPF91uMrXTDNv340JrjQ4hbsHAxeE0z1ksHD99eKFdl0dl/P//Cl+9EPcfS+yBAoqk3eUAAAAASUVORK5CYII="},291:function(e,t,a){e.exports=a.p+"static/media/european-union.0ae78626.png"},292:function(e,t,a){e.exports=a.p+"static/media/PerMedCoE.2b28bd09.jpg"},293:function(e,t,a){e.exports=a.p+"static/media/Bioexcel.9e7ef4d7.png"},305:function(e){e.exports={swagger:"2.0",info:{description:"<ul><li><div>The Version Manager API provides top level details of all competency frameworks. You may use this data to: <ul><li>List frameworks</li> <li>Query framework data of a particular framework</li></ul></div><p>To query framework data, you will need framework title and version number from this API. </p></li><li> <div>The Framework Data API provides actual data of a competency framework.</div></li></ul>",version:"1.0.0",title:"Competency Hub APIs",contact:{url:"https://competency.ebi.ac.uk",email:"prakash@ebi.ac.uk"},license:{name:"Creative commons",url:"https://creativecommons.org/licenses/by-sa/4.0/"}},host:"live-competency-mapper.pantheonsite.io",schemes:["https"],paths:{"/api/version_manager":{get:{tags:["developers"],summary:"Version Manager API",description:"This api does not have any parameters. It needs a query string as _format=json\n",operationId:"versionInfo",produces:["application/json"],parameters:[{name:"_format",in:"query",description:"The _format query parameter is mandatory",required:!0,type:"string"}],responses:{200:{description:"Version details of all frameworks",schema:{type:"array",items:{$ref:"#/definitions/VersionInfo"}}},400:{description:"bad input parameter"}}}},"/api/{framework}/{version}":{get:{tags:["developers"],summary:"Framework Data API",description:"This api does not have any parameters. It needs a query string as _format=json\n",operationId:"frameworkData",produces:["application/json"],parameters:[{name:"framework",in:"path",description:"Name of the framework",required:!0,type:"string"},{name:"version",in:"path",description:"Version of the framework",required:!0,type:"string"},{name:"_format",in:"query",description:"The _format query parameter is mandatory",required:!0,type:"string"}],responses:{200:{description:"Framework Data",schema:{type:"array",items:{$ref:"#/definitions/FrameworkData"}}},400:{description:"bad input parameter"}}}}},definitions:{VersionInfo:{type:"object",required:["nid","title"],properties:{nid:{type:"string",format:"id",example:"9.0"},title:{type:"string",example:"BioExcel"},description:{type:"string",example:"The BioExcel training programme is based on a competency profile"},logo:{type:"object",example:"Publich path to logo image",properties:{target_id:{type:"string"},alt:{type:"string"},title:{type:"string"},width:{type:"integer"},height:{type:"integer"},target_type:{type:"string"},target_uuid:{type:"string"},url:{type:"string"}}},attribute_types:{type:"array",items:{type:"object",properties:{id:{type:"string"},uuid:{type:"string"},title:{type:"string"}}}},domains:{type:"array",items:{type:"object",properties:{id:{type:"string"},uuid:{type:"string"},title:{type:"string"}}}},expertise_levels:{type:"array",items:{type:"object",properties:{id:{type:"string"},uuid:{type:"string"},title:{type:"string"},rating_level:{type:"string"},description:{type:"string"}}}},versions:{type:"array",items:{type:"object",properties:{id:{type:"string"},uuid:{type:"string"},number:{type:"string"},status:{type:"string"},release_notes:{type:"string"}}}}}},FrameworkData:{type:"object",properties:{uuid:{type:"string",format:"uuid",example:"b20064ef-5cbf-4147-90f8-08e7a6693e17"},nid:{type:"string",format:"id",example:"9.0"},title:{type:"string",example:"BioExcel"},description:{type:"string",example:"The BioExcel training programme is based on a competency profile"},version:{type:"string",example:"1.0"},release_notes:{type:"string",example:"Initial version etc. etc."},type:{type:"string",example:"framework"},domains:{type:"array",items:{type:"object",properties:{uuid:{type:"string",format:"uuid",example:"b20064ef-5cbf-4147-90f8-08e7a6693e17"},nid:{type:"string",format:"id",example:"9.0"},title:{type:"string",example:"BioExcel"},type:{type:"string",example:"Domain"},competencies:{type:"array",items:{type:"object",properties:{uuid:{type:"string",format:"uuid",example:"b20064ef-5cbf-4147-90f8-08e7a6693e17"},nid:{type:"string",format:"id",example:"9.0"},title:{type:"string",example:"BioExcel"},type:{type:"string",example:"Competency"},archived:{type:"string",example:"0 or 1"},mapped_other_competency:{type:"string",example:"This maps to another framework"},attributes:{type:"array",items:{type:"object",properties:{uuid:{type:"string",format:"uuid",example:"b20064ef-5cbf-4147-90f8-08e7a6693e17"},nid:{type:"string",format:"id",example:"9.0"},title:{type:"string",example:"BioExcel"},type:{type:"string",example:"Attribute type e.g. Knowledge"}}}}}}}}}}}}}}},308:function(e,t,a){e.exports=a(1082)},313:function(e,t,a){},338:function(e,t,a){},34:function(e){e.exports=[{title:"iscb",desc:"Students and professionals in computational biology",sub_text:'<div class="vf-card__text">Explore the ISCB competencies and:<ul><li>Career profiles</li></ul></div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2018-09/iscb_logo.png?w=180",alt:"ISCB - International Society for Computational Biology home ",link:"https://www.iscb.org/",card_link:"./framework/iscb/3.0",url:"https://competency.ebi.ac.uk/framework/iscb/3.0",version:"3.0"},{title:"bioexcel",desc:"Professionals in computational biomolecular research",sub_text:'<div class="vf-card__text">Explore the BioExcel competencies and:<ul><li>Career profiles</li><li>Training resources</li></ul></div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2020-10/Bioexcel_logo_no_subheading_updated_RGB.png?w=220",alt:"BioExcel - Centre of Excellence for Computational Biomolecular Research home",link:"https://bioexcel.eu/",card_link:"./framework/bioexcel/3.0",url:"https://competency.ebi.ac.uk/framework/bioexcel/3.0",version:"3.0"},{title:"permedcoe",desc:"Professionals in computational personalised medicine",sub_text:'<div class="vf-card__text">Explore the PerMedCoE competencies and:<ul><li>Career profiles</li><li>Training resources</li></ul></div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2021-04/PerMedCoE_WHITE%20background.jpg?w=250",alt:"PerMedCoE - HPC/Exascale Centre of Excellence for Personalised Medicine in Europe home",link:"https://permedcoe.eu/",card_link:"./framework/permedcoe/2.1",url:"https://competency.ebi.ac.uk/framework/permedcoe/2.1",version:"2.1"},{title:"arise",desc:"Research infrastructure scientists",sub_text:'<div class="vf-card__text">Explore the ARISE competencies</div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2021-09/ARISE_logo.jpg?w=200",alt:"ARISE- Career Accelerator for Research Infrastructure Scientists home",link:"https://www.embl.org/about/info/arise/",card_link:"./framework/arise/0.5",url:"https://competency.ebi.ac.uk/framework/arise/0.5",version:"0.5"},{title:"ritrain",desc:"Managers of research infrastructures",sub_text:'<div class="vf-card__text">Explore the RItrain competencies</div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2018-09/ritrain.png?w=120",alt:"RItrain - Research Infrastructure Training Programme home",link:"http://ritrain.eu/",card_link:"./framework/ritrain/1.0",url:"https://competency.ebi.ac.uk/framework/ritrain/1.0",version:"1.0"},{title:"corbel",desc:"Technical operators of research infrastructures",sub_text:'<div class="vf-card__text">Explore the CORBEL competencies and:<ul><li>Training resources</li></ul></div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2022-03/CORBEL-Logo.jpg?w=200?w=200",alt:"CORBEL: Coordinated Research Infrastructures Building Enduring Life-science Services home",link:"https://www.corbel-project.eu/home.html",card_link:"./framework/corbel/1.1",url:"https://competency.ebi.ac.uk/framework/corbel/1.1",version:"1.1"},{title:"datasteward",desc:"Data steward: policy, research and infrastructure",sub_text:'<div class="vf-card__text">Explore the NPOS/ELIXIR competencies</div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2020-10/datasteward.jpg?w=280",alt:"Training and competencies for data stewardship",link:"https://www.dtls.nl/fair-data/training/",card_link:"./framework/datasteward/1.0",url:"https://competency.ebi.ac.uk/framework/datasteward/1.0",version:"1.0"},{title:"cineca",desc:"Professionals working with clinical human data",sub_text:'<div class="vf-card__text">Explore the CINECA competencies</div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2019-12/cineca.png?w=200",alt:"CINECA - Common Infrastructure for National Cohorts in Europe, Canada, and Africa home",link:"https://www.cineca-project.eu/",card_link:"./framework/cineca/1.0",url:"https://competency.ebi.ac.uk/framework/cineca/1.0",version:"1.0"},{title:"nhs",desc:"Clinical practitioners using genomics",sub_text:'<div class="vf-card__text">Explore the NHS competencies</div>',src:"https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/sites/default/files/2018-06/nhs_logo.png?w=350",alt:"NHS - Health Education England",link:"https://www.hee.nhs.uk/our-work/building-our-future-digital-workforce/future-clinical-bioinformaticians-nhs",card_link:"./framework/nhs/1.0",url:"https://competency.ebi.ac.uk/framework/nhs/1.0",version:"1.0"}]},377:function(e,t,a){},380:function(e,t,a){}},[[308,1,2]]]);
//# sourceMappingURL=main.91fd7d17.chunk.js.map